(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fc={exports:{}},ll={},Lc={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=Symbol.for("react.element"),mf=Symbol.for("react.portal"),pf=Symbol.for("react.fragment"),hf=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),xf=Symbol.for("react.context"),vf=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),wf=Symbol.for("react.memo"),bf=Symbol.for("react.lazy"),ca=Symbol.iterator;function jf(e){return e===null||typeof e!="object"?null:(e=ca&&e[ca]||e["@@iterator"],typeof e=="function"?e:null)}var Dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rc=Object.assign,Ic={};function Vr(e,t,r){this.props=e,this.context=t,this.refs=Ic,this.updater=r||Dc}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $c(){}$c.prototype=Vr.prototype;function to(e,t,r){this.props=e,this.context=t,this.refs=Ic,this.updater=r||Dc}var ro=to.prototype=new $c;ro.constructor=to;Rc(ro,Vr.prototype);ro.isPureReactComponent=!0;var ua=Array.isArray,zc=Object.prototype.hasOwnProperty,no={current:null},Ac={key:!0,ref:!0,__self:!0,__source:!0};function _c(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)zc.call(t,n)&&!Ac.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Un,type:e,key:i,ref:o,props:s,_owner:no.current}}function Sf(e,t){return{$$typeof:Un,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function so(e){return typeof e=="object"&&e!==null&&e.$$typeof===Un}function Nf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var da=/\/+/g;function Tl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nf(""+e.key):t.toString(36)}function gs(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Un:case mf:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Tl(o,0):n,ua(s)?(r="",e!=null&&(r=e.replace(da,"$&/")+"/"),gs(s,t,r,"",function(d){return d})):s!=null&&(so(s)&&(s=Sf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(da,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ua(e))for(var a=0;a<e.length;a++){i=e[a];var c=n+Tl(i,a);o+=gs(i,t,r,c,s)}else if(c=jf(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=n+Tl(i,a++),o+=gs(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kn(e,t,r){if(e==null)return e;var n=[],s=0;return gs(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Cf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ae={current:null},ys={transition:null},Mf={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ys,ReactCurrentOwner:no};function Oc(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Kn,forEach:function(e,t,r){Kn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kn(e,function(){t++}),t},toArray:function(e){return Kn(e,function(t){return t})||[]},only:function(e){if(!so(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Vr;Z.Fragment=pf;Z.Profiler=gf;Z.PureComponent=to;Z.StrictMode=hf;Z.Suspense=kf;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mf;Z.act=Oc;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Rc({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=no.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)zc.call(t,c)&&!Ac.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:Un,type:e.type,key:s,ref:i,props:n,_owner:o}};Z.createContext=function(e){return e={$$typeof:xf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yf,_context:e},e.Consumer=e};Z.createElement=_c;Z.createFactory=function(e){var t=_c.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:vf,render:e}};Z.isValidElement=so;Z.lazy=function(e){return{$$typeof:bf,_payload:{_status:-1,_result:e},_init:Cf}};Z.memo=function(e,t){return{$$typeof:wf,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=ys.transition;ys.transition={};try{e()}finally{ys.transition=t}};Z.unstable_act=Oc;Z.useCallback=function(e,t){return Ae.current.useCallback(e,t)};Z.useContext=function(e){return Ae.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return Ae.current.useDeferredValue(e)};Z.useEffect=function(e,t){return Ae.current.useEffect(e,t)};Z.useId=function(){return Ae.current.useId()};Z.useImperativeHandle=function(e,t,r){return Ae.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return Ae.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return Ae.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Ae.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return Ae.current.useReducer(e,t,r)};Z.useRef=function(e){return Ae.current.useRef(e)};Z.useState=function(e){return Ae.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return Ae.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return Ae.current.useTransition()};Z.version="18.3.1";Lc.exports=Z;var C=Lc.exports;const Bc=ff(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=C,Tf=Symbol.for("react.element"),Pf=Symbol.for("react.fragment"),Ff=Object.prototype.hasOwnProperty,Lf=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Df={key:!0,ref:!0,__self:!0,__source:!0};function Hc(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Ff.call(t,n)&&!Df.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Tf,type:e,key:i,ref:o,props:s,_owner:Lf.current}}ll.Fragment=Pf;ll.jsx=Hc;ll.jsxs=Hc;Fc.exports=ll;var l=Fc.exports,li={},Uc={exports:{}},Xe={},Wc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,U){var q=I.length;I.push(U);e:for(;0<q;){var A=q-1>>>1,Y=I[A];if(0<s(Y,U))I[A]=U,I[q]=Y,q=A;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var U=I[0],q=I.pop();if(q!==U){I[0]=q;e:for(var A=0,Y=I.length,ne=Y>>>1;A<ne;){var ie=2*(A+1)-1,se=I[ie],Se=ie+1,Ie=I[Se];if(0>s(se,q))Se<Y&&0>s(Ie,se)?(I[A]=Ie,I[Se]=q,A=Se):(I[A]=se,I[ie]=q,A=ie);else if(Se<Y&&0>s(Ie,q))I[A]=Ie,I[Se]=q,A=Se;else break e}}return U}function s(I,U){var q=I.sortIndex-U.sortIndex;return q!==0?q:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],d=[],p=1,g=null,h=3,w=!1,k=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=I)n(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(d)}}function y(I){if(b=!1,f(I),!k)if(r(c)!==null)k=!0,ue(L);else{var U=r(d);U!==null&&de(y,U.startTime-I)}}function L(I,U){k=!1,b&&(b=!1,m(M),M=-1),w=!0;var q=h;try{for(f(U),g=r(c);g!==null&&(!(g.expirationTime>U)||I&&!D());){var A=g.callback;if(typeof A=="function"){g.callback=null,h=g.priorityLevel;var Y=A(g.expirationTime<=U);U=e.unstable_now(),typeof Y=="function"?g.callback=Y:g===r(c)&&n(c),f(U)}else n(c);g=r(c)}if(g!==null)var ne=!0;else{var ie=r(d);ie!==null&&de(y,ie.startTime-U),ne=!1}return ne}finally{g=null,h=q,w=!1}}var S=!1,v=null,M=-1,z=5,H=-1;function D(){return!(e.unstable_now()-H<z)}function G(){if(v!==null){var I=e.unstable_now();H=I;var U=!0;try{U=v(!0,I)}finally{U?X():(S=!1,v=null)}}else S=!1}var X;if(typeof u=="function")X=function(){u(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,B=K.port2;K.port1.onmessage=G,X=function(){B.postMessage(null)}}else X=function(){T(G,0)};function ue(I){v=I,S||(S=!0,X())}function de(I,U){M=T(function(){I(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,ue(L))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var q=h;h=U;try{return I()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=h;h=I;try{return U()}finally{h=q}},e.unstable_scheduleCallback=function(I,U,q){var A=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?A+q:A):q=A,I){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=q+Y,I={id:p++,callback:U,priorityLevel:I,startTime:q,expirationTime:Y,sortIndex:-1},q>A?(I.sortIndex=q,t(d,I),r(c)===null&&I===r(d)&&(b?(m(M),M=-1):b=!0,de(y,q-A))):(I.sortIndex=Y,t(c,I),k||w||(k=!0,ue(L))),I},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(I){var U=h;return function(){var q=h;h=U;try{return I.apply(this,arguments)}finally{h=q}}}})(Vc);Wc.exports=Vc;var Rf=Wc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=C,Qe=Rf;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qc=new Set,kn={};function mr(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(kn[e]=t,e=0;e<t.length;e++)qc.add(t[e])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=Object.prototype.hasOwnProperty,$f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fa={},ma={};function zf(e){return ii.call(ma,e)?!0:ii.call(fa,e)?!1:$f.test(e)?ma[e]=!0:(fa[e]=!0,!1)}function Af(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _f(e,t,r,n){if(t===null||typeof t>"u"||Af(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _e(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new _e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new _e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new _e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new _e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new _e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new _e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new _e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new _e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new _e(e,5,!1,e.toLowerCase(),null,!1,!1)});var lo=/[\-:]([a-z])/g;function io(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lo,io);Te[t]=new _e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lo,io);Te[t]=new _e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lo,io);Te[t]=new _e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new _e(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new _e(e,1,!1,e.toLowerCase(),null,!0,!0)});function oo(e,t,r,n){var s=Te.hasOwnProperty(t)?Te[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_f(t,r,s,n)&&(r=null),n||s===null?zf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Pt=If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zn=Symbol.for("react.element"),xr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),ao=Symbol.for("react.strict_mode"),oi=Symbol.for("react.profiler"),Yc=Symbol.for("react.provider"),Gc=Symbol.for("react.context"),co=Symbol.for("react.forward_ref"),ai=Symbol.for("react.suspense"),ci=Symbol.for("react.suspense_list"),uo=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Qc=Symbol.for("react.offscreen"),pa=Symbol.iterator;function Xr(e){return e===null||typeof e!="object"?null:(e=pa&&e[pa]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Pl;function ln(e){if(Pl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pl=t&&t[1]||""}return`
`+Pl+e}var Fl=!1;function Ll(e,t){if(!e||Fl)return"";Fl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Fl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ln(e):""}function Of(e){switch(e.tag){case 5:return ln(e.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 2:case 15:return e=Ll(e.type,!1),e;case 11:return e=Ll(e.type.render,!1),e;case 1:return e=Ll(e.type,!0),e;default:return""}}function ui(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case xr:return"Portal";case oi:return"Profiler";case ao:return"StrictMode";case ai:return"Suspense";case ci:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gc:return(e.displayName||"Context")+".Consumer";case Yc:return(e._context.displayName||"Context")+".Provider";case co:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uo:return t=e.displayName||null,t!==null?t:ui(e.type)||"Memo";case Lt:t=e._payload,e=e._init;try{return ui(e(t))}catch{}}return null}function Bf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ui(t);case 8:return t===ao?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hf(e){var t=Xc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jn(e){e._valueTracker||(e._valueTracker=Hf(e))}function Kc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Xc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ts(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function di(e,t){var r=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ha(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zc(e,t){t=t.checked,t!=null&&oo(e,"checked",t,!1)}function fi(e,t){Zc(e,t);var r=Gt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mi(e,t.type,r):t.hasOwnProperty("defaultValue")&&mi(e,t.type,Gt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ga(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mi(e,t,r){(t!=="number"||Ts(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var on=Array.isArray;function Fr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function pi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ya(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(on(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gt(r)}}function Jc(e,t){var r=Gt(t.value),n=Gt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function xa(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var es,tu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(es=es||document.createElement("div"),es.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uf=["Webkit","ms","Moz","O"];Object.keys(un).forEach(function(e){Uf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),un[t]=un[e]})});function ru(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||un.hasOwnProperty(e)&&un[e]?(""+t).trim():t+"px"}function nu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ru(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Wf=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gi(e,t){if(t){if(Wf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function yi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,Lr=null,Dr=null;function va(e){if(e=qn(e)){if(typeof vi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=ul(t),vi(e.stateNode,e.type,t))}}function su(e){Lr?Dr?Dr.push(e):Dr=[e]:Lr=e}function lu(){if(Lr){var e=Lr,t=Dr;if(Dr=Lr=null,va(e),t)for(e=0;e<t.length;e++)va(t[e])}}function iu(e,t){return e(t)}function ou(){}var Dl=!1;function au(e,t,r){if(Dl)return e(t,r);Dl=!0;try{return iu(e,t,r)}finally{Dl=!1,(Lr!==null||Dr!==null)&&(ou(),lu())}}function bn(e,t){var r=e.stateNode;if(r===null)return null;var n=ul(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var ki=!1;if(Ct)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){ki=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{ki=!1}function Vf(e,t,r,n,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var dn=!1,Ps=null,Fs=!1,wi=null,qf={onError:function(e){dn=!0,Ps=e}};function Yf(e,t,r,n,s,i,o,a,c){dn=!1,Ps=null,Vf.apply(qf,arguments)}function Gf(e,t,r,n,s,i,o,a,c){if(Yf.apply(this,arguments),dn){if(dn){var d=Ps;dn=!1,Ps=null}else throw Error(R(198));Fs||(Fs=!0,wi=d)}}function pr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ka(e){if(pr(e)!==e)throw Error(R(188))}function Qf(e){var t=e.alternate;if(!t){if(t=pr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return ka(s),e;if(i===n)return ka(s),t;i=i.sibling}throw Error(R(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function uu(e){return e=Qf(e),e!==null?du(e):null}function du(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=du(e);if(t!==null)return t;e=e.sibling}return null}var fu=Qe.unstable_scheduleCallback,wa=Qe.unstable_cancelCallback,Xf=Qe.unstable_shouldYield,Kf=Qe.unstable_requestPaint,xe=Qe.unstable_now,Zf=Qe.unstable_getCurrentPriorityLevel,mo=Qe.unstable_ImmediatePriority,mu=Qe.unstable_UserBlockingPriority,Ls=Qe.unstable_NormalPriority,Jf=Qe.unstable_LowPriority,pu=Qe.unstable_IdlePriority,il=null,xt=null;function em(e){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(il,e,void 0,(e.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:nm,tm=Math.log,rm=Math.LN2;function nm(e){return e>>>=0,e===0?32:31-(tm(e)/rm|0)|0}var ts=64,rs=4194304;function an(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ds(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=an(a):(i&=o,i!==0&&(n=an(i)))}else o=r&~s,o!==0?n=an(o):i!==0&&(n=an(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ut(t),s=1<<r,n|=e[r],t&=~s;return n}function sm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ut(i),a=1<<o,c=s[o];c===-1?(!(a&r)||a&n)&&(s[o]=sm(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function bi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hu(){var e=ts;return ts<<=1,!(ts&4194240)&&(ts=64),e}function Rl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ut(t),e[t]=r}function im(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ut(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function po(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ut(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var re=0;function gu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yu,ho,xu,vu,ku,ji=!1,ns=[],Ot=null,Bt=null,Ht=null,jn=new Map,Sn=new Map,It=[],om="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ba(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Bt=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":jn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(t.pointerId)}}function Zr(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=qn(t),t!==null&&ho(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function am(e,t,r,n,s){switch(t){case"focusin":return Ot=Zr(Ot,e,t,r,n,s),!0;case"dragenter":return Bt=Zr(Bt,e,t,r,n,s),!0;case"mouseover":return Ht=Zr(Ht,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return jn.set(i,Zr(jn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sn.set(i,Zr(Sn.get(i)||null,e,t,r,n,s)),!0}return!1}function wu(e){var t=rr(e.target);if(t!==null){var r=pr(t);if(r!==null){if(t=r.tag,t===13){if(t=cu(r),t!==null){e.blockedOn=t,ku(e.priority,function(){xu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Si(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xi=n,r.target.dispatchEvent(n),xi=null}else return t=qn(r),t!==null&&ho(t),e.blockedOn=r,!1;t.shift()}return!0}function ja(e,t,r){xs(e)&&r.delete(t)}function cm(){ji=!1,Ot!==null&&xs(Ot)&&(Ot=null),Bt!==null&&xs(Bt)&&(Bt=null),Ht!==null&&xs(Ht)&&(Ht=null),jn.forEach(ja),Sn.forEach(ja)}function Jr(e,t){e.blockedOn===t&&(e.blockedOn=null,ji||(ji=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,cm)))}function Nn(e){function t(s){return Jr(s,e)}if(0<ns.length){Jr(ns[0],e);for(var r=1;r<ns.length;r++){var n=ns[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ot!==null&&Jr(Ot,e),Bt!==null&&Jr(Bt,e),Ht!==null&&Jr(Ht,e),jn.forEach(t),Sn.forEach(t),r=0;r<It.length;r++)n=It[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&(r=It[0],r.blockedOn===null);)wu(r),r.blockedOn===null&&It.shift()}var Rr=Pt.ReactCurrentBatchConfig,Rs=!0;function um(e,t,r,n){var s=re,i=Rr.transition;Rr.transition=null;try{re=1,go(e,t,r,n)}finally{re=s,Rr.transition=i}}function dm(e,t,r,n){var s=re,i=Rr.transition;Rr.transition=null;try{re=4,go(e,t,r,n)}finally{re=s,Rr.transition=i}}function go(e,t,r,n){if(Rs){var s=Si(e,t,r,n);if(s===null)Wl(e,t,n,Is,r),ba(e,n);else if(am(s,e,t,r,n))n.stopPropagation();else if(ba(e,n),t&4&&-1<om.indexOf(e)){for(;s!==null;){var i=qn(s);if(i!==null&&yu(i),i=Si(e,t,r,n),i===null&&Wl(e,t,n,Is,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Wl(e,t,n,null,r)}}var Is=null;function Si(e,t,r,n){if(Is=null,e=fo(n),e=rr(e),e!==null)if(t=pr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Is=e,null}function bu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case mo:return 1;case mu:return 4;case Ls:case Jf:return 16;case pu:return 536870912;default:return 16}default:return 16}}var At=null,yo=null,vs=null;function ju(){if(vs)return vs;var e,t=yo,r=t.length,n,s="value"in At?At.value:At.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return vs=s.slice(e,1<n?1-n:void 0)}function ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ss(){return!0}function Sa(){return!1}function Ke(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ss:Sa,this.isPropagationStopped=Sa,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=Ke(qr),Vn=he({},qr,{view:0,detail:0}),fm=Ke(Vn),Il,$l,en,ol=he({},Vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&e.type==="mousemove"?(Il=e.screenX-en.screenX,$l=e.screenY-en.screenY):$l=Il=0,en=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),Na=Ke(ol),mm=he({},ol,{dataTransfer:0}),pm=Ke(mm),hm=he({},Vn,{relatedTarget:0}),zl=Ke(hm),gm=he({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),ym=Ke(gm),xm=he({},qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vm=Ke(xm),km=he({},qr,{data:0}),Ca=Ke(km),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jm[e])?!!t[e]:!1}function vo(){return Sm}var Nm=he({},Vn,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(e){return e.type==="keypress"?ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cm=Ke(Nm),Mm=he({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=Ke(Mm),Em=he({},Vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),Tm=Ke(Em),Pm=he({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fm=Ke(Pm),Lm=he({},ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dm=Ke(Lm),Rm=[9,13,27,32],ko=Ct&&"CompositionEvent"in window,fn=null;Ct&&"documentMode"in document&&(fn=document.documentMode);var Im=Ct&&"TextEvent"in window&&!fn,Su=Ct&&(!ko||fn&&8<fn&&11>=fn),Ea=" ",Ta=!1;function Nu(e,t){switch(e){case"keyup":return Rm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kr=!1;function $m(e,t){switch(e){case"compositionend":return Cu(t);case"keypress":return t.which!==32?null:(Ta=!0,Ea);case"textInput":return e=t.data,e===Ea&&Ta?null:e;default:return null}}function zm(e,t){if(kr)return e==="compositionend"||!ko&&Nu(e,t)?(e=ju(),vs=yo=At=null,kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Su&&t.locale!=="ko"?null:t.data;default:return null}}var Am={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Am[e.type]:t==="textarea"}function Mu(e,t,r,n){su(n),t=$s(t,"onChange"),0<t.length&&(r=new xo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var mn=null,Cn=null;function _m(e){Au(e,0)}function al(e){var t=jr(e);if(Kc(t))return e}function Om(e,t){if(e==="change")return t}var Eu=!1;if(Ct){var Al;if(Ct){var _l="oninput"in document;if(!_l){var Fa=document.createElement("div");Fa.setAttribute("oninput","return;"),_l=typeof Fa.oninput=="function"}Al=_l}else Al=!1;Eu=Al&&(!document.documentMode||9<document.documentMode)}function La(){mn&&(mn.detachEvent("onpropertychange",Tu),Cn=mn=null)}function Tu(e){if(e.propertyName==="value"&&al(Cn)){var t=[];Mu(t,Cn,e,fo(e)),au(_m,t)}}function Bm(e,t,r){e==="focusin"?(La(),mn=t,Cn=r,mn.attachEvent("onpropertychange",Tu)):e==="focusout"&&La()}function Hm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return al(Cn)}function Um(e,t){if(e==="click")return al(t)}function Wm(e,t){if(e==="input"||e==="change")return al(t)}function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:Vm;function Mn(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ii.call(t,s)||!ft(e[s],t[s]))return!1}return!0}function Da(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ra(e,t){var r=Da(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Da(r)}}function Pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fu(){for(var e=window,t=Ts();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ts(e.document)}return t}function wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qm(e){var t=Fu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Pu(r.ownerDocument.documentElement,r)){if(n!==null&&wo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Ra(r,i);var o=Ra(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ym=Ct&&"documentMode"in document&&11>=document.documentMode,wr=null,Ni=null,pn=null,Ci=!1;function Ia(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ci||wr==null||wr!==Ts(n)||(n=wr,"selectionStart"in n&&wo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pn&&Mn(pn,n)||(pn=n,n=$s(Ni,"onSelect"),0<n.length&&(t=new xo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=wr)))}function ls(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var br={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionend:ls("Transition","TransitionEnd")},Ol={},Lu={};Ct&&(Lu=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function cl(e){if(Ol[e])return Ol[e];if(!br[e])return e;var t=br[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Lu)return Ol[e]=t[r];return e}var Du=cl("animationend"),Ru=cl("animationiteration"),Iu=cl("animationstart"),$u=cl("transitionend"),zu=new Map,$a="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xt(e,t){zu.set(e,t),mr(t,[e])}for(var Bl=0;Bl<$a.length;Bl++){var Hl=$a[Bl],Gm=Hl.toLowerCase(),Qm=Hl[0].toUpperCase()+Hl.slice(1);Xt(Gm,"on"+Qm)}Xt(Du,"onAnimationEnd");Xt(Ru,"onAnimationIteration");Xt(Iu,"onAnimationStart");Xt("dblclick","onDoubleClick");Xt("focusin","onFocus");Xt("focusout","onBlur");Xt($u,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(cn));function za(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Gf(n,t,void 0,e),e.currentTarget=null}function Au(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;za(s,a,d),i=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;za(s,a,d),i=c}}}if(Fs)throw e=wi,Fs=!1,wi=null,e}function ae(e,t){var r=t[Fi];r===void 0&&(r=t[Fi]=new Set);var n=e+"__bubble";r.has(n)||(_u(t,e,2,!1),r.add(n))}function Ul(e,t,r){var n=0;t&&(n|=4),_u(r,e,n,t)}var is="_reactListening"+Math.random().toString(36).slice(2);function En(e){if(!e[is]){e[is]=!0,qc.forEach(function(r){r!=="selectionchange"&&(Xm.has(r)||Ul(r,!1,e),Ul(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[is]||(t[is]=!0,Ul("selectionchange",!1,t))}}function _u(e,t,r,n){switch(bu(t)){case 1:var s=um;break;case 4:s=dm;break;default:s=go}r=s.bind(null,t,r,e),s=void 0,!ki||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wl(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=rr(a),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}a=a.parentNode}}n=n.return}au(function(){var d=i,p=fo(r),g=[];e:{var h=zu.get(e);if(h!==void 0){var w=xo,k=e;switch(e){case"keypress":if(ks(r)===0)break e;case"keydown":case"keyup":w=Cm;break;case"focusin":k="focus",w=zl;break;case"focusout":k="blur",w=zl;break;case"beforeblur":case"afterblur":w=zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Tm;break;case Du:case Ru:case Iu:w=ym;break;case $u:w=Fm;break;case"scroll":w=fm;break;case"wheel":w=Dm;break;case"copy":case"cut":case"paste":w=vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ma}var b=(t&4)!==0,T=!b&&e==="scroll",m=b?h!==null?h+"Capture":null:h;b=[];for(var u=d,f;u!==null;){f=u;var y=f.stateNode;if(f.tag===5&&y!==null&&(f=y,m!==null&&(y=bn(u,m),y!=null&&b.push(Tn(u,y,f)))),T)break;u=u.return}0<b.length&&(h=new w(h,k,null,r,p),g.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&r!==xi&&(k=r.relatedTarget||r.fromElement)&&(rr(k)||k[Mt]))break e;if((w||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,w?(k=r.relatedTarget||r.toElement,w=d,k=k?rr(k):null,k!==null&&(T=pr(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=d),w!==k)){if(b=Na,y="onMouseLeave",m="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(b=Ma,y="onPointerLeave",m="onPointerEnter",u="pointer"),T=w==null?h:jr(w),f=k==null?h:jr(k),h=new b(y,u+"leave",w,r,p),h.target=T,h.relatedTarget=f,y=null,rr(p)===d&&(b=new b(m,u+"enter",k,r,p),b.target=f,b.relatedTarget=T,y=b),T=y,w&&k)t:{for(b=w,m=k,u=0,f=b;f;f=yr(f))u++;for(f=0,y=m;y;y=yr(y))f++;for(;0<u-f;)b=yr(b),u--;for(;0<f-u;)m=yr(m),f--;for(;u--;){if(b===m||m!==null&&b===m.alternate)break t;b=yr(b),m=yr(m)}b=null}else b=null;w!==null&&Aa(g,h,w,b,!1),k!==null&&T!==null&&Aa(g,T,k,b,!0)}}e:{if(h=d?jr(d):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var L=Om;else if(Pa(h))if(Eu)L=Wm;else{L=Hm;var S=Bm}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(L=Um);if(L&&(L=L(e,d))){Mu(g,L,r,p);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&mi(h,"number",h.value)}switch(S=d?jr(d):window,e){case"focusin":(Pa(S)||S.contentEditable==="true")&&(wr=S,Ni=d,pn=null);break;case"focusout":pn=Ni=wr=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,Ia(g,r,p);break;case"selectionchange":if(Ym)break;case"keydown":case"keyup":Ia(g,r,p)}var v;if(ko)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else kr?Nu(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Su&&r.locale!=="ko"&&(kr||M!=="onCompositionStart"?M==="onCompositionEnd"&&kr&&(v=ju()):(At=p,yo="value"in At?At.value:At.textContent,kr=!0)),S=$s(d,M),0<S.length&&(M=new Ca(M,e,null,r,p),g.push({event:M,listeners:S}),v?M.data=v:(v=Cu(r),v!==null&&(M.data=v)))),(v=Im?$m(e,r):zm(e,r))&&(d=$s(d,"onBeforeInput"),0<d.length&&(p=new Ca("onBeforeInput","beforeinput",null,r,p),g.push({event:p,listeners:d}),p.data=v))}Au(g,t)})}function Tn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $s(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bn(e,r),i!=null&&n.unshift(Tn(e,i,s)),i=bn(e,t),i!=null&&n.push(Tn(e,i,s))),e=e.return}return n}function yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Aa(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,d=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&d!==null&&(a=d,s?(c=bn(r,i),c!=null&&o.unshift(Tn(r,c,a))):s||(c=bn(r,i),c!=null&&o.push(Tn(r,c,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Km=/\r\n?/g,Zm=/\u0000|\uFFFD/g;function _a(e){return(typeof e=="string"?e:""+e).replace(Km,`
`).replace(Zm,"")}function os(e,t,r){if(t=_a(t),_a(e)!==t&&r)throw Error(R(425))}function zs(){}var Mi=null,Ei=null;function Ti(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pi=typeof setTimeout=="function"?setTimeout:void 0,Jm=typeof clearTimeout=="function"?clearTimeout:void 0,Oa=typeof Promise=="function"?Promise:void 0,ep=typeof queueMicrotask=="function"?queueMicrotask:typeof Oa<"u"?function(e){return Oa.resolve(null).then(e).catch(tp)}:Pi;function tp(e){setTimeout(function(){throw e})}function Vl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Nn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Nn(t)}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ba(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),yt="__reactFiber$"+Yr,Pn="__reactProps$"+Yr,Mt="__reactContainer$"+Yr,Fi="__reactEvents$"+Yr,rp="__reactListeners$"+Yr,np="__reactHandles$"+Yr;function rr(e){var t=e[yt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mt]||r[yt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ba(e);e!==null;){if(r=e[yt])return r;e=Ba(e)}return t}e=r,r=e.parentNode}return null}function qn(e){return e=e[yt]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function ul(e){return e[Pn]||null}var Li=[],Sr=-1;function Kt(e){return{current:e}}function ce(e){0>Sr||(e.current=Li[Sr],Li[Sr]=null,Sr--)}function le(e,t){Sr++,Li[Sr]=e.current,e.current=t}var Qt={},Re=Kt(Qt),He=Kt(!1),or=Qt;function Ar(e,t){var r=e.type.contextTypes;if(!r)return Qt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(e){return e=e.childContextTypes,e!=null}function As(){ce(He),ce(Re)}function Ha(e,t,r){if(Re.current!==Qt)throw Error(R(168));le(Re,t),le(He,r)}function Ou(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(R(108,Bf(e)||"Unknown",s));return he({},r,n)}function _s(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qt,or=Re.current,le(Re,e),le(He,He.current),!0}function Ua(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=Ou(e,t,or),n.__reactInternalMemoizedMergedChildContext=e,ce(He),ce(Re),le(Re,e)):ce(He),le(He,r)}var bt=null,dl=!1,ql=!1;function Bu(e){bt===null?bt=[e]:bt.push(e)}function sp(e){dl=!0,Bu(e)}function Zt(){if(!ql&&bt!==null){ql=!0;var e=0,t=re;try{var r=bt;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}bt=null,dl=!1}catch(s){throw bt!==null&&(bt=bt.slice(e+1)),fu(mo,Zt),s}finally{re=t,ql=!1}}return null}var Nr=[],Cr=0,Os=null,Bs=0,et=[],tt=0,ar=null,jt=1,St="";function er(e,t){Nr[Cr++]=Bs,Nr[Cr++]=Os,Os=e,Bs=t}function Hu(e,t,r){et[tt++]=jt,et[tt++]=St,et[tt++]=ar,ar=e;var n=jt;e=St;var s=32-ut(n)-1;n&=~(1<<s),r+=1;var i=32-ut(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,jt=1<<32-ut(t)+s|r<<s|n,St=i+e}else jt=1<<i|r<<s|n,St=e}function bo(e){e.return!==null&&(er(e,1),Hu(e,1,0))}function jo(e){for(;e===Os;)Os=Nr[--Cr],Nr[Cr]=null,Bs=Nr[--Cr],Nr[Cr]=null;for(;e===ar;)ar=et[--tt],et[tt]=null,St=et[--tt],et[tt]=null,jt=et[--tt],et[tt]=null}var Ge=null,Ye=null,fe=!1,ct=null;function Uu(e,t){var r=rt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wa(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ge=e,Ye=Ut(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ge=e,Ye=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ar!==null?{id:jt,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=rt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ge=e,Ye=null,!0):!1;default:return!1}}function Di(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ri(e){if(fe){var t=Ye;if(t){var r=t;if(!Wa(e,t)){if(Di(e))throw Error(R(418));t=Ut(r.nextSibling);var n=Ge;t&&Wa(e,t)?Uu(n,r):(e.flags=e.flags&-4097|2,fe=!1,Ge=e)}}else{if(Di(e))throw Error(R(418));e.flags=e.flags&-4097|2,fe=!1,Ge=e}}}function Va(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ge=e}function as(e){if(e!==Ge)return!1;if(!fe)return Va(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ti(e.type,e.memoizedProps)),t&&(t=Ye)){if(Di(e))throw Wu(),Error(R(418));for(;t;)Uu(e,t),t=Ut(t.nextSibling)}if(Va(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ye=Ut(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ye=null}}else Ye=Ge?Ut(e.stateNode.nextSibling):null;return!0}function Wu(){for(var e=Ye;e;)e=Ut(e.nextSibling)}function _r(){Ye=Ge=null,fe=!1}function So(e){ct===null?ct=[e]:ct.push(e)}var lp=Pt.ReactCurrentBatchConfig;function tn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function cs(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){var t=e._init;return t(e._payload)}function Vu(e){function t(m,u){if(e){var f=m.deletions;f===null?(m.deletions=[u],m.flags|=16):f.push(u)}}function r(m,u){if(!e)return null;for(;u!==null;)t(m,u),u=u.sibling;return null}function n(m,u){for(m=new Map;u!==null;)u.key!==null?m.set(u.key,u):m.set(u.index,u),u=u.sibling;return m}function s(m,u){return m=Yt(m,u),m.index=0,m.sibling=null,m}function i(m,u,f){return m.index=f,e?(f=m.alternate,f!==null?(f=f.index,f<u?(m.flags|=2,u):f):(m.flags|=2,u)):(m.flags|=1048576,u)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,u,f,y){return u===null||u.tag!==6?(u=Jl(f,m.mode,y),u.return=m,u):(u=s(u,f),u.return=m,u)}function c(m,u,f,y){var L=f.type;return L===vr?p(m,u,f.props.children,y,f.key):u!==null&&(u.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Lt&&qa(L)===u.type)?(y=s(u,f.props),y.ref=tn(m,u,f),y.return=m,y):(y=Ms(f.type,f.key,f.props,null,m.mode,y),y.ref=tn(m,u,f),y.return=m,y)}function d(m,u,f,y){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=ei(f,m.mode,y),u.return=m,u):(u=s(u,f.children||[]),u.return=m,u)}function p(m,u,f,y,L){return u===null||u.tag!==7?(u=ir(f,m.mode,y,L),u.return=m,u):(u=s(u,f),u.return=m,u)}function g(m,u,f){if(typeof u=="string"&&u!==""||typeof u=="number")return u=Jl(""+u,m.mode,f),u.return=m,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Zn:return f=Ms(u.type,u.key,u.props,null,m.mode,f),f.ref=tn(m,null,u),f.return=m,f;case xr:return u=ei(u,m.mode,f),u.return=m,u;case Lt:var y=u._init;return g(m,y(u._payload),f)}if(on(u)||Xr(u))return u=ir(u,m.mode,f,null),u.return=m,u;cs(m,u)}return null}function h(m,u,f,y){var L=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return L!==null?null:a(m,u,""+f,y);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Zn:return f.key===L?c(m,u,f,y):null;case xr:return f.key===L?d(m,u,f,y):null;case Lt:return L=f._init,h(m,u,L(f._payload),y)}if(on(f)||Xr(f))return L!==null?null:p(m,u,f,y,null);cs(m,f)}return null}function w(m,u,f,y,L){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(f)||null,a(u,m,""+y,L);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zn:return m=m.get(y.key===null?f:y.key)||null,c(u,m,y,L);case xr:return m=m.get(y.key===null?f:y.key)||null,d(u,m,y,L);case Lt:var S=y._init;return w(m,u,f,S(y._payload),L)}if(on(y)||Xr(y))return m=m.get(f)||null,p(u,m,y,L,null);cs(u,y)}return null}function k(m,u,f,y){for(var L=null,S=null,v=u,M=u=0,z=null;v!==null&&M<f.length;M++){v.index>M?(z=v,v=null):z=v.sibling;var H=h(m,v,f[M],y);if(H===null){v===null&&(v=z);break}e&&v&&H.alternate===null&&t(m,v),u=i(H,u,M),S===null?L=H:S.sibling=H,S=H,v=z}if(M===f.length)return r(m,v),fe&&er(m,M),L;if(v===null){for(;M<f.length;M++)v=g(m,f[M],y),v!==null&&(u=i(v,u,M),S===null?L=v:S.sibling=v,S=v);return fe&&er(m,M),L}for(v=n(m,v);M<f.length;M++)z=w(v,m,M,f[M],y),z!==null&&(e&&z.alternate!==null&&v.delete(z.key===null?M:z.key),u=i(z,u,M),S===null?L=z:S.sibling=z,S=z);return e&&v.forEach(function(D){return t(m,D)}),fe&&er(m,M),L}function b(m,u,f,y){var L=Xr(f);if(typeof L!="function")throw Error(R(150));if(f=L.call(f),f==null)throw Error(R(151));for(var S=L=null,v=u,M=u=0,z=null,H=f.next();v!==null&&!H.done;M++,H=f.next()){v.index>M?(z=v,v=null):z=v.sibling;var D=h(m,v,H.value,y);if(D===null){v===null&&(v=z);break}e&&v&&D.alternate===null&&t(m,v),u=i(D,u,M),S===null?L=D:S.sibling=D,S=D,v=z}if(H.done)return r(m,v),fe&&er(m,M),L;if(v===null){for(;!H.done;M++,H=f.next())H=g(m,H.value,y),H!==null&&(u=i(H,u,M),S===null?L=H:S.sibling=H,S=H);return fe&&er(m,M),L}for(v=n(m,v);!H.done;M++,H=f.next())H=w(v,m,M,H.value,y),H!==null&&(e&&H.alternate!==null&&v.delete(H.key===null?M:H.key),u=i(H,u,M),S===null?L=H:S.sibling=H,S=H);return e&&v.forEach(function(G){return t(m,G)}),fe&&er(m,M),L}function T(m,u,f,y){if(typeof f=="object"&&f!==null&&f.type===vr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Zn:e:{for(var L=f.key,S=u;S!==null;){if(S.key===L){if(L=f.type,L===vr){if(S.tag===7){r(m,S.sibling),u=s(S,f.props.children),u.return=m,m=u;break e}}else if(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Lt&&qa(L)===S.type){r(m,S.sibling),u=s(S,f.props),u.ref=tn(m,S,f),u.return=m,m=u;break e}r(m,S);break}else t(m,S);S=S.sibling}f.type===vr?(u=ir(f.props.children,m.mode,y,f.key),u.return=m,m=u):(y=Ms(f.type,f.key,f.props,null,m.mode,y),y.ref=tn(m,u,f),y.return=m,m=y)}return o(m);case xr:e:{for(S=f.key;u!==null;){if(u.key===S)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){r(m,u.sibling),u=s(u,f.children||[]),u.return=m,m=u;break e}else{r(m,u);break}else t(m,u);u=u.sibling}u=ei(f,m.mode,y),u.return=m,m=u}return o(m);case Lt:return S=f._init,T(m,u,S(f._payload),y)}if(on(f))return k(m,u,f,y);if(Xr(f))return b(m,u,f,y);cs(m,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,u!==null&&u.tag===6?(r(m,u.sibling),u=s(u,f),u.return=m,m=u):(r(m,u),u=Jl(f,m.mode,y),u.return=m,m=u),o(m)):r(m,u)}return T}var Or=Vu(!0),qu=Vu(!1),Hs=Kt(null),Us=null,Mr=null,No=null;function Co(){No=Mr=Us=null}function Mo(e){var t=Hs.current;ce(Hs),e._currentValue=t}function Ii(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ir(e,t){Us=e,No=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(No!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(Us===null)throw Error(R(308));Mr=e,Us.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var nr=null;function Eo(e){nr===null?nr=[e]:nr.push(e)}function Yu(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Eo(t)):(r.next=s.next,s.next=r),t.interleaved=r,Et(e,n)}function Et(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Dt=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Et(e,r)}return s=n.interleaved,s===null?(t.next=t,Eo(n)):(t.next=s.next,s.next=t),n.interleaved=t,Et(e,r)}function ws(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,po(e,r)}}function Ya(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ws(e,t,r,n){var s=e.updateQueue;Dt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,p=d=c=null,a=i;do{var h=a.lane,w=a.eventTime;if((n&h)===h){p!==null&&(p=p.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,b=a;switch(h=t,w=r,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(w,g,h);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,h=typeof k=="function"?k.call(w,g,h):k,h==null)break e;g=he({},g,h);break e;case 2:Dt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else w={eventTime:w,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=w,c=g):p=p.next=w,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ur|=o,e.lanes=o,e.memoizedState=g}}function Ga(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(R(191,s));s.call(n)}}}var Yn={},vt=Kt(Yn),Fn=Kt(Yn),Ln=Kt(Yn);function sr(e){if(e===Yn)throw Error(R(174));return e}function Po(e,t){switch(le(Ln,t),le(Fn,e),le(vt,Yn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hi(t,e)}ce(vt),le(vt,t)}function Br(){ce(vt),ce(Fn),ce(Ln)}function Qu(e){sr(Ln.current);var t=sr(vt.current),r=hi(t,e.type);t!==r&&(le(Fn,e),le(vt,r))}function Fo(e){Fn.current===e&&(ce(vt),ce(Fn))}var me=Kt(0);function Vs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yl=[];function Lo(){for(var e=0;e<Yl.length;e++)Yl[e]._workInProgressVersionPrimary=null;Yl.length=0}var bs=Pt.ReactCurrentDispatcher,Gl=Pt.ReactCurrentBatchConfig,cr=0,pe=null,be=null,Ne=null,qs=!1,hn=!1,Dn=0,ip=0;function Fe(){throw Error(R(321))}function Do(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ft(e[r],t[r]))return!1;return!0}function Ro(e,t,r,n,s,i){if(cr=i,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bs.current=e===null||e.memoizedState===null?up:dp,e=r(n,s),hn){i=0;do{if(hn=!1,Dn=0,25<=i)throw Error(R(301));i+=1,Ne=be=null,t.updateQueue=null,bs.current=fp,e=r(n,s)}while(hn)}if(bs.current=Ys,t=be!==null&&be.next!==null,cr=0,Ne=be=pe=null,qs=!1,t)throw Error(R(300));return e}function Io(){var e=Dn!==0;return Dn=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?pe.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function lt(){if(be===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Ne===null?pe.memoizedState:Ne.next;if(t!==null)Ne=t,be=e;else{if(e===null)throw Error(R(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ne===null?pe.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Rn(e,t){return typeof t=="function"?t(e):t}function Ql(e){var t=lt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=be,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,c=null,d=i;do{var p=d.lane;if((cr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=g,o=n):c=c.next=g,pe.lanes|=p,ur|=p}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=a,ft(n,t.memoizedState)||(Be=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,pe.lanes|=i,ur|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Xl(e){var t=lt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ft(i,t.memoizedState)||(Be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Xu(){}function Ku(e,t){var r=pe,n=lt(),s=t(),i=!ft(n.memoizedState,s);if(i&&(n.memoizedState=s,Be=!0),n=n.queue,$o(ed.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ne!==null&&Ne.memoizedState.tag&1){if(r.flags|=2048,In(9,Ju.bind(null,r,n,s,t),void 0,null),Ce===null)throw Error(R(349));cr&30||Zu(r,t,s)}return s}function Zu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ju(e,t,r,n){t.value=r,t.getSnapshot=n,td(t)&&rd(e)}function ed(e,t,r){return r(function(){td(t)&&rd(e)})}function td(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ft(e,r)}catch{return!0}}function rd(e){var t=Et(e,1);t!==null&&dt(t,e,1,-1)}function Qa(e){var t=gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t.queue=e,e=e.dispatch=cp.bind(null,pe,e),[t.memoizedState,e]}function In(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function nd(){return lt().memoizedState}function js(e,t,r,n){var s=gt();pe.flags|=e,s.memoizedState=In(1|t,r,void 0,n===void 0?null:n)}function fl(e,t,r,n){var s=lt();n=n===void 0?null:n;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,n!==null&&Do(n,o.deps)){s.memoizedState=In(t,r,i,n);return}}pe.flags|=e,s.memoizedState=In(1|t,r,i,n)}function Xa(e,t){return js(8390656,8,e,t)}function $o(e,t){return fl(2048,8,e,t)}function sd(e,t){return fl(4,2,e,t)}function ld(e,t){return fl(4,4,e,t)}function id(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function od(e,t,r){return r=r!=null?r.concat([e]):null,fl(4,4,id.bind(null,t,e),r)}function zo(){}function ad(e,t){var r=lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Do(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function cd(e,t){var r=lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Do(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ud(e,t,r){return cr&21?(ft(r,t)||(r=hu(),pe.lanes|=r,ur|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=r)}function op(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=Gl.transition;Gl.transition={};try{e(!1),t()}finally{re=r,Gl.transition=n}}function dd(){return lt().memoizedState}function ap(e,t,r){var n=qt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fd(e))md(t,r);else if(r=Yu(e,t,r,n),r!==null){var s=ze();dt(r,e,n,s),pd(r,t,n)}}function cp(e,t,r){var n=qt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fd(e))md(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,ft(a,o)){var c=t.interleaved;c===null?(s.next=s,Eo(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Yu(e,t,s,n),r!==null&&(s=ze(),dt(r,e,n,s),pd(r,t,n))}}function fd(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function md(e,t){hn=qs=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function pd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,po(e,r)}}var Ys={readContext:st,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},up={readContext:st,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Xa,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,js(4194308,4,id.bind(null,t,e),r)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var r=gt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ap.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:Qa,useDebugValue:zo,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=Qa(!1),t=e[0];return e=op.bind(null,e[1]),gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=pe,s=gt();if(fe){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),Ce===null)throw Error(R(349));cr&30||Zu(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Xa(ed.bind(null,n,i,e),[e]),n.flags|=2048,In(9,Ju.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=gt(),t=Ce.identifierPrefix;if(fe){var r=St,n=jt;r=(n&~(1<<32-ut(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Dn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ip++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dp={readContext:st,useCallback:ad,useContext:st,useEffect:$o,useImperativeHandle:od,useInsertionEffect:sd,useLayoutEffect:ld,useMemo:cd,useReducer:Ql,useRef:nd,useState:function(){return Ql(Rn)},useDebugValue:zo,useDeferredValue:function(e){var t=lt();return ud(t,be.memoizedState,e)},useTransition:function(){var e=Ql(Rn)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Ku,useId:dd,unstable_isNewReconciler:!1},fp={readContext:st,useCallback:ad,useContext:st,useEffect:$o,useImperativeHandle:od,useInsertionEffect:sd,useLayoutEffect:ld,useMemo:cd,useReducer:Xl,useRef:nd,useState:function(){return Xl(Rn)},useDebugValue:zo,useDeferredValue:function(e){var t=lt();return be===null?t.memoizedState=e:ud(t,be.memoizedState,e)},useTransition:function(){var e=Xl(Rn)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Ku,useId:dd,unstable_isNewReconciler:!1};function ot(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $i(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:he({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ml={isMounted:function(e){return(e=e._reactInternals)?pr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ze(),s=qt(e),i=Nt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(dt(t,e,s,n),ws(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ze(),s=qt(e),i=Nt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(dt(t,e,s,n),ws(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ze(),n=qt(e),s=Nt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Wt(e,s,n),t!==null&&(dt(t,e,n,r),ws(t,e,n))}};function Ka(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Mn(r,n)||!Mn(s,i):!0}function hd(e,t,r){var n=!1,s=Qt,i=t.contextType;return typeof i=="object"&&i!==null?i=st(i):(s=Ue(t)?or:Re.current,n=t.contextTypes,i=(n=n!=null)?Ar(e,s):Qt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Za(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function zi(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},To(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=st(i):(i=Ue(t)?or:Re.current,s.context=Ar(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&($i(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ml.enqueueReplaceState(s,s.state,null),Ws(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var r="",n=t;do r+=Of(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Kl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ai(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mp=typeof WeakMap=="function"?WeakMap:Map;function gd(e,t,r){r=Nt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qs||(Qs=!0,Gi=n),Ai(e,t)},r}function yd(e,t,r){r=Nt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ai(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ai(e,t),typeof n!="function"&&(Vt===null?Vt=new Set([this]):Vt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ja(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new mp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Mp.bind(null,e,t,r),t.then(e,e))}function ec(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Nt(-1,1),t.tag=2,Wt(r,t,1))),r.lanes|=1),e)}var pp=Pt.ReactCurrentOwner,Be=!1;function $e(e,t,r,n){t.child=e===null?qu(t,null,r,n):Or(t,e.child,r,n)}function rc(e,t,r,n,s){r=r.render;var i=t.ref;return Ir(t,s),n=Ro(e,t,r,n,i,s),r=Io(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tt(e,t,s)):(fe&&r&&bo(t),t.flags|=1,$e(e,t,n,s),t.child)}function nc(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Vo(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,xd(e,t,i,n,s)):(e=Ms(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Mn,r(o,n)&&e.ref===t.ref)return Tt(e,t,s)}return t.flags|=1,e=Yt(i,n),e.ref=t.ref,e.return=t,t.child=e}function xd(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Mn(i,n)&&e.ref===t.ref)if(Be=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,Tt(e,t,s)}return _i(e,t,r,n,s)}function vd(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Tr,qe),qe|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(Tr,qe),qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,le(Tr,qe),qe|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,le(Tr,qe),qe|=n;return $e(e,t,s,r),t.child}function kd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _i(e,t,r,n,s){var i=Ue(r)?or:Re.current;return i=Ar(t,i),Ir(t,s),r=Ro(e,t,r,n,i,s),n=Io(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tt(e,t,s)):(fe&&n&&bo(t),t.flags|=1,$e(e,t,r,s),t.child)}function sc(e,t,r,n,s){if(Ue(r)){var i=!0;_s(t)}else i=!1;if(Ir(t,s),t.stateNode===null)Ss(e,t),hd(t,r,n),zi(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Ue(r)?or:Re.current,d=Ar(t,d));var p=r.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==d)&&Za(t,o,n,d),Dt=!1;var h=t.memoizedState;o.state=h,Ws(t,n,o,s),c=t.memoizedState,a!==n||h!==c||He.current||Dt?(typeof p=="function"&&($i(t,r,p,n),c=t.memoizedState),(a=Dt||Ka(t,r,a,n,h,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Gu(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:ot(t.type,a),o.props=d,g=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Ue(r)?or:Re.current,c=Ar(t,c));var w=r.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||h!==c)&&Za(t,o,n,c),Dt=!1,h=t.memoizedState,o.state=h,Ws(t,n,o,s);var k=t.memoizedState;a!==g||h!==k||He.current||Dt?(typeof w=="function"&&($i(t,r,w,n),k=t.memoizedState),(d=Dt||Ka(t,r,d,n,h,k,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,k,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),o.props=n,o.state=k,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Oi(e,t,r,n,i,s)}function Oi(e,t,r,n,s,i){kd(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Ua(t,r,!1),Tt(e,t,i);n=t.stateNode,pp.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Or(t,e.child,null,i),t.child=Or(t,null,a,i)):$e(e,t,a,i),t.memoizedState=n.state,s&&Ua(t,r,!0),t.child}function wd(e){var t=e.stateNode;t.pendingContext?Ha(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ha(e,t.context,!1),Po(e,t.containerInfo)}function lc(e,t,r,n,s){return _r(),So(s),t.flags|=256,$e(e,t,r,n),t.child}var Bi={dehydrated:null,treeContext:null,retryLane:0};function Hi(e){return{baseLanes:e,cachePool:null,transitions:null}}function bd(e,t,r){var n=t.pendingProps,s=me.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),le(me,s&1),e===null)return Ri(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gl(o,n,0,null),e=ir(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Hi(r),t.memoizedState=Bi,e):Ao(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return hp(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Yt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yt(a,i):(i=ir(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Hi(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Bi,n}return i=e.child,e=i.sibling,n=Yt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ao(e,t){return t=gl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function us(e,t,r,n){return n!==null&&So(n),Or(t,e.child,null,r),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hp(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Kl(Error(R(422))),us(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=gl({mode:"visible",children:n.children},s,0,null),i=ir(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Or(t,e.child,null,o),t.child.memoizedState=Hi(o),t.memoizedState=Bi,i);if(!(t.mode&1))return us(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(R(419)),n=Kl(i,n,void 0),us(e,t,o,n)}if(a=(o&e.childLanes)!==0,Be||a){if(n=Ce,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Et(e,s),dt(n,e,s,-1))}return Wo(),n=Kl(Error(R(421))),us(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ep.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ye=Ut(s.nextSibling),Ge=t,fe=!0,ct=null,e!==null&&(et[tt++]=jt,et[tt++]=St,et[tt++]=ar,jt=e.id,St=e.overflow,ar=t),t=Ao(t,n.children),t.flags|=4096,t)}function ic(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ii(e.return,t,r)}function Zl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function jd(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if($e(e,t,n.children,r),n=me.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ic(e,r,t);else if(e.tag===19)ic(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(le(me,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Vs(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Zl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Vs(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Zl(t,!0,r,null,i);break;case"together":Zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ss(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ur|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=Yt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gp(e,t,r){switch(t.tag){case 3:wd(t),_r();break;case 5:Qu(t);break;case 1:Ue(t.type)&&_s(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;le(Hs,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(le(me,me.current&1),t.flags|=128,null):r&t.child.childLanes?bd(e,t,r):(le(me,me.current&1),e=Tt(e,t,r),e!==null?e.sibling:null);le(me,me.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return jd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(me,me.current),n)break;return null;case 22:case 23:return t.lanes=0,vd(e,t,r)}return Tt(e,t,r)}var Sd,Ui,Nd,Cd;Sd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ui=function(){};Nd=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,sr(vt.current);var i=null;switch(r){case"input":s=di(e,s),n=di(e,n),i=[];break;case"select":s=he({},s,{value:void 0}),n=he({},n,{value:void 0}),i=[];break;case"textarea":s=pi(e,s),n=pi(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=zs)}gi(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(kn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(a=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(kn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ae("scroll",e),i||a===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Cd=function(e,t,r,n){r!==n&&(t.flags|=4)};function rn(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function yp(e,t,r){var n=t.pendingProps;switch(jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Ue(t.type)&&As(),Le(t),null;case 3:return n=t.stateNode,Br(),ce(He),ce(Re),Lo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(as(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(Ki(ct),ct=null))),Ui(e,t),Le(t),null;case 5:Fo(t);var s=sr(Ln.current);if(r=t.type,e!==null&&t.stateNode!=null)Nd(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return Le(t),null}if(e=sr(vt.current),as(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[yt]=t,n[Pn]=i,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",n),ae("close",n);break;case"iframe":case"object":case"embed":ae("load",n);break;case"video":case"audio":for(s=0;s<cn.length;s++)ae(cn[s],n);break;case"source":ae("error",n);break;case"img":case"image":case"link":ae("error",n),ae("load",n);break;case"details":ae("toggle",n);break;case"input":ha(n,i),ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ae("invalid",n);break;case"textarea":ya(n,i),ae("invalid",n)}gi(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&os(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&os(n.textContent,a,e),s=["children",""+a]):kn.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ae("scroll",n)}switch(r){case"input":Jn(n),ga(n,i,!0);break;case"textarea":Jn(n),xa(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=zs)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[yt]=t,e[Pn]=n,Sd(e,t,!1,!1),t.stateNode=e;e:{switch(o=yi(r,n),r){case"dialog":ae("cancel",e),ae("close",e),s=n;break;case"iframe":case"object":case"embed":ae("load",e),s=n;break;case"video":case"audio":for(s=0;s<cn.length;s++)ae(cn[s],e);s=n;break;case"source":ae("error",e),s=n;break;case"img":case"image":case"link":ae("error",e),ae("load",e),s=n;break;case"details":ae("toggle",e),s=n;break;case"input":ha(e,n),s=di(e,n),ae("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=he({},n,{value:void 0}),ae("invalid",e);break;case"textarea":ya(e,n),s=pi(e,n),ae("invalid",e);break;default:s=n}gi(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?nu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tu(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wn(e,c):typeof c=="number"&&wn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ae("scroll",e):c!=null&&oo(e,i,c,o))}switch(r){case"input":Jn(e),ga(e,n,!1);break;case"textarea":Jn(e),xa(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=zs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Le(t),null;case 6:if(e&&t.stateNode!=null)Cd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=sr(Ln.current),sr(vt.current),as(t)){if(n=t.stateNode,r=t.memoizedProps,n[yt]=t,(i=n.nodeValue!==r)&&(e=Ge,e!==null))switch(e.tag){case 3:os(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&os(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yt]=t,t.stateNode=n}return Le(t),null;case 13:if(ce(me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&Ye!==null&&t.mode&1&&!(t.flags&128))Wu(),_r(),t.flags|=98560,i=!1;else if(i=as(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[yt]=t}else _r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Le(t),i=!1}else ct!==null&&(Ki(ct),ct=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?je===0&&(je=3):Wo())),t.updateQueue!==null&&(t.flags|=4),Le(t),null);case 4:return Br(),Ui(e,t),e===null&&En(t.stateNode.containerInfo),Le(t),null;case 10:return Mo(t.type._context),Le(t),null;case 17:return Ue(t.type)&&As(),Le(t),null;case 19:if(ce(me),i=t.memoizedState,i===null)return Le(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)rn(i,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vs(e),o!==null){for(t.flags|=128,rn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return le(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&xe()>Ur&&(t.flags|=128,n=!0,rn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vs(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),rn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Le(t),null}else 2*xe()-i.renderingStartTime>Ur&&r!==1073741824&&(t.flags|=128,n=!0,rn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xe(),t.sibling=null,r=me.current,le(me,n?r&1|2:r&1),t):(Le(t),null);case 22:case 23:return Uo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?qe&1073741824&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function xp(e,t){switch(jo(t),t.tag){case 1:return Ue(t.type)&&As(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Br(),ce(He),ce(Re),Lo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fo(t),null;case 13:if(ce(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));_r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(me),null;case 4:return Br(),null;case 10:return Mo(t.type._context),null;case 22:case 23:return Uo(),null;case 24:return null;default:return null}}var ds=!1,De=!1,vp=typeof WeakSet=="function"?WeakSet:Set,O=null;function Er(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ge(e,t,n)}else r.current=null}function Wi(e,t,r){try{r()}catch(n){ge(e,t,n)}}var oc=!1;function kp(e,t){if(Mi=Rs,e=Fu(),wo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,d=0,p=0,g=e,h=null;t:for(;;){for(var w;g!==r||s!==0&&g.nodeType!==3||(a=o+s),g!==i||n!==0&&g.nodeType!==3||(c=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(w=g.firstChild)!==null;)h=g,g=w;for(;;){if(g===e)break t;if(h===r&&++d===s&&(a=o),h===i&&++p===n&&(c=o),(w=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=w}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ei={focusedElem:e,selectionRange:r},Rs=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,T=k.memoizedState,m=t.stateNode,u=m.getSnapshotBeforeUpdate(t.elementType===t.type?b:ot(t.type,b),T);m.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(y){ge(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return k=oc,oc=!1,k}function gn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wi(t,r,i)}s=s.next}while(s!==n)}}function pl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Vi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Md(e){var t=e.alternate;t!==null&&(e.alternate=null,Md(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yt],delete t[Pn],delete t[Fi],delete t[rp],delete t[np])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ed(e){return e.tag===5||e.tag===3||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=zs));else if(n!==4&&(e=e.child,e!==null))for(qi(e,t,r),e=e.sibling;e!==null;)qi(e,t,r),e=e.sibling}function Yi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Yi(e,t,r),e=e.sibling;e!==null;)Yi(e,t,r),e=e.sibling}var Me=null,at=!1;function Ft(e,t,r){for(r=r.child;r!==null;)Td(e,t,r),r=r.sibling}function Td(e,t,r){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(il,r)}catch{}switch(r.tag){case 5:De||Er(r,t);case 6:var n=Me,s=at;Me=null,Ft(e,t,r),Me=n,at=s,Me!==null&&(at?(e=Me,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Me.removeChild(r.stateNode));break;case 18:Me!==null&&(at?(e=Me,r=r.stateNode,e.nodeType===8?Vl(e.parentNode,r):e.nodeType===1&&Vl(e,r),Nn(e)):Vl(Me,r.stateNode));break;case 4:n=Me,s=at,Me=r.stateNode.containerInfo,at=!0,Ft(e,t,r),Me=n,at=s;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wi(r,t,o),s=s.next}while(s!==n)}Ft(e,t,r);break;case 1:if(!De&&(Er(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ge(r,t,a)}Ft(e,t,r);break;case 21:Ft(e,t,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,Ft(e,t,r),De=n):Ft(e,t,r);break;default:Ft(e,t,r)}}function cc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vp),t.forEach(function(n){var s=Tp.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function it(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Me=a.stateNode,at=!1;break e;case 3:Me=a.stateNode.containerInfo,at=!0;break e;case 4:Me=a.stateNode.containerInfo,at=!0;break e}a=a.return}if(Me===null)throw Error(R(160));Td(i,o,s),Me=null,at=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ge(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pd(t,e),t=t.sibling}function Pd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(it(t,e),ht(e),n&4){try{gn(3,e,e.return),pl(3,e)}catch(b){ge(e,e.return,b)}try{gn(5,e,e.return)}catch(b){ge(e,e.return,b)}}break;case 1:it(t,e),ht(e),n&512&&r!==null&&Er(r,r.return);break;case 5:if(it(t,e),ht(e),n&512&&r!==null&&Er(r,r.return),e.flags&32){var s=e.stateNode;try{wn(s,"")}catch(b){ge(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Zc(s,i),yi(a,o);var d=yi(a,i);for(o=0;o<c.length;o+=2){var p=c[o],g=c[o+1];p==="style"?nu(s,g):p==="dangerouslySetInnerHTML"?tu(s,g):p==="children"?wn(s,g):oo(s,p,g,d)}switch(a){case"input":fi(s,i);break;case"textarea":Jc(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Fr(s,!!i.multiple,w,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fr(s,!!i.multiple,i.defaultValue,!0):Fr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pn]=i}catch(b){ge(e,e.return,b)}}break;case 6:if(it(t,e),ht(e),n&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){ge(e,e.return,b)}}break;case 3:if(it(t,e),ht(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Nn(t.containerInfo)}catch(b){ge(e,e.return,b)}break;case 4:it(t,e),ht(e);break;case 13:it(t,e),ht(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bo=xe())),n&4&&cc(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(De=(d=De)||p,it(t,e),De=d):it(t,e),ht(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(O=e,p=e.child;p!==null;){for(g=O=p;O!==null;){switch(h=O,w=h.child,h.tag){case 0:case 11:case 14:case 15:gn(4,h,h.return);break;case 1:Er(h,h.return);var k=h.stateNode;if(typeof k.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(b){ge(n,r,b)}}break;case 5:Er(h,h.return);break;case 22:if(h.memoizedState!==null){dc(g);continue}}w!==null?(w.return=h,O=w):dc(g)}p=p.sibling}e:for(p=null,g=e;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ru("display",o))}catch(b){ge(e,e.return,b)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(b){ge(e,e.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:it(t,e),ht(e),n&4&&cc(e);break;case 21:break;default:it(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ed(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(wn(s,""),n.flags&=-33);var i=ac(e);Yi(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=ac(e);qi(e,a,o);break;default:throw Error(R(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wp(e,t,r){O=e,Fd(e)}function Fd(e,t,r){for(var n=(e.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ds;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||De;a=ds;var d=De;if(ds=o,(De=c)&&!d)for(O=s;O!==null;)o=O,c=o.child,o.tag===22&&o.memoizedState!==null?fc(s):c!==null?(c.return=o,O=c):fc(s);for(;i!==null;)O=i,Fd(i),i=i.sibling;O=s,ds=a,De=d}uc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):uc(e)}}function uc(e){for(;O!==null;){var t=O;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||pl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!De)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ot(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ga(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ga(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Nn(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}De||t.flags&512&&Vi(t)}catch(h){ge(t,t.return,h)}}if(t===e){O=null;break}if(r=t.sibling,r!==null){r.return=t.return,O=r;break}O=t.return}}function dc(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var r=t.sibling;if(r!==null){r.return=t.return,O=r;break}O=t.return}}function fc(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pl(4,t)}catch(c){ge(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ge(t,s,c)}}var i=t.return;try{Vi(t)}catch(c){ge(t,i,c)}break;case 5:var o=t.return;try{Vi(t)}catch(c){ge(t,o,c)}}}catch(c){ge(t,t.return,c)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var bp=Math.ceil,Gs=Pt.ReactCurrentDispatcher,_o=Pt.ReactCurrentOwner,nt=Pt.ReactCurrentBatchConfig,J=0,Ce=null,we=null,Ee=0,qe=0,Tr=Kt(0),je=0,$n=null,ur=0,hl=0,Oo=0,yn=null,Oe=null,Bo=0,Ur=1/0,wt=null,Qs=!1,Gi=null,Vt=null,fs=!1,_t=null,Xs=0,xn=0,Qi=null,Ns=-1,Cs=0;function ze(){return J&6?xe():Ns!==-1?Ns:Ns=xe()}function qt(e){return e.mode&1?J&2&&Ee!==0?Ee&-Ee:lp.transition!==null?(Cs===0&&(Cs=hu()),Cs):(e=re,e!==0||(e=window.event,e=e===void 0?16:bu(e.type)),e):1}function dt(e,t,r,n){if(50<xn)throw xn=0,Qi=null,Error(R(185));Wn(e,r,n),(!(J&2)||e!==Ce)&&(e===Ce&&(!(J&2)&&(hl|=r),je===4&&$t(e,Ee)),We(e,n),r===1&&J===0&&!(t.mode&1)&&(Ur=xe()+500,dl&&Zt()))}function We(e,t){var r=e.callbackNode;lm(e,t);var n=Ds(e,e===Ce?Ee:0);if(n===0)r!==null&&wa(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wa(r),t===1)e.tag===0?sp(mc.bind(null,e)):Bu(mc.bind(null,e)),ep(function(){!(J&6)&&Zt()}),r=null;else{switch(gu(n)){case 1:r=mo;break;case 4:r=mu;break;case 16:r=Ls;break;case 536870912:r=pu;break;default:r=Ls}r=_d(r,Ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ld(e,t){if(Ns=-1,Cs=0,J&6)throw Error(R(327));var r=e.callbackNode;if($r()&&e.callbackNode!==r)return null;var n=Ds(e,e===Ce?Ee:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ks(e,n);else{t=n;var s=J;J|=2;var i=Rd();(Ce!==e||Ee!==t)&&(wt=null,Ur=xe()+500,lr(e,t));do try{Np();break}catch(a){Dd(e,a)}while(!0);Co(),Gs.current=i,J=s,we!==null?t=0:(Ce=null,Ee=0,t=je)}if(t!==0){if(t===2&&(s=bi(e),s!==0&&(n=s,t=Xi(e,s))),t===1)throw r=$n,lr(e,0),$t(e,n),We(e,xe()),r;if(t===6)$t(e,n);else{if(s=e.current.alternate,!(n&30)&&!jp(s)&&(t=Ks(e,n),t===2&&(i=bi(e),i!==0&&(n=i,t=Xi(e,i))),t===1))throw r=$n,lr(e,0),$t(e,n),We(e,xe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:tr(e,Oe,wt);break;case 3:if($t(e,n),(n&130023424)===n&&(t=Bo+500-xe(),10<t)){if(Ds(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ze(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pi(tr.bind(null,e,Oe,wt),t);break}tr(e,Oe,wt);break;case 4:if($t(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ut(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bp(n/1960))-n,10<n){e.timeoutHandle=Pi(tr.bind(null,e,Oe,wt),n);break}tr(e,Oe,wt);break;case 5:tr(e,Oe,wt);break;default:throw Error(R(329))}}}return We(e,xe()),e.callbackNode===r?Ld.bind(null,e):null}function Xi(e,t){var r=yn;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=Ks(e,t),e!==2&&(t=Oe,Oe=r,t!==null&&Ki(t)),e}function Ki(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function jp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ft(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $t(e,t){for(t&=~Oo,t&=~hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ut(t),n=1<<r;e[r]=-1,t&=~n}}function mc(e){if(J&6)throw Error(R(327));$r();var t=Ds(e,0);if(!(t&1))return We(e,xe()),null;var r=Ks(e,t);if(e.tag!==0&&r===2){var n=bi(e);n!==0&&(t=n,r=Xi(e,n))}if(r===1)throw r=$n,lr(e,0),$t(e,t),We(e,xe()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tr(e,Oe,wt),We(e,xe()),null}function Ho(e,t){var r=J;J|=1;try{return e(t)}finally{J=r,J===0&&(Ur=xe()+500,dl&&Zt())}}function dr(e){_t!==null&&_t.tag===0&&!(J&6)&&$r();var t=J;J|=1;var r=nt.transition,n=re;try{if(nt.transition=null,re=1,e)return e()}finally{re=n,nt.transition=r,J=t,!(J&6)&&Zt()}}function Uo(){qe=Tr.current,ce(Tr)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Jm(r)),we!==null)for(r=we.return;r!==null;){var n=r;switch(jo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&As();break;case 3:Br(),ce(He),ce(Re),Lo();break;case 5:Fo(n);break;case 4:Br();break;case 13:ce(me);break;case 19:ce(me);break;case 10:Mo(n.type._context);break;case 22:case 23:Uo()}r=r.return}if(Ce=e,we=e=Yt(e.current,null),Ee=qe=t,je=0,$n=null,Oo=hl=ur=0,Oe=yn=null,nr!==null){for(t=0;t<nr.length;t++)if(r=nr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}nr=null}return e}function Dd(e,t){do{var r=we;try{if(Co(),bs.current=Ys,qs){for(var n=pe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qs=!1}if(cr=0,Ne=be=pe=null,hn=!1,Dn=0,_o.current=null,r===null||r.return===null){je=1,$n=t,we=null;break}e:{var i=e,o=r.return,a=r,c=t;if(t=Ee,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=a,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=ec(o);if(w!==null){w.flags&=-257,tc(w,o,a,i,t),w.mode&1&&Ja(i,d,t),t=w,c=d;var k=t.updateQueue;if(k===null){var b=new Set;b.add(c),t.updateQueue=b}else k.add(c);break e}else{if(!(t&1)){Ja(i,d,t),Wo();break e}c=Error(R(426))}}else if(fe&&a.mode&1){var T=ec(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),tc(T,o,a,i,t),So(Hr(c,a));break e}}i=c=Hr(c,a),je!==4&&(je=2),yn===null?yn=[i]:yn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=gd(i,c,t);Ya(i,m);break e;case 1:a=c;var u=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof u.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Vt===null||!Vt.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=yd(i,a,t);Ya(i,y);break e}}i=i.return}while(i!==null)}$d(r)}catch(L){t=L,we===r&&r!==null&&(we=r=r.return);continue}break}while(!0)}function Rd(){var e=Gs.current;return Gs.current=Ys,e===null?Ys:e}function Wo(){(je===0||je===3||je===2)&&(je=4),Ce===null||!(ur&268435455)&&!(hl&268435455)||$t(Ce,Ee)}function Ks(e,t){var r=J;J|=2;var n=Rd();(Ce!==e||Ee!==t)&&(wt=null,lr(e,t));do try{Sp();break}catch(s){Dd(e,s)}while(!0);if(Co(),J=r,Gs.current=n,we!==null)throw Error(R(261));return Ce=null,Ee=0,je}function Sp(){for(;we!==null;)Id(we)}function Np(){for(;we!==null&&!Xf();)Id(we)}function Id(e){var t=Ad(e.alternate,e,qe);e.memoizedProps=e.pendingProps,t===null?$d(e):we=t,_o.current=null}function $d(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=xp(r,t),r!==null){r.flags&=32767,we=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,we=null;return}}else if(r=yp(r,t,qe),r!==null){we=r;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);je===0&&(je=5)}function tr(e,t,r){var n=re,s=nt.transition;try{nt.transition=null,re=1,Cp(e,t,r,n)}finally{nt.transition=s,re=n}return null}function Cp(e,t,r,n){do $r();while(_t!==null);if(J&6)throw Error(R(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(im(e,i),e===Ce&&(we=Ce=null,Ee=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fs||(fs=!0,_d(Ls,function(){return $r(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var o=re;re=1;var a=J;J|=4,_o.current=null,kp(e,r),Pd(r,e),qm(Ei),Rs=!!Mi,Ei=Mi=null,e.current=r,wp(r),Kf(),J=a,re=o,nt.transition=i}else e.current=r;if(fs&&(fs=!1,_t=e,Xs=s),i=e.pendingLanes,i===0&&(Vt=null),em(r.stateNode),We(e,xe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Qs)throw Qs=!1,e=Gi,Gi=null,e;return Xs&1&&e.tag!==0&&$r(),i=e.pendingLanes,i&1?e===Qi?xn++:(xn=0,Qi=e):xn=0,Zt(),null}function $r(){if(_t!==null){var e=gu(Xs),t=nt.transition,r=re;try{if(nt.transition=null,re=16>e?16:e,_t===null)var n=!1;else{if(e=_t,_t=null,Xs=0,J&6)throw Error(R(331));var s=J;for(J|=4,O=e.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(O=d;O!==null;){var p=O;switch(p.tag){case 0:case 11:case 15:gn(8,p,i)}var g=p.child;if(g!==null)g.return=p,O=g;else for(;O!==null;){p=O;var h=p.sibling,w=p.return;if(Md(p),p===d){O=null;break}if(h!==null){h.return=w,O=h;break}O=w}}}var k=i.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var T=b.sibling;b.sibling=null,b=T}while(b!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gn(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,O=m;break e}O=i.return}}var u=e.current;for(O=u;O!==null;){o=O;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,O=f;else e:for(o=u;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pl(9,a)}}catch(L){ge(a,a.return,L)}if(a===o){O=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,O=y;break e}O=a.return}}if(J=s,Zt(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(il,e)}catch{}n=!0}return n}finally{re=r,nt.transition=t}}return!1}function pc(e,t,r){t=Hr(r,t),t=gd(e,t,1),e=Wt(e,t,1),t=ze(),e!==null&&(Wn(e,1,t),We(e,t))}function ge(e,t,r){if(e.tag===3)pc(e,e,r);else for(;t!==null;){if(t.tag===3){pc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vt===null||!Vt.has(n))){e=Hr(r,e),e=yd(t,e,1),t=Wt(t,e,1),e=ze(),t!==null&&(Wn(t,1,e),We(t,e));break}}t=t.return}}function Mp(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ze(),e.pingedLanes|=e.suspendedLanes&r,Ce===e&&(Ee&r)===r&&(je===4||je===3&&(Ee&130023424)===Ee&&500>xe()-Bo?lr(e,0):Oo|=r),We(e,t)}function zd(e,t){t===0&&(e.mode&1?(t=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):t=1);var r=ze();e=Et(e,t),e!==null&&(Wn(e,t,r),We(e,r))}function Ep(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),zd(e,r)}function Tp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),zd(e,r)}var Ad;Ad=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||He.current)Be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Be=!1,gp(e,t,r);Be=!!(e.flags&131072)}else Be=!1,fe&&t.flags&1048576&&Hu(t,Bs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ss(e,t),e=t.pendingProps;var s=Ar(t,Re.current);Ir(t,r),s=Ro(null,t,n,e,s,r);var i=Io();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(n)?(i=!0,_s(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,To(t),s.updater=ml,t.stateNode=s,s._reactInternals=t,zi(t,n,e,r),t=Oi(null,t,n,!0,i,r)):(t.tag=0,fe&&i&&bo(t),$e(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ss(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Fp(n),e=ot(n,e),s){case 0:t=_i(null,t,n,e,r);break e;case 1:t=sc(null,t,n,e,r);break e;case 11:t=rc(null,t,n,e,r);break e;case 14:t=nc(null,t,n,ot(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ot(n,s),_i(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ot(n,s),sc(e,t,n,s,r);case 3:e:{if(wd(t),e===null)throw Error(R(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Gu(e,t),Ws(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Hr(Error(R(423)),t),t=lc(e,t,n,r,s);break e}else if(n!==s){s=Hr(Error(R(424)),t),t=lc(e,t,n,r,s);break e}else for(Ye=Ut(t.stateNode.containerInfo.firstChild),Ge=t,fe=!0,ct=null,r=qu(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_r(),n===s){t=Tt(e,t,r);break e}$e(e,t,n,r)}t=t.child}return t;case 5:return Qu(t),e===null&&Ri(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ti(n,s)?o=null:i!==null&&Ti(n,i)&&(t.flags|=32),kd(e,t),$e(e,t,o,r),t.child;case 6:return e===null&&Ri(t),null;case 13:return bd(e,t,r);case 4:return Po(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Or(t,null,n,r):$e(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ot(n,s),rc(e,t,n,s,r);case 7:return $e(e,t,t.pendingProps,r),t.child;case 8:return $e(e,t,t.pendingProps.children,r),t.child;case 12:return $e(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,le(Hs,n._currentValue),n._currentValue=o,i!==null)if(ft(i.value,o)){if(i.children===s.children&&!He.current){t=Tt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Nt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ii(i.return,r,t),a.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ii(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$e(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ir(t,r),s=st(s),n=n(s),t.flags|=1,$e(e,t,n,r),t.child;case 14:return n=t.type,s=ot(n,t.pendingProps),s=ot(n.type,s),nc(e,t,n,s,r);case 15:return xd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ot(n,s),Ss(e,t),t.tag=1,Ue(n)?(e=!0,_s(t)):e=!1,Ir(t,r),hd(t,n,s),zi(t,n,s,r),Oi(null,t,n,!0,e,r);case 19:return jd(e,t,r);case 22:return vd(e,t,r)}throw Error(R(156,t.tag))};function _d(e,t){return fu(e,t)}function Pp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rt(e,t,r,n){return new Pp(e,t,r,n)}function Vo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fp(e){if(typeof e=="function")return Vo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===co)return 11;if(e===uo)return 14}return 2}function Yt(e,t){var r=e.alternate;return r===null?(r=rt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ms(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Vo(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vr:return ir(r.children,s,i,t);case ao:o=8,s|=8;break;case oi:return e=rt(12,r,t,s|2),e.elementType=oi,e.lanes=i,e;case ai:return e=rt(13,r,t,s),e.elementType=ai,e.lanes=i,e;case ci:return e=rt(19,r,t,s),e.elementType=ci,e.lanes=i,e;case Qc:return gl(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yc:o=10;break e;case Gc:o=9;break e;case co:o=11;break e;case uo:o=14;break e;case Lt:o=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=rt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ir(e,t,r,n){return e=rt(7,e,n,t),e.lanes=r,e}function gl(e,t,r,n){return e=rt(22,e,n,t),e.elementType=Qc,e.lanes=r,e.stateNode={isHidden:!1},e}function Jl(e,t,r){return e=rt(6,e,null,t),e.lanes=r,e}function ei(e,t,r){return t=rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lp(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qo(e,t,r,n,s,i,o,a,c){return e=new Lp(e,t,r,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=rt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},To(i),e}function Dp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Od(e){if(!e)return Qt;e=e._reactInternals;e:{if(pr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(Ue(r))return Ou(e,r,t)}return t}function Bd(e,t,r,n,s,i,o,a,c){return e=qo(r,n,!0,e,s,i,o,a,c),e.context=Od(null),r=e.current,n=ze(),s=qt(r),i=Nt(n,s),i.callback=t??null,Wt(r,i,s),e.current.lanes=s,Wn(e,s,n),We(e,n),e}function yl(e,t,r,n){var s=t.current,i=ze(),o=qt(s);return r=Od(r),t.context===null?t.context=r:t.pendingContext=r,t=Nt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Wt(s,t,o),e!==null&&(dt(e,s,o,i),ws(e,s,o)),o}function Zs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Yo(e,t){hc(e,t),(e=e.alternate)&&hc(e,t)}function Rp(){return null}var Hd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Go(e){this._internalRoot=e}xl.prototype.render=Go.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));yl(e,t,null,null)};xl.prototype.unmount=Go.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){yl(null,e,null,null)}),t[Mt]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&t!==0&&t<It[r].priority;r++);It.splice(r,0,e),r===0&&wu(e)}};function Qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gc(){}function Ip(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Zs(o);i.call(d)}}var o=Bd(t,n,e,0,null,!1,!1,"",gc);return e._reactRootContainer=o,e[Mt]=o.current,En(e.nodeType===8?e.parentNode:e),dr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var d=Zs(c);a.call(d)}}var c=qo(e,0,!1,null,null,!1,!1,"",gc);return e._reactRootContainer=c,e[Mt]=c.current,En(e.nodeType===8?e.parentNode:e),dr(function(){yl(t,c,r,n)}),c}function kl(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Zs(o);a.call(c)}}yl(t,o,e,s)}else o=Ip(r,t,e,s,n);return Zs(o)}yu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=an(t.pendingLanes);r!==0&&(po(t,r|1),We(t,xe()),!(J&6)&&(Ur=xe()+500,Zt()))}break;case 13:dr(function(){var n=Et(e,1);if(n!==null){var s=ze();dt(n,e,1,s)}}),Yo(e,1)}};ho=function(e){if(e.tag===13){var t=Et(e,134217728);if(t!==null){var r=ze();dt(t,e,134217728,r)}Yo(e,134217728)}};xu=function(e){if(e.tag===13){var t=qt(e),r=Et(e,t);if(r!==null){var n=ze();dt(r,e,t,n)}Yo(e,t)}};vu=function(){return re};ku=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};vi=function(e,t,r){switch(t){case"input":if(fi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ul(n);if(!s)throw Error(R(90));Kc(n),fi(n,s)}}}break;case"textarea":Jc(e,r);break;case"select":t=r.value,t!=null&&Fr(e,!!r.multiple,t,!1)}};iu=Ho;ou=dr;var $p={usingClientEntryPoint:!1,Events:[qn,jr,ul,su,lu,Ho]},nn={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:nn.bundleType,version:nn.version,rendererPackageName:nn.rendererPackageName,rendererConfig:nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uu(e),e===null?null:e.stateNode},findFiberByHostInstance:nn.findFiberByHostInstance||Rp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ms.isDisabled&&ms.supportsFiber)try{il=ms.inject(zp),xt=ms}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$p;Xe.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qo(t))throw Error(R(200));return Dp(e,t,null,r)};Xe.createRoot=function(e,t){if(!Qo(e))throw Error(R(299));var r=!1,n="",s=Hd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=qo(e,1,!1,null,null,r,!1,n,s),e[Mt]=t.current,En(e.nodeType===8?e.parentNode:e),new Go(t)};Xe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=uu(t),e=e===null?null:e.stateNode,e};Xe.flushSync=function(e){return dr(e)};Xe.hydrate=function(e,t,r){if(!vl(t))throw Error(R(200));return kl(null,e,t,!0,r)};Xe.hydrateRoot=function(e,t,r){if(!Qo(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Hd;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Bd(t,null,e,1,r??null,s,!1,i,o),e[Mt]=t.current,En(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new xl(t)};Xe.render=function(e,t,r){if(!vl(t))throw Error(R(200));return kl(null,e,t,!1,r)};Xe.unmountComponentAtNode=function(e){if(!vl(e))throw Error(R(40));return e._reactRootContainer?(dr(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1};Xe.unstable_batchedUpdates=Ho;Xe.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vl(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return kl(e,t,r,!1,n)};Xe.version="18.3.1-next-f1338f8080-20240426";function Ud(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ud)}catch(e){console.error(e)}}Ud(),Uc.exports=Xe;var Ap=Uc.exports,yc=Ap;li.createRoot=yc.createRoot,li.hydrateRoot=yc.hydrateRoot;var _p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Op=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bp=(e,t)=>{const r=C.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},d)=>C.createElement("svg",{ref:d,..._p,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Op(e)}`,...c},[...t.map(([p,g])=>C.createElement(p,g)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${e}`,r};var _=Bp;const Hp=_("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Es=_("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Up=_("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),Wd=_("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Js=_("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Xo=_("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),wl=_("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Vd=_("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),vn=_("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),zn=_("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Wp=_("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Vp=_("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),An=_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qp=_("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Yp=_("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),_n=_("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),Gp=_("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),On=_("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),qd=_("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Qp=_("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Xp=_("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),Zi=_("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kp=_("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),Zp=_("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]),Jp=_("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]),fr=_("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),e0=_("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]),Ko=_("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),t0=_("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]),r0=_("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Zo=_("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Gr=_("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),el=_("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),xc=_("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),tl=_("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),n0=_("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Yd=_("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),s0=_("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),vc=_("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),l0=_("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),i0=_("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),o0=_("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bl=_("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),rl=_("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),Wr=_("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),a0=_("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),c0=_("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),u0=_("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Jo=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d0=_("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),f0=_("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]),m0=_("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ea=_("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),p0=_("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]),h0=_("Shovel",[["path",{d:"M2 22v-5l5-5 5 5-5 5z",key:"1fh25c"}],["path",{d:"M9.5 14.5 16 8",key:"1smz5x"}],["path",{d:"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2",key:"1q8uv5"}]]),g0=_("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]),Gd=_("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Qd=_("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Xd=_("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),jl=_("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),y0=_("Tent",[["path",{d:"M19 20 10 4",key:"1ak541"}],["path",{d:"m5 20 9-16",key:"11dtj9"}],["path",{d:"M3 20h18",key:"1l19wn"}],["path",{d:"m12 15-3 5",key:"1c5kej"}],["path",{d:"m12 15 3 5",key:"odkmhi"}]]),ta=_("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),x0=_("TreeDeciduous",[["path",{d:"M8 19h8a4 4 0 0 0 3.8-2.8 4 4 0 0 0-1.6-4.5c1-1.1 1-2.7.4-4-.7-1.2-2.2-2-3.6-1.7a3 3 0 0 0-3-3 3 3 0 0 0-3 3c-1.4-.2-2.9.5-3.6 1.7-.7 1.3-.5 2.9.4 4a4 4 0 0 0-1.6 4.5A4 4 0 0 0 8 19Z",key:"12ivfl"}],["path",{d:"M12 19v3",key:"npa21l"}]]),Gn=_("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),v0=_("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),k0=_("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ra=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),w0=_("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ji=_("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),b0=_("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]),j0=_("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),hr=_("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]),S0=_("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Sl=_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kd=_("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Zd=_("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),kc=[{min:1,max:9,type:"Territory",die:4,dcMod:0,storage:4},{min:10,max:24,type:"Province",die:6,dcMod:1,storage:8},{min:25,max:49,type:"State",die:8,dcMod:2,storage:12},{min:50,max:99,type:"Country",die:10,dcMod:3,storage:16},{min:100,max:1/0,type:"Dominion",die:12,dcMod:4,storage:20}],Qn=e=>kc.find(t=>e>=t.min&&e<=t.max)||kc[0],na=e=>14+e,nl=["Culture","Economy","Loyalty","Stability"],Nl={Culture:["Arts","Folklore","Magic","Scholarship"],Economy:["Boating","Engineering","Exploration","Industry","Trade"],Loyalty:["Intrigue","Politics","Statecraft","Warfare"],Stability:["Agriculture","Defense","Wilderness"]};Object.values(Nl).flat();const sa=e=>{for(const[t,r]of Object.entries(Nl))if(r.includes(e))return t;return null},la=(e,t)=>{switch(e){case"Trained":return t+2;case"Expert":return t+4;case"Master":return t+6;case"Legendary":return t+8;default:return 0}},N0=[{id:"ruler",name:"Ruler",ability:"Any",key:!0,description:"The kingdom's head of state."},{id:"counselor",name:"Counselor",ability:"Culture",key:!1,description:"Guides public sentiment and religion."},{id:"general",name:"General",ability:"Loyalty",key:!1,description:"Commands military forces."},{id:"emissary",name:"Emissary",ability:"Loyalty",key:!1,description:"Handles foreign diplomacy."},{id:"magister",name:"Magister",ability:"Culture",key:!1,description:"Oversees magical matters."},{id:"treasurer",name:"Treasurer",ability:"Economy",key:!1,description:"Manages finances and trade."},{id:"viceroy",name:"Viceroy",ability:"Economy",key:!1,description:"Oversees expansion and new territories."},{id:"warden",name:"Warden",ability:"Stability",key:!1,description:"Protects lands and resources."}],wc=["Abadius","Calistril","Pharast","Gozran","Desnus","Sarenith","Erastus","Arodus","Rova","Lamashan","Neth","Kuthona"],ti=[{id:"conquest",name:"Conquest",boost:"Loyalty",flaw:"Culture",freeBoost:"Loyalty"},{id:"expansion",name:"Expansion",boost:"Culture",flaw:"Stability",freeBoost:"Economy"},{id:"exploration",name:"Exploration",boost:"Economy",flaw:"Loyalty",freeBoost:"Culture"},{id:"grant",name:"Grant",boost:"Stability",flaw:"Economy",freeBoost:"Stability"},{id:"open",name:"Open",boost:"Any",flaw:"Any",freeBoost:"Any"}],ri=[{id:"forest",name:"Forest or Swamp",boost:"Culture"},{id:"hill",name:"Hill or Plain",boost:"Loyalty"},{id:"lake",name:"Lake or River",boost:"Economy"},{id:"mountain",name:"Mountain or Ruins",boost:"Stability"}],ni=[{id:"despotism",name:"Despotism",boost:"Stability",skill:"Intrigue"},{id:"feudalism",name:"Feudalism",boost:"Stability",skill:"Defense"},{id:"oligarchy",name:"Oligarchy",boost:"Economy",skill:"Industry"},{id:"republic",name:"Republic",boost:"Loyalty",skill:"Politics"},{id:"thaumocracy",name:"Thaumocracy",boost:"Culture",skill:"Magic"},{id:"yeomanry",name:"Yeomanry",boost:"Loyalty",skill:"Agriculture"}],Jd=[{id:"brewery",name:"Brewery",level:1,lots:1,residential:!1,cost:{rp:6,lumber:2},construction:"Agriculture DC 15",effects:"+1 item bonus to Establish Trade Agreement",itemBonus:1,itemBonusTo:"Establish Trade Agreement"},{id:"cemetery",name:"Cemetery",level:1,lots:1,residential:!1,cost:{rp:4,stone:1},construction:"Folklore DC 15",effects:"Reduce Unrest by 1 when event causes death"},{id:"general-store",name:"General Store",level:1,lots:1,residential:!1,cost:{rp:8,lumber:1},construction:"Trade DC 15",effects:"+1 item bonus to Establish Trade Agreement",itemBonus:1,itemBonusTo:"Establish Trade Agreement"},{id:"granary",name:"Granary",level:1,lots:1,residential:!1,cost:{rp:12,lumber:2,stone:1},construction:"Agriculture DC 15",effects:"+1 to Food storage capacity"},{id:"herbalist",name:"Herbalist",level:1,lots:1,residential:!1,cost:{rp:10,lumber:1},construction:"Wilderness DC 15",effects:"Reduces settlement consumption by 1 (min 0)"},{id:"houses",name:"Houses",level:1,lots:1,residential:!0,cost:{rp:3,lumber:1},construction:"None",effects:"Required for settlement residents"},{id:"inn",name:"Inn",level:1,lots:1,residential:!0,cost:{rp:10,lumber:2},construction:"Trade DC 15",effects:"+1 item bonus to Hire Adventurers",itemBonus:1,itemBonusTo:"Hire Adventurers"},{id:"mill",name:"Mill",level:1,lots:1,residential:!1,cost:{rp:6,lumber:2,stone:1},construction:"Engineering DC 15",effects:"Reduces consumption by 1 if adjacent to Farmland"},{id:"shrine",name:"Shrine",level:1,lots:1,residential:!1,cost:{rp:8,stone:1},construction:"Folklore DC 15",effects:"+1 item bonus to Celebrate Holiday",itemBonus:1,itemBonusTo:"Celebrate Holiday"},{id:"smithy",name:"Smithy",level:1,lots:1,residential:!1,cost:{rp:8,lumber:1,ore:2},construction:"Industry DC 15",effects:"+1 item bonus to Trade Commodities for Ore",itemBonus:1,itemBonusTo:"Trade Commodities"},{id:"stable",name:"Stable",level:1,lots:1,residential:!1,cost:{rp:10,lumber:2},construction:"Wilderness DC 15",effects:"+1 item bonus to Establish Trade Agreement",itemBonus:1,itemBonusTo:"Establish Trade Agreement"},{id:"stockyard",name:"Stockyard",level:1,lots:1,residential:!1,cost:{rp:20,lumber:4},construction:"Agriculture DC 15",effects:"Collect +1 Food per turn if adjacent to Farmland"},{id:"stonemason",name:"Stonemason",level:1,lots:1,residential:!1,cost:{rp:16,lumber:2},construction:"Industry DC 15",effects:"+1 item bonus to Build Structure using Stone",itemBonus:1,itemBonusTo:"Build Structure"},{id:"tavern",name:"Tavern",level:1,lots:1,residential:!1,cost:{rp:12,lumber:2},construction:"Trade DC 15",effects:"+1 item bonus to Rest and Relax",itemBonus:1,itemBonusTo:"Rest and Relax"},{id:"watchtower",name:"Watchtower",level:1,lots:1,residential:!1,cost:{rp:12,stone:2},construction:"Defense DC 15",effects:"+1 item bonus to Quell Unrest (in settlement)",itemBonus:1,itemBonusTo:"Quell Unrest"},{id:"alchemy-lab",name:"Alchemy Lab",level:2,lots:1,residential:!1,cost:{rp:18,stone:1,ore:1},construction:"Magic DC 18",effects:"+1 item bonus to Supernatural Solution",itemBonus:1,itemBonusTo:"Supernatural Solution"},{id:"arena",name:"Arena",level:2,lots:4,residential:!1,cost:{rp:40,stone:4},construction:"Warfare DC 18",effects:"+2 item bonus to Celebrate Holiday, +1 Fame per turn",itemBonus:2,itemBonusTo:"Celebrate Holiday"},{id:"barracks",name:"Barracks",level:2,lots:1,residential:!1,cost:{rp:16,lumber:2,stone:1},construction:"Defense DC 18",effects:"+1 item bonus to Garrison Army",itemBonus:1,itemBonusTo:"Garrison Army"},{id:"festival-hall",name:"Festival Hall",level:2,lots:2,residential:!1,cost:{rp:22,lumber:3},construction:"Arts DC 18",effects:"+1 item bonus to Celebrate Holiday",itemBonus:1,itemBonusTo:"Celebrate Holiday"},{id:"guild-hall",name:"Guild Hall",level:2,lots:2,residential:!1,cost:{rp:34,lumber:2,stone:2},construction:"Trade DC 18",effects:"+1 item bonus to all Economy-based checks",itemBonus:1,itemBonusTo:"Economy checks"},{id:"hospital",name:"Hospital",level:2,lots:2,residential:!1,cost:{rp:30,stone:2,lumber:1},construction:"Defense DC 18",effects:"+1 item bonus to Provide Care",itemBonus:1,itemBonusTo:"Provide Care"},{id:"jail",name:"Jail",level:2,lots:1,residential:!1,cost:{rp:14,stone:2},construction:"Defense DC 18",effects:"+1 item bonus to Quell Unrest",itemBonus:1,itemBonusTo:"Quell Unrest"},{id:"library",name:"Library",level:2,lots:2,residential:!1,cost:{rp:28,stone:2},construction:"Scholarship DC 18",effects:"+1 item bonus to Creative Solution",itemBonus:1,itemBonusTo:"Creative Solution"},{id:"lumberyard",name:"Lumberyard",level:2,lots:1,residential:!1,cost:{rp:16,lumber:3},construction:"Industry DC 18",effects:"Store +2 Lumber (in addition to normal storage)"},{id:"luxury-store",name:"Luxury Store",level:2,lots:1,residential:!1,cost:{rp:28,lumber:2,luxuries:1},construction:"Trade DC 18",effects:"+1 item bonus to Trade Commodities for Luxuries",itemBonus:1,itemBonusTo:"Trade Commodities"},{id:"magical-streetlamps",name:"Magical Streetlamps",level:2,lots:0,residential:!1,cost:{rp:20},construction:"Magic DC 18",effects:"Reduces Crime by 1 in settlement",infrastructure:!0},{id:"marketplace",name:"Marketplace",level:2,lots:2,residential:!1,cost:{rp:48,lumber:2},construction:"Trade DC 18",effects:"+2 item bonus to Trade Commodities",itemBonus:2,itemBonusTo:"Trade Commodities"},{id:"menagerie",name:"Menagerie",level:2,lots:2,residential:!1,cost:{rp:32,lumber:2},construction:"Wilderness DC 18",effects:"+1 item bonus to Rest and Relax",itemBonus:1,itemBonusTo:"Rest and Relax"},{id:"paved-streets",name:"Paved Streets",level:2,lots:0,residential:!1,cost:{rp:24,stone:2},construction:"Engineering DC 18",effects:"+1 item bonus to Quell Unrest",infrastructure:!0,itemBonus:1,itemBonusTo:"Quell Unrest"},{id:"pier",name:"Pier",level:2,lots:1,residential:!1,cost:{rp:16,lumber:2},construction:"Boating DC 18",effects:"+1 item bonus to Go Fishing",requiresWater:!0,itemBonus:1,itemBonusTo:"Go Fishing"},{id:"printing-house",name:"Printing House",level:2,lots:2,residential:!1,cost:{rp:30,lumber:3},construction:"Scholarship DC 18",effects:"Reduces Unrest gain from failed checks by 1"},{id:"sewer-system",name:"Sewer System",level:2,lots:0,residential:!1,cost:{rp:24,stone:3},construction:"Engineering DC 18",effects:"Reduces Decay by 1 in settlement",infrastructure:!0},{id:"temple",name:"Temple",level:2,lots:2,residential:!1,cost:{rp:32,stone:2,lumber:1},construction:"Folklore DC 18",effects:"+1 item bonus to Celebrate Holiday and Provide Care",itemBonus:1,itemBonusTo:"Celebrate Holiday"},{id:"trade-shop",name:"Trade Shop",level:2,lots:1,residential:!1,cost:{rp:26,lumber:2},construction:"Trade DC 18",effects:"+1 item bonus to Establish Trade Agreement",itemBonus:1,itemBonusTo:"Establish Trade Agreement"},{id:"academy",name:"Academy",level:3,lots:2,residential:!1,cost:{rp:52,stone:3,lumber:2},construction:"Scholarship DC 21",effects:"+2 item bonus to Creative Solution",itemBonus:2,itemBonusTo:"Creative Solution"},{id:"bank",name:"Bank",level:3,lots:1,residential:!1,cost:{rp:28,stone:2,ore:2},construction:"Trade DC 21",effects:"+1 item bonus to Collect Taxes",itemBonus:1,itemBonusTo:"Collect Taxes"},{id:"castle",name:"Castle",level:3,lots:4,residential:!1,cost:{rp:54,stone:6,lumber:4},construction:"Defense DC 21",effects:"+2 item bonus to New Leadership, +3 Leadership activities per turn",itemBonus:2,itemBonusTo:"New Leadership"},{id:"cathedral",name:"Cathedral",level:3,lots:4,residential:!1,cost:{rp:58,stone:4,lumber:2,luxuries:2},construction:"Folklore DC 21",effects:"+3 item bonus to Celebrate Holiday",itemBonus:3,itemBonusTo:"Celebrate Holiday"},{id:"foundry",name:"Foundry",level:3,lots:2,residential:!1,cost:{rp:36,stone:3,ore:3},construction:"Industry DC 21",effects:"+1 item bonus to all Industry checks",itemBonus:1,itemBonusTo:"Industry"},{id:"garrison",name:"Garrison",level:3,lots:2,residential:!1,cost:{rp:28,stone:3},construction:"Warfare DC 21",effects:"+1 item bonus to Recruit Army",itemBonus:1,itemBonusTo:"Recruit Army"},{id:"grandiose-villa",name:"Grandiose Villa",level:3,lots:2,residential:!0,cost:{rp:60,stone:2,lumber:2,luxuries:2},construction:"Arts DC 21",effects:"+1 Fame, +1 Infamy"},{id:"magic-shop",name:"Magic Shop",level:3,lots:1,residential:!1,cost:{rp:44,stone:1,luxuries:2},construction:"Magic DC 21",effects:"+1 item bonus to Supernatural Solution",itemBonus:1,itemBonusTo:"Supernatural Solution"},{id:"mansion",name:"Mansion",level:3,lots:2,residential:!0,cost:{rp:36,lumber:3,stone:2},construction:"Arts DC 21",effects:"Luxurious housing for nobles"},{id:"military-academy",name:"Military Academy",level:3,lots:2,residential:!1,cost:{rp:36,stone:3,lumber:2},construction:"Warfare DC 21",effects:"+2 item bonus to Train Army",itemBonus:2,itemBonusTo:"Train Army"},{id:"mint",name:"Mint",level:3,lots:1,residential:!1,cost:{rp:30,stone:2,ore:4},construction:"Trade DC 21",effects:"+2 item bonus to Collect Taxes",itemBonus:2,itemBonusTo:"Collect Taxes"},{id:"museum",name:"Museum",level:3,lots:2,residential:!1,cost:{rp:30,stone:2,lumber:2},construction:"Arts DC 21",effects:"+1 Fame, +1 item bonus to Rest and Relax",itemBonus:1,itemBonusTo:"Rest and Relax"},{id:"noble-villa",name:"Noble Villa",level:3,lots:2,residential:!0,cost:{rp:24,stone:2,lumber:2,luxuries:1},construction:"Politics DC 21",effects:"+1 item bonus to Improve Lifestyle",itemBonus:1,itemBonusTo:"Improve Lifestyle"},{id:"occult-shop",name:"Occult Shop",level:3,lots:1,residential:!1,cost:{rp:44,stone:1,luxuries:1},construction:"Magic DC 21",effects:"+1 item bonus to Prognostication",itemBonus:1,itemBonusTo:"Prognostication"},{id:"opera-house",name:"Opera House",level:3,lots:2,residential:!1,cost:{rp:40,lumber:3,luxuries:2},construction:"Arts DC 21",effects:"+2 Fame, +2 item bonus to Celebrate Holiday",itemBonus:2,itemBonusTo:"Celebrate Holiday"},{id:"palace",name:"Palace",level:3,lots:4,residential:!1,cost:{rp:108,stone:8,lumber:4,luxuries:4},construction:"Politics DC 21",effects:"+3 item bonus to New Leadership, +3 Leadership activities, +3 Fame",itemBonus:3,itemBonusTo:"New Leadership"},{id:"park",name:"Park",level:3,lots:1,residential:!1,cost:{rp:5},construction:"Wilderness DC 21",effects:"+1 item bonus to Rest and Relax",itemBonus:1,itemBonusTo:"Rest and Relax"},{id:"refinery",name:"Refinery",level:3,lots:2,residential:!1,cost:{rp:54,stone:2,ore:3},construction:"Industry DC 21",effects:"Process raw commodities, +1 Luxuries/turn from Ore"},{id:"sacred-grove",name:"Sacred Grove",level:3,lots:1,residential:!1,cost:{rp:36},construction:"Wilderness DC 21",effects:"+1 item bonus to Quell Unrest (settlement)",itemBonus:1,itemBonusTo:"Quell Unrest"},{id:"shipyard",name:"Shipyard",level:3,lots:4,residential:!1,cost:{rp:40,lumber:6},construction:"Boating DC 21",effects:"+2 item bonus to Establish Trade Agreement (water)",requiresWater:!0,itemBonus:2,itemBonusTo:"Establish Trade Agreement"},{id:"siege-workshop",name:"Siege Workshop",level:3,lots:2,residential:!1,cost:{rp:42,lumber:4,ore:2},construction:"Engineering DC 21",effects:"Build siege weapons for armies"},{id:"specialized-artisan",name:"Specialized Artisan",level:3,lots:1,residential:!1,cost:{rp:30,lumber:2},construction:"Industry DC 21",effects:"+1 item bonus to Trade Commodities",itemBonus:1,itemBonusTo:"Trade Commodities"},{id:"town-hall",name:"Town Hall",level:3,lots:2,residential:!1,cost:{rp:22,stone:2,lumber:2},construction:"Politics DC 21",effects:"+1 item bonus to New Leadership, +3 Leadership activities/turn",itemBonus:1,itemBonusTo:"New Leadership"},{id:"university",name:"University",level:3,lots:4,residential:!1,cost:{rp:78,stone:4,lumber:2},construction:"Scholarship DC 21",effects:"+3 item bonus to Creative Solution, +1 Fame",itemBonus:3,itemBonusTo:"Creative Solution"},{id:"wall-stone",name:"Stone Wall",level:3,lots:0,residential:!1,cost:{rp:4,stone:2},construction:"Defense DC 21",effects:"+1 item bonus to settlement Defense checks",infrastructure:!0,itemBonus:1,itemBonusTo:"Defense"},{id:"wall-wooden",name:"Wooden Wall",level:3,lots:0,residential:!1,cost:{rp:2,lumber:2},construction:"Defense DC 21",effects:"+1 item bonus to settlement Defense checks (less durable)",infrastructure:!0,itemBonus:1,itemBonusTo:"Defense"},{id:"waterfront",name:"Waterfront",level:3,lots:1,residential:!1,cost:{rp:90,lumber:3},construction:"Boating DC 21",effects:"+1 item bonus to Go Fishing, +1 Food/turn",requiresWater:!0,itemBonus:1,itemBonusTo:"Go Fishing"}],Bn=e=>Jd.find(t=>t.id===e),C0=e=>Jd.filter(t=>t.level<=e),ef=[{id:"celebrate-holiday",name:"Celebrate Holiday",category:"leadership",skill:"Folklore",desc:"Hold a celebration to reduce Unrest",rpCost:1,effects:{criticalSuccess:[{type:"unrest",delta:-2},{type:"fame",delta:1}],success:[{type:"unrest",delta:-1}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"craft-luxuries",name:"Craft Luxuries",category:"leadership",skill:"Industry",desc:"Create luxury goods",rpCost:5,effects:{criticalSuccess:[{type:"commodity",commodity:"luxuries",delta:2}],success:[{type:"commodity",commodity:"luxuries",delta:1}],failure:[],criticalFailure:[{type:"ruin",ruinType:"Decay",delta:1}]}},{id:"creative-solution",name:"Creative Solution",category:"leadership",skill:"Scholarship",desc:"Find creative answer to a problem",effects:{criticalSuccess:[{type:"special",key:"solveProblem"},{type:"unrest",delta:-1}],success:[{type:"special",key:"solveProblem"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"hire-adventurers",name:"Hire Adventurers",category:"leadership",skill:"Warfare",desc:"Hire adventurers for a dangerous task",rpCost:2,requiresInput:["taskLevel"],effects:{criticalSuccess:[{type:"special",key:"taskComplete"}],success:[{type:"special",key:"taskComplete"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"improve-lifestyle",name:"Improve Lifestyle",category:"leadership",skill:"Politics",desc:"Improve citizen lifestyle for a turn",effects:{criticalSuccess:[{type:"unrest",delta:-2}],success:[{type:"unrest",delta:-1}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"new-leadership",name:"New Leadership",category:"leadership",skill:"Politics",desc:"Assign or change a leadership role",requiresInput:["roleId","leaderName"],effects:{criticalSuccess:[{type:"special",key:"assignRole"}],success:[{type:"special",key:"assignRole"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"prognostication",name:"Prognostication",category:"leadership",skill:"Magic",desc:"Divine future events",effects:{criticalSuccess:[{type:"special",key:"prognosticationCrit"}],success:[{type:"special",key:"prognostication"}],failure:[],criticalFailure:[{type:"special",key:"prognosticationFail"}]}},{id:"provide-care",name:"Provide Care",category:"leadership",skill:"Defense",desc:"Heal sick or injured citizens",effects:{criticalSuccess:[{type:"unrest",delta:-1}],success:[],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"quell-unrest",name:"Quell Unrest",category:"leadership",skill:"Intrigue",desc:"Reduce kingdom Unrest",effects:{criticalSuccess:[{type:"unrest",delta:-2}],success:[{type:"unrest",delta:-1}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"repair-reputation",name:"Repair Reputation",category:"leadership",skill:"Politics",desc:"Reduce Infamy or a Ruin score",requiresInput:["targetStat"],effects:{criticalSuccess:[{type:"special",key:"repairRep2"}],success:[{type:"special",key:"repairRep1"}],failure:[],criticalFailure:[{type:"special",key:"repairRepFail"}]}},{id:"rest-and-relax",name:"Rest and Relax",category:"leadership",skill:"Arts",desc:"Take time for leisure activities",effects:{criticalSuccess:[{type:"unrest",delta:-2},{type:"fame",delta:1}],success:[{type:"unrest",delta:-1}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"supernatural-solution",name:"Supernatural Solution",category:"leadership",skill:"Magic",desc:"Use magic to solve a problem",effects:{criticalSuccess:[{type:"special",key:"solveProblem"},{type:"unrest",delta:-1}],success:[{type:"special",key:"solveProblem"}],failure:[],criticalFailure:[{type:"ruin",ruinType:"Corruption",delta:1}]}}],tf=[{id:"claim-hex",name:"Claim Hex",category:"region",skill:"Exploration",desc:"Claim an adjacent explored hex",rpCost:1,requiresInput:["hexCoord"],prerequisite:"adjacentExploredHex",effects:{criticalSuccess:[{type:"claimHex"},{type:"xp",delta:20}],success:[{type:"claimHex"},{type:"xp",delta:10}],failure:[],criticalFailure:[{type:"unrest",delta:1}]},refundOnFailure:!0},{id:"abandon-hex",name:"Abandon Hex",category:"region",skill:"Wilderness",desc:"Relinquish a claimed hex",requiresInput:["hexCoord"],prerequisite:"ownedHexNoSettlement",effects:{criticalSuccess:[{type:"abandonHex"}],success:[{type:"abandonHex"},{type:"unrest",delta:1}],failure:[],criticalFailure:[{type:"unrest",delta:"1d4"}]}},{id:"build-roads",name:"Build Roads",category:"region",skill:"Engineering",desc:"Construct roads in a hex",rpCost:1,requiresInput:["hexCoord"],prerequisite:"ownedHex",effects:{criticalSuccess:[{type:"addRoad"},{type:"special",key:"fastRoad"}],success:[{type:"addRoad"}],failure:[],criticalFailure:[]},refundOnFailure:!0},{id:"clear-hex",name:"Clear Hex",category:"region",skill:"Exploration",desc:"Remove hazards from a hex",requiresInput:["hexCoord"],effects:{criticalSuccess:[{type:"clearHex"},{type:"special",key:"discoverResource"}],success:[{type:"clearHex"}],failure:[],criticalFailure:[{type:"special",key:"randomEncounter"}]}},{id:"establish-farmland",name:"Establish Farmland",category:"region",skill:"Agriculture",desc:"Create farmland in a plains or hills hex",rpCost:2,requiresInput:["hexCoord"],prerequisite:"ownedHexFarmable",effects:{criticalSuccess:[{type:"workSite",siteType:"farm",bonus:!0}],success:[{type:"workSite",siteType:"farm"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]},refundOnFailure:!0},{id:"establish-work-site-mine",name:"Establish Mine",category:"region",skill:"Industry",desc:"Create a mine in a hills or mountain hex",rpCost:2,requiresInput:["hexCoord"],prerequisite:"ownedHexMinable",effects:{criticalSuccess:[{type:"workSite",siteType:"mine",bonus:!0}],success:[{type:"workSite",siteType:"mine"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]},refundOnFailure:!0},{id:"establish-work-site-quarry",name:"Establish Quarry",category:"region",skill:"Industry",desc:"Create a quarry in a hills or mountain hex",rpCost:2,requiresInput:["hexCoord"],prerequisite:"ownedHexQuarryable",effects:{criticalSuccess:[{type:"workSite",siteType:"quarry",bonus:!0}],success:[{type:"workSite",siteType:"quarry"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]},refundOnFailure:!0},{id:"establish-work-site-lumber",name:"Establish Lumber Camp",category:"region",skill:"Industry",desc:"Create a lumber camp in a forest hex",rpCost:2,requiresInput:["hexCoord"],prerequisite:"ownedHexForest",effects:{criticalSuccess:[{type:"workSite",siteType:"lumber",bonus:!0}],success:[{type:"workSite",siteType:"lumber"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]},refundOnFailure:!0},{id:"fortify-hex",name:"Fortify Hex",category:"region",skill:"Defense",desc:"Build defensive structures in a hex",rpCost:2,requiresInput:["hexCoord"],prerequisite:"ownedHex",effects:{criticalSuccess:[{type:"fortifyHex",bonus:2}],success:[{type:"fortifyHex",bonus:1}],failure:[],criticalFailure:[]},refundOnFailure:!0},{id:"go-fishing",name:"Go Fishing",category:"region",skill:"Wilderness",desc:"Fish in a water-adjacent hex",requiresInput:["hexCoord"],prerequisite:"ownedHexWaterAdjacent",effects:{criticalSuccess:[{type:"commodity",commodity:"food",delta:2}],success:[{type:"commodity",commodity:"food",delta:1}],failure:[],criticalFailure:[]}},{id:"harvest-crops",name:"Harvest Crops",category:"region",skill:"Agriculture",desc:"Harvest from existing farmland",requiresInput:["hexCoord"],prerequisite:"ownedHexWithFarm",effects:{criticalSuccess:[{type:"commodity",commodity:"food",delta:2}],success:[{type:"commodity",commodity:"food",delta:1}],failure:[],criticalFailure:[{type:"commodity",commodity:"food",delta:-1}]}}],rf=[{id:"build-structure",name:"Build Structure",category:"civic",skill:"varies",desc:"Construct a building in a settlement",requiresInput:["settlementId","structureId","blockId","lotIndex"],effects:{criticalSuccess:[{type:"buildStructure",discount:!0}],success:[{type:"buildStructure"}],failure:[{type:"special",key:"halfRpLost"}],criticalFailure:[{type:"ruin",ruinType:"Decay",delta:1}]}},{id:"demolish",name:"Demolish",category:"civic",skill:"none",desc:"Tear down a structure",requiresInput:["settlementId","structureId"],effects:{criticalSuccess:[{type:"demolish",recover:!0}],success:[{type:"demolish"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"establish-settlement",name:"Establish Settlement",category:"civic",skill:"Engineering",desc:"Found a new settlement in a claimed hex",rpCost:0,requiresInput:["hexCoord","settlementName"],prerequisite:"ownedHexNoSettlement",effects:{criticalSuccess:[{type:"establishSettlement"},{type:"xp",delta:40}],success:[{type:"establishSettlement"},{type:"xp",delta:20}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}},{id:"relocate-capital",name:"Relocate Capital",category:"civic",skill:"Statecraft",desc:"Move capital to a different settlement",requiresInput:["settlementId"],prerequisite:"hasMultipleSettlements",effects:{criticalSuccess:[{type:"relocateCapital"}],success:[{type:"relocateCapital"},{type:"unrest",delta:1}],failure:[],criticalFailure:[{type:"unrest",delta:"1d4"}]}}],M0=[{id:"collect-taxes",name:"Collect Taxes",category:"commerce",skill:"Trade",desc:"Gather taxes from citizens",phase:"commerce",effects:{criticalSuccess:[{type:"special",key:"taxesCrit"}],success:[{type:"special",key:"taxes"}],failure:[{type:"special",key:"taxesReduced"}],criticalFailure:[{type:"unrest",delta:1}]}},{id:"trade-commodities",name:"Trade Commodities",category:"commerce",skill:"Trade",desc:"Buy or sell commodities",phase:"commerce",requiresInput:["tradeType","commodity","amount"],effects:{criticalSuccess:[{type:"special",key:"tradeExcellent"}],success:[{type:"special",key:"tradeFair"}],failure:[{type:"special",key:"tradePoor"}],criticalFailure:[{type:"special",key:"tradeTerrible"}]}},{id:"establish-trade-agreement",name:"Establish Trade Agreement",category:"commerce",skill:"Trade",desc:"Create a trade route with a neighbor",phase:"commerce",requiresInput:["targetFaction"],effects:{criticalSuccess:[{type:"special",key:"tradeAgreementLucrative"}],success:[{type:"special",key:"tradeAgreement"}],failure:[],criticalFailure:[{type:"unrest",delta:1}]}}],E0=[...ef,...tf,...rf,...M0],T0=e=>E0.find(t=>t.id===e),nf=[{id:"civil-war-veterans",name:"Civil War Veterans",level:1,traits:["kingdom"],description:"Your citizens include veterans of a civil war, making them tougher and more resilient.",benefit:"+1 item bonus to Warfare checks when defending your kingdom.",prerequisite:null},{id:"cooperative-leadership",name:"Cooperative Leadership",level:1,traits:["kingdom"],description:"Your leaders work together exceptionally well.",benefit:"Once per turn, when you critically fail a leadership activity, you can reroll it.",prerequisite:null},{id:"crush-dissent",name:"Crush Dissent",level:1,traits:["kingdom"],description:"Your kingdom deals harshly with those who sow discord.",benefit:"+1 item bonus to Quell Unrest checks. On a critical success, reduce Unrest by an additional 1.",prerequisite:null},{id:"experienced-farmers",name:"Experienced Farmers",level:1,traits:["kingdom"],description:"Your citizens are skilled at working the land.",benefit:"+1 item bonus to Harvest Crops. Farmlands produce 1 additional Food during upkeep.",prerequisite:null},{id:"folk-magic",name:"Folk Magic",level:1,traits:["kingdom"],description:"Hedge magic and folk remedies are common in your kingdom.",benefit:"+1 item bonus to Provide Care. Reduce the DC of events involving disease or poison by 2.",prerequisite:null},{id:"fortified-fiefs",name:"Fortified Fiefs",level:1,traits:["kingdom"],description:"Your settlements are built with defense in mind.",benefit:"+1 item bonus to Defense checks. Walls cost 1 less stone to construct.",prerequisite:null},{id:"free-and-fair",name:"Free and Fair",level:1,traits:["kingdom"],description:"Your kingdom values free trade and fair markets.",benefit:"+1 item bonus to Establish Trade Agreement. Trade commodities at 1 additional RP value.",prerequisite:null},{id:"insider-trading",name:"Insider Trading",level:1,traits:["kingdom"],description:"Your merchants share information that helps the kingdom profit.",benefit:"+1 item bonus to Trade checks. On a critical success when trading, gain 1 additional RP.",prerequisite:null},{id:"muddle-through",name:"Muddle Through",level:1,traits:["kingdom"],description:"Your kingdom has a talent for making do with less.",benefit:"When you pay consumption and are short on food, roll d3 instead of d4 for Unrest.",prerequisite:null},{id:"practical-magic",name:"Practical Magic",level:1,traits:["kingdom"],description:"Magic is used practically throughout your kingdom.",benefit:"+1 item bonus to Supernatural Solution. Magic shops and temples cost 2 less RP.",prerequisite:null},{id:"backup-militia",name:"Backup Militia",level:2,traits:["kingdom"],description:"Your citizens can quickly form a defensive militia.",benefit:"+1 circumstance bonus to Defense checks against invasion. Once per turn, reduce Unrest from bandit events by 1.",prerequisite:null},{id:"civic-planning",name:"Civic Planning",level:2,traits:["kingdom"],description:"Your settlements are thoughtfully laid out.",benefit:"Structures that provide item bonuses grant +1 higher bonus. Infrastructure costs 2 less RP.",prerequisite:null},{id:"clever-courtiers",name:"Clever Courtiers",level:2,traits:["kingdom"],description:"Your court is filled with cunning advisors.",benefit:"+1 item bonus to Intrigue and Politics checks. Diplomatic events have -2 DC.",prerequisite:null},{id:"enduring-kingdom",name:"Enduring Kingdom",level:2,traits:["kingdom"],description:"Your kingdom can weather hard times.",benefit:"Ruin thresholds are increased by 2. When Ruin would increase, reduce it by 1 (min 0).",prerequisite:null},{id:"expert-craftspeople",name:"Expert Craftspeople",level:2,traits:["kingdom"],description:"Your kingdom is known for the quality of its goods.",benefit:"+1 item bonus to Craft Luxuries. When crafting, critical success produces 3 Luxuries instead of 2.",prerequisite:null},{id:"frontier-mentality",name:"Frontier Mentality",level:2,traits:["kingdom"],description:"Your citizens are hardy pioneers.",benefit:"+1 item bonus to Exploration and Wilderness checks. Claiming hexes costs 0 RP.",prerequisite:null},{id:"celebratory-traditions",name:"Celebratory Traditions",level:4,traits:["kingdom"],description:"Your kingdom has beloved holidays and celebrations.",benefit:"Celebrate Holiday costs 0 RP. On success or better, reduce Unrest by 1 additional point.",prerequisite:null},{id:"consolidated-leadership",name:"Consolidated Leadership",level:4,traits:["kingdom"],description:"Your leadership is highly efficient.",benefit:"Gain 1 additional leadership activity per turn. Invested leaders provide +2 instead of +1.",prerequisite:"cooperative-leadership"},{id:"diverse-trade",name:"Diverse Trade",level:4,traits:["kingdom"],description:"Your kingdom trades in many goods.",benefit:"Trade agreements provide +2 RP per turn. Commodity storage increased by 4 for all types.",prerequisite:"free-and-fair"},{id:"famous-scholars",name:"Famous Scholars",level:4,traits:["kingdom"],description:"Your kingdom is known for its learned institutions.",benefit:"+2 item bonus to Creative Solution and Scholarship checks. Libraries and academies cost 10 less RP.",prerequisite:null},{id:"quality-of-life",name:"Quality of Life",level:4,traits:["kingdom"],description:"Your citizens enjoy a high standard of living.",benefit:"Improve Lifestyle always reduces Unrest by at least 1. Consumption decreased by 1.",prerequisite:null},{id:"seasoned-veterans",name:"Seasoned Veterans",level:4,traits:["kingdom"],description:"Your military forces are battle-hardened.",benefit:"+2 item bonus to Warfare checks. Armies gain +1 to attack and Morale.",prerequisite:"civil-war-veterans"},{id:"architectural-wonders",name:"Architectural Wonders",level:6,traits:["kingdom"],description:"Your kingdom builds impressive structures.",benefit:"Level 3 structures cost 10 less RP. Gain +1 Fame when building a structure for the first time.",prerequisite:"civic-planning"},{id:"diplomatic-immunity",name:"Diplomatic Immunity",level:6,traits:["kingdom"],description:"Your diplomatic corps is respected throughout the region.",benefit:"+2 item bonus to all diplomatic activities. Trade agreements cannot be broken by events.",prerequisite:"clever-courtiers"},{id:"legendary-craftspeople",name:"Legendary Craftspeople",level:6,traits:["kingdom"],description:"Your artisans produce works of legendary quality.",benefit:"Craft Luxuries produces +1 Luxury on any success. +2 item bonus to Industry checks.",prerequisite:"expert-craftspeople"},{id:"national-spirit",name:"National Spirit",level:6,traits:["kingdom"],description:"Your citizens are fiercely patriotic.",benefit:"Maximum Unrest cannot exceed 10. When Unrest would exceed 10, gain 1 Fame instead.",prerequisite:null},{id:"vast-territory",name:"Vast Territory",level:6,traits:["kingdom"],description:"Your kingdom encompasses a huge area.",benefit:"Increase the Resource Die by one step. DC modifiers from kingdom size are halved.",prerequisite:"frontier-mentality"},{id:"capital-investment",name:"Capital Investment",level:8,traits:["kingdom"],description:"Your kingdom attracts wealthy investors.",benefit:"Start each turn with +2 RP. Collect Taxes critical success grants +3 RP instead of +2.",prerequisite:null},{id:"eternal-kingdom",name:"Eternal Kingdom",level:8,traits:["kingdom"],description:"Your kingdom is built to last forever.",benefit:"Ignore the first point of Ruin each turn. Ruin thresholds increased by 5.",prerequisite:"enduring-kingdom"},{id:"imperial-ambition",name:"Imperial Ambition",level:10,traits:["kingdom"],description:"Your kingdom seeks to become an empire.",benefit:"Gain +2 to all checks when claiming hexes or establishing settlements. +3 Fame.",prerequisite:"vast-territory"}],Hn=e=>nf.find(t=>t.id===e),P0=(e,t)=>e.prerequisite?t.includes(e.prerequisite):!0,ke={UNEXPLORED:"unexplored",EXPLORED:"explored",CLAIMED:"claimed"},F0={farm:{name:"Farmland",commodity:"food",icon:""},lumber:{name:"Lumber Camp",commodity:"lumber",icon:""},mine:{name:"Mine",commodity:"ore",icon:""},quarry:{name:"Quarry",commodity:"stone",icon:""}},L0={a1:{top:211,left:145},a2:{top:211,left:373},a3:{top:211,left:602},a4:{top:211,left:831},a5:{top:211,left:1059},a6:{top:211,left:1288},a7:{top:211,left:1516},a8:{top:211,left:1745},a9:{top:211,left:1974},a10:{top:211,left:2203},a11:{top:211,left:2432},a12:{top:211,left:2660},a13:{top:211,left:2888},a14:{top:211,left:3117},a15:{top:211,left:3346},a16:{top:211,left:3575},a17:{top:211,left:3803},a18:{top:211,left:4032},a19:{top:211,left:4261},a20:{top:211,left:4490},a21:{top:211,left:4718},a22:{top:211,left:4947},a23:{top:211,left:5176},a24:{top:211,left:5404},a25:{top:211,left:5633},a26:{top:211,left:5862},a27:{top:211,left:6090},b1:{top:408,left:30},b2:{top:408,left:258},b3:{top:408,left:487},b4:{top:408,left:716},b5:{top:408,left:944},b6:{top:408,left:1173},b7:{top:408,left:1402},b8:{top:408,left:1631},b9:{top:408,left:1859},b10:{top:408,left:2088},b11:{top:408,left:2318},b12:{top:408,left:2546},b13:{top:408,left:2774},b14:{top:408,left:3002},b15:{top:408,left:3231},b16:{top:408,left:3460},b17:{top:408,left:3688},b18:{top:408,left:3918},b19:{top:408,left:4146},b20:{top:408,left:4376},b21:{top:408,left:4603},b22:{top:408,left:4833},b23:{top:408,left:5060},b24:{top:408,left:5289},b25:{top:408,left:5518},b26:{top:408,left:5748},b27:{top:408,left:5976},b28:{top:408,left:6204},c1:{top:606,left:144},c2:{top:606,left:373},c3:{top:606,left:602},c4:{top:606,left:830},c5:{top:606,left:1059},c6:{top:606,left:1288},c7:{top:606,left:1516},c8:{top:606,left:1745},c9:{top:606,left:1974},c10:{top:606,left:2203},c11:{top:606,left:2432},c12:{top:606,left:2660},c13:{top:606,left:2888},c14:{top:606,left:3117},c15:{top:606,left:3346},c16:{top:606,left:3574},c17:{top:606,left:3803},c18:{top:606,left:4032},c19:{top:606,left:4261},c20:{top:606,left:4489},c21:{top:606,left:4718},c22:{top:606,left:4947},c23:{top:606,left:5175},c24:{top:606,left:5404},c25:{top:606,left:5633},c26:{top:606,left:5861},c27:{top:606,left:6090},d1:{top:804,left:30},d2:{top:804,left:259},d3:{top:804,left:488},d4:{top:804,left:716},d5:{top:804,left:945},d6:{top:804,left:1174},d7:{top:804,left:1402},d8:{top:804,left:1631},d9:{top:804,left:1860},d10:{top:804,left:2088},d11:{top:804,left:2317},d12:{top:804,left:2546},d13:{top:804,left:2775},d14:{top:804,left:3003},d15:{top:804,left:3232},d16:{top:804,left:3460},d17:{top:804,left:3689},d18:{top:804,left:3918},d19:{top:804,left:4147},d20:{top:804,left:4375},d21:{top:804,left:4604},d22:{top:804,left:4833},d23:{top:804,left:5061},d24:{top:804,left:5290},d25:{top:804,left:5519},d26:{top:804,left:5747},d27:{top:804,left:5976},d28:{top:804,left:6204},e1:{top:1002,left:145},e2:{top:1002,left:373},e3:{top:1002,left:602},e4:{top:1002,left:831},e5:{top:1002,left:1059},e6:{top:1002,left:1288},e7:{top:1002,left:1517},e8:{top:1002,left:1745},e9:{top:1002,left:1974},e10:{top:1002,left:2203},e11:{top:1002,left:2432},e12:{top:1002,left:2661},e13:{top:1002,left:2889},e14:{top:1002,left:3117},e15:{top:1002,left:3346},e16:{top:1002,left:3575},e17:{top:1002,left:3803},e18:{top:1002,left:4032},e19:{top:1002,left:4261},e20:{top:1002,left:4490},e21:{top:1002,left:4718},e22:{top:1002,left:4947},e23:{top:1002,left:5175},e24:{top:1002,left:5404},e25:{top:1002,left:5633},e26:{top:1002,left:5862},e27:{top:1002,left:6090},f1:{top:1199,left:30},f2:{top:1199,left:259},f3:{top:1199,left:488},f4:{top:1199,left:716},f5:{top:1199,left:945},f6:{top:1199,left:1174},f7:{top:1199,left:1402},f8:{top:1199,left:1631},f9:{top:1199,left:1860},f10:{top:1199,left:2088},f11:{top:1199,left:2317},f12:{top:1199,left:2546},f13:{top:1199,left:2774},f14:{top:1199,left:3003},f15:{top:1199,left:3232},f16:{top:1199,left:3460},f17:{top:1199,left:3689},f18:{top:1199,left:3918},f19:{top:1199,left:4146},f20:{top:1199,left:4375},f21:{top:1199,left:4604},f22:{top:1199,left:4832},f23:{top:1199,left:5061},f24:{top:1199,left:5290},f25:{top:1199,left:5519},f26:{top:1199,left:5747},f27:{top:1199,left:5976},f28:{top:1199,left:6204},g1:{top:1397,left:145},g2:{top:1397,left:373},g3:{top:1397,left:602},g4:{top:1397,left:831},g5:{top:1397,left:1059},g6:{top:1397,left:1288},g7:{top:1397,left:1517},g8:{top:1397,left:1745},g9:{top:1397,left:1974},g10:{top:1397,left:2203},g11:{top:1397,left:2431},g12:{top:1397,left:2660},g13:{top:1397,left:2889},g14:{top:1397,left:3118},g15:{top:1397,left:3346},g16:{top:1397,left:3575},g17:{top:1397,left:3804},g18:{top:1397,left:4033},g19:{top:1397,left:4261},g20:{top:1397,left:4490},g21:{top:1397,left:4718},g22:{top:1397,left:4947},g23:{top:1397,left:5175},g24:{top:1397,left:5404},g25:{top:1397,left:5633},g26:{top:1397,left:5862},g27:{top:1397,left:6091},h1:{top:1594,left:30},h2:{top:1594,left:259},h3:{top:1594,left:487},h4:{top:1594,left:716},h5:{top:1594,left:945},h6:{top:1594,left:1174},h7:{top:1594,left:1402},h8:{top:1594,left:1631},h9:{top:1594,left:1860},h10:{top:1594,left:2088},h11:{top:1594,left:2317},h12:{top:1594,left:2546},h13:{top:1594,left:2774},h14:{top:1594,left:3003},h15:{top:1594,left:3232},h16:{top:1594,left:3460},h17:{top:1594,left:3689},h18:{top:1594,left:3918},h19:{top:1594,left:4147},h20:{top:1594,left:4375},h21:{top:1594,left:4604},h22:{top:1594,left:4833},h23:{top:1594,left:5061},h24:{top:1594,left:5290},h25:{top:1594,left:5519},h26:{top:1594,left:5747},h27:{top:1594,left:5976},h28:{top:1594,left:6205},i1:{top:1792,left:145},i2:{top:1792,left:373},i3:{top:1792,left:602},i4:{top:1792,left:831},i5:{top:1792,left:1059},i6:{top:1792,left:1288},i7:{top:1792,left:1517},i8:{top:1792,left:1745},i9:{top:1792,left:1974},i10:{top:1792,left:2203},i11:{top:1792,left:2431},i12:{top:1792,left:2660},i13:{top:1792,left:2888},i14:{top:1792,left:3117},i15:{top:1792,left:3346},i16:{top:1792,left:3575},i17:{top:1792,left:3803},i18:{top:1792,left:4032},i19:{top:1792,left:4261},i20:{top:1792,left:4489},i21:{top:1792,left:4718},i22:{top:1792,left:4947},i23:{top:1792,left:5175},i24:{top:1792,left:5404},i25:{top:1792,left:5633},i26:{top:1792,left:5862},i27:{top:1792,left:6090},j1:{top:1989,left:30},j2:{top:1989,left:259},j3:{top:1989,left:487},j4:{top:1989,left:716},j5:{top:1989,left:945},j6:{top:1989,left:1174},j7:{top:1989,left:1402},j8:{top:1989,left:1631},j9:{top:1989,left:1860},j10:{top:1989,left:2088},j11:{top:1989,left:2317},j12:{top:1989,left:2546},j13:{top:1989,left:2774},j14:{top:1989,left:3003},j15:{top:1989,left:3232},j16:{top:1989,left:3460},j17:{top:1989,left:3689},j18:{top:1989,left:3918},j19:{top:1989,left:4147},j20:{top:1989,left:4375},j21:{top:1989,left:4604},j22:{top:1989,left:4833},j23:{top:1989,left:5061},j24:{top:1989,left:5290},j25:{top:1989,left:5519},j26:{top:1989,left:5747},j27:{top:1989,left:5976},j28:{top:1989,left:6205}},bc=6460,jc=2260,Cl={village:{icon:"Building",color:"#D4AF37",label:"Settlement"},house:{icon:"Home",color:"#CD853F",label:"House/Building"},camp:{icon:"Tent",color:"#FF6B35",label:"Camp"},cabane:{icon:"Store",color:"#8B4513",label:"Hut/Shack"},mine:{icon:"Hammer",color:"#708090",label:"Mine"},ruin:{icon:"Skull",color:"#696969",label:"Ruin/Dungeon"},dolmen:{icon:"Landmark",color:"#6B5B95",label:"Temple/Shrine"},farm:{icon:"Wheat",color:"#DAA520",label:"Farmland"},tree:{icon:"TreePine",color:"#228B22",label:"Lumber Camp"},deadtree:{icon:"TreeDeciduous",color:"#8B4513",label:"Notable Tree"},mushroom:{icon:"Sparkles",color:"#9932CC",label:"Magic Resource"},rock:{icon:"Mountain",color:"#A0A0A0",label:"Quarry"},lake:{icon:"Fish",color:"#4169E1",label:"Fishing Spot"},sign:{icon:"MapPin",color:"#DEB887",label:"Location Marker"},bridge:{icon:"Link2",color:"#A0522D",label:"Bridge/Crossing"},battle:{icon:"Swords",color:"#DC143C",label:"Battle Site"},footmen:{icon:"Footprints",color:"#B22222",label:"Encounter"},swamp:{icon:"Droplet",color:"#556B2F",label:"Swamp/Hazard"},hill:{icon:"Mountain",color:"#8FBC8F",label:"Hill/Island"},lizard:{icon:"Ghost",color:"#2E8B57",label:"Monster Lair"},bandit:{icon:"Skull",color:"#8B0000",label:"Bandit Camp"},enemy:{icon:"Swords",color:"#DC143C",label:"Enemy Force"},friendly:{icon:"Users",color:"#4169E1",label:"Friendly Force"},patrol:{icon:"Footprints",color:"#228B22",label:"Patrol Route"}},D0=[{type:"camp",top:751.889,left:4129.44,title:"Bandit Camp - (where Hans Gruber came from)",faction:"None"},{type:"cabane",top:358,left:4821,title:"Smoking Hut - Alchemist - sells potions",faction:"None"},{type:"sign",top:824,left:4875,title:"Nettle's crossing - dude wants us to kill the Staglord",faction:"None"},{type:"camp",top:755,left:4308.2,title:"Worksite (mine)",faction:"1"},{type:"camp",top:923,left:4465,title:"Worksite (lumber)",faction:"1"},{type:"village",top:1327,left:4215,title:"Fort on a hill with wooden palisades. (60-80 ft wide)",faction:"1"},{type:"dolmen",top:716,left:3883,title:"Corrupted Temple - Druids",faction:"None"},{type:"mine",top:740,left:4535,title:"Worksite - 2 ore per turn",faction:"1"},{type:"lake",top:1607,left:5339.2,title:"Lake Silverstep - Good fishing",faction:"None"},{type:"swamp",top:1302.8,left:3632.2,title:"Swamps and marshlands in this direction",faction:"None"},{type:"hill",top:1770,left:4040,title:"Island (Candlemeer) also haunted apparently",faction:"None"},{type:"house",top:1523.47,left:4120.8,title:"Hag - Elga Vernex",faction:"None"},{type:"ruin",top:1346.8,left:4701.8,title:"Gravestone, skeleton, fire sword",faction:"None"},{type:"mushroom",top:530,left:4230,title:"Magic radish tree",faction:"None"},{type:"deadtree",top:556,left:4681,title:"Claw Tree Map location - X marks the spot!",faction:"None"},{type:"tree",top:759,left:4591.8,title:"Old Sycamore tree - wedding ring?",faction:"None"},{type:"deadtree",top:1120,left:4116.8,title:"Fang Berries",faction:"None"},{type:"mine",top:711,left:4374,title:"Gold Mine",faction:"1"},{type:"farm",top:1109,left:4186.5,title:"Farmland",faction:"1"},{type:"footmen",top:690,left:4610,title:"Kobold body found - ambush site, killed within last 2 days, torn up chain mail, no other items of value",faction:"1"},{type:"mushroom",top:1950.47,left:4575.8,title:"Hags Mushrooms are around here somewhere",faction:"None"},{type:"lizard",top:478,left:4274,title:"Kobolds - They wanted to know if we liked radishes, I said yes. They didn't like that...",faction:"None"},{type:"battle",top:717,left:5010,title:"Horse skeletons and other bones - died from natural causes? - nope, died from deadly spiders",faction:"None"},{type:"bridge",top:950,left:4219,title:"Rope over bridge over troubled waters",faction:"None"},{type:"rock",top:1330,left:4494,title:"Quarry Worksite",faction:"1"},{type:"farm",top:1107,left:4377.75,title:"Farm",faction:"1"},{type:"lizard",top:1767,left:3819,title:"Lizard Men - Almost blew my cover... phew",faction:"None"}],Pr=230,zt=264,R0=(e,t)=>[`${e+Pr*.5},${t}`,`${e+Pr},${t+zt*.25}`,`${e+Pr},${t+zt*.75}`,`${e+Pr*.5},${t+zt}`,`${e},${t+zt*.75}`,`${e},${t+zt*.25}`].join(" "),ia={Tent:y0,Store:Xd,MapPin:bl,Building:wl,Landmark:s0,Skull:g0,Fish:Jp,Droplet:Xp,TreeDeciduous:x0,Sparkles:Gd,Ghost:t0,Swords:jl,Footprints:e0,Link2:i0,Hammer:Gr,Home:tl,Wheat:hr,TreePine:Gn,Mountain:Wr,Flag:fr,Shovel:h0,Gem:Ko},I0=({poi:e,onClick:t,onDragStart:r,onContextMenu:n,isDragging:s})=>{const i=Cl[e.type]||{icon:"Flag",color:"#999"},o=ia[i.icon]||fr,a=d=>{d.stopPropagation(),r&&r(e,d)},c=d=>{n&&n(d,e)};return l.jsxs("g",{transform:`translate(${e.left}, ${e.top})`,onClick:d=>{d.stopPropagation(),t&&t(e)},onMouseDown:a,onContextMenu:c,style:{cursor:s?"grabbing":"grab"},className:"poi-marker",children:[l.jsx("circle",{cx:"0",cy:"0",r:"22",fill:s?"rgba(50,50,80,0.95)":"rgba(0,0,0,0.9)",stroke:s?"#FFD700":i.color,strokeWidth:s?4:3}),l.jsx("foreignObject",{x:"-14",y:"-14",width:"28",height:"28",children:l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:l.jsx(o,{size:22,color:i.color,strokeWidth:2})})})]})},$0=({coord:e,hex:t,position:r,isSelected:n,onClick:s,onContextMenu:i,getFactionColor:o,defaultColor:a})=>{if(!r)return null;const c=r.left,d=r.top,p=c+Pr/2,g=d+zt/2,{status:h,workSite:w,settlement:k,faction:b}=t||{},T=b&&(o==null?void 0:o(b))||a;let m="transparent",u=0,f="transparent",y=0;h===ke.UNEXPLORED?(m="#1a1a2e",u=1):h===ke.EXPLORED?(m="#22c55e",u=.15,f="#22c55e",y=2):h===ke.CLAIMED&&(m=T,u=.3,f=T,y=3),n&&(f="#D4AF37",y=4);const L=R0(c,d);return l.jsxs("g",{onClick:()=>s&&s(t,e),onContextMenu:S=>i&&i(S,t,e),style:{cursor:"pointer"},children:[l.jsx("polygon",{points:L,fill:m,fillOpacity:u,stroke:f,strokeWidth:y,className:"transition-all duration-200 hover:fill-opacity-40"}),k&&l.jsxs("g",{transform:`translate(${p-28}, ${g-28})`,children:[l.jsx("circle",{cx:"28",cy:"28",r:"32",fill:"#2d004d",stroke:"#D4AF37",strokeWidth:"3"}),l.jsx(tl,{x:"8",y:"8",size:40,stroke:"#D4AF37",strokeWidth:2})]}),w&&!k&&l.jsxs("g",{transform:`translate(${p-22}, ${g-22})`,children:[l.jsx("circle",{cx:"22",cy:"22",r:"26",fill:"rgba(0,0,0,0.8)",stroke:"rgba(255,255,255,0.4)",strokeWidth:"2"}),w==="farm"&&l.jsx(hr,{x:"6",y:"6",size:32,stroke:"#FFA500",strokeWidth:2}),w==="lumber"&&l.jsx(Gn,{x:"6",y:"6",size:32,stroke:"#228B22",strokeWidth:2}),w==="mine"&&l.jsx(Gr,{x:"6",y:"6",size:32,stroke:"#A0A0A0",strokeWidth:2}),w==="quarry"&&l.jsx(Wr,{x:"6",y:"6",size:32,stroke:"#808080",strokeWidth:2})]}),(t==null?void 0:t.notes)&&l.jsxs("g",{transform:`translate(${p+Pr/4}, ${g-zt/4})`,children:[l.jsx("circle",{cx:"0",cy:"0",r:"14",fill:"rgba(255,200,50,0.9)",stroke:"#333",strokeWidth:"1"}),l.jsx(Yd,{x:"-8",y:"-8",size:16,stroke:"#333",strokeWidth:2})]}),l.jsx("text",{x:p,y:k||w||t!=null&&t.notes?g+zt*.32:g+6,textAnchor:"middle",fontSize:"18",fill:"rgba(255,255,255,0.9)",fontWeight:"bold",style:{textShadow:"2px 2px 3px rgba(0,0,0,0.9), -1px -1px 2px rgba(0,0,0,0.7)",pointerEvents:"none"},children:e.toUpperCase()})]})},z0=({hex:e,coord:t,onClose:r,onAction:n,kingdomName:s})=>{if(!e||!t)return null;const i=e.workSite?F0[e.workSite]:null;return l.jsxs("div",{className:"absolute top-4 right-4 w-72 p-4 z-50 rounded-lg border border-yellow-600/30",style:{backgroundColor:"rgba(15, 15, 25, 0.95)"},children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("div",{children:l.jsxs("h3",{className:"text-lg font-semibold text-yellow-400",children:["Hex ",t.toUpperCase()]})}),l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:l.jsx(Sl,{size:18})})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Status"}),l.jsxs("div",{className:`text-sm font-medium ${e.status===ke.CLAIMED?"text-green-400":e.status===ke.EXPLORED?"text-blue-400":"text-gray-500"}`,children:[e.status===ke.CLAIMED&&`Claimed by ${s}`,e.status===ke.EXPLORED&&"Explored",e.status===ke.UNEXPLORED&&"Unexplored (Fog of War)"]})]}),i&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Work Site"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-yellow-400",children:i.name}),l.jsxs("span",{className:"text-gray-400",children:["  +1 ",i.commodity,"/turn"]})]})]}),e.settlement&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Settlement"}),l.jsx("div",{className:"text-sm text-yellow-400",children:e.settlement})]}),e.notes&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Notes"}),l.jsx("div",{className:"text-sm text-gray-300",children:e.notes})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-3 border-t border-white/10",children:[e.status===ke.UNEXPLORED&&l.jsxs("button",{onClick:()=>n("explore",e,t),className:"btn-secondary text-xs flex items-center gap-1",children:[l.jsx(Zi,{size:12})," Explore"]}),e.status===ke.EXPLORED&&l.jsxs("button",{onClick:()=>n("claim",e,t),className:"btn-royal text-xs flex items-center gap-1",children:[l.jsx(fr,{size:12})," Claim Hex (1 RP)"]}),e.status===ke.CLAIMED&&!e.workSite&&!e.settlement&&l.jsxs("button",{onClick:()=>n("worksite",e,t),className:"btn-secondary text-xs flex items-center gap-1",children:[l.jsx(Gr,{size:12})," Work Site (2 RP)"]})]})]})},A0=({hex:e,coord:t,onSelect:r,onClose:n})=>{if(!e)return null;const s=[{id:"farm",name:"Farmland",icon:"",desc:"Produces Food"},{id:"lumber",name:"Lumber Camp",icon:"",desc:"Produces Lumber"},{id:"mine",name:"Mine",icon:"",desc:"Produces Ore"},{id:"quarry",name:"Quarry",icon:"",desc:"Produces Stone"}];return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"glass-card p-6 max-w-md w-full",children:[l.jsxs("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:["Establish Work Site - ",t.toUpperCase()]}),l.jsx("div",{className:"space-y-2 mb-4",children:s.map(i=>l.jsxs("button",{onClick:()=>r(i.id),className:"w-full p-3 bg-white/5 hover:bg-white/10 rounded border border-white/10 hover:border-yellow-500/50 text-left flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:i.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-yellow-400",children:i.name}),l.jsx("div",{className:"text-xs text-gray-400",children:i.desc})]})]},i.id))}),l.jsx("button",{onClick:n,className:"btn-secondary w-full",children:"Cancel"})]})})},_0=({x:e,y:t,items:r,onClose:n})=>(C.useEffect(()=>{const s=()=>n();return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[n]),l.jsx("div",{className:"fixed z-[100] bg-gray-900/95 border border-yellow-600/30 rounded-lg shadow-xl py-1 min-w-[180px]",style:{left:e,top:t},children:r.map((s,i)=>s.separator?l.jsx("div",{className:"border-t border-white/10 my-1"},i):s.disabled?l.jsx("div",{className:"px-4 py-1 text-xs text-gray-500 uppercase tracking-wide",children:s.label},i):l.jsxs("button",{onClick:()=>{var o;(o=s.action)==null||o.call(s),n()},className:`w-full px-4 py-2 text-left text-sm hover:bg-yellow-600/20 flex items-center gap-2 ${s.checked?"text-yellow-400":"text-gray-200 hover:text-yellow-400"}`,children:[s.color&&l.jsx("div",{className:"w-3 h-3 rounded",style:{background:s.color}}),s.icon&&!s.color&&l.jsx(s.icon,{size:16}),l.jsx("span",{className:"flex-1",children:s.label}),s.checked&&l.jsx("span",{className:"text-green-400",children:""})]},i))})),O0=({type:e,isSelected:t,onClick:r})=>{const n=Cl[e]||{icon:"Flag",color:"#999",label:e},s=ia[n.icon]||fr;return l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-3 py-2 rounded transition-colors ${t?"bg-yellow-600/30 border border-yellow-500":"bg-gray-800 hover:bg-gray-700 border border-transparent"}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(0,0,0,0.8)",border:`2px solid ${n.color}`},children:l.jsx(s,{size:18,color:n.color})}),l.jsx("span",{className:t?"text-yellow-400":"text-gray-200",children:n.label})]})},B0=({poi:e,isNew:t,onSave:r,onDelete:n,onClose:s})=>{var m;const[i,o]=C.useState((e==null?void 0:e.title)||""),[a,c]=C.useState((e==null?void 0:e.type)||"camp"),[d,p]=C.useState((e==null?void 0:e.elementType)||"building"),g=[{id:"building",label:"Structures",icon:wl},{id:"resources",label:"Resources",icon:hr},{id:"misc",label:"Points of Interest",icon:bl},{id:"armies",label:"Creatures & Forces",icon:jl}],h={building:["village","house","camp","cabane","mine","ruin","dolmen"],resources:["farm","tree","deadtree","mushroom","rock","lake"],misc:["sign","bridge","battle","footmen","swamp","hill"],armies:["lizard","bandit","enemy","friendly","patrol"]},w=u=>{p(u),c(h[u][0])},k=()=>{r({...e,title:i,type:a,elementType:d})},b=Cl[a]||{icon:"Flag",color:"#999",label:a},T=ia[b.icon]||fr;return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:l.jsxs("div",{className:"bg-gray-900/95 border border-yellow-600/30 rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:t?"Add New Marker":"Edit Marker"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Category"}),l.jsx("div",{className:"flex gap-1",children:g.map(u=>{const f=u.icon;return l.jsxs("button",{onClick:()=>w(u.id),className:`flex-1 px-2 py-2 rounded text-xs flex flex-col items-center gap-1 transition-colors ${d===u.id?"bg-yellow-600/30 border border-yellow-500 text-yellow-400":"bg-gray-800 hover:bg-gray-700 border border-gray-700 text-gray-400"}`,children:[l.jsx(f,{size:16}),l.jsx("span",{children:u.label})]},u.id)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Icon Type"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto pr-1",children:(m=h[d])==null?void 0:m.map(u=>l.jsx(O0,{type:u,isSelected:a===u,onClick:()=>c(u)},u))})]}),l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/50 rounded border border-gray-700",children:[l.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(0,0,0,0.9)",border:`3px solid ${b.color}`},children:l.jsx(T,{size:28,color:b.color})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Preview"}),l.jsx("div",{className:"text-white font-medium",children:b.label})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Title / Notes"}),l.jsx("textarea",{value:i,onChange:u=>o(u.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white h-24",placeholder:"Enter description or notes..."})]})]}),l.jsxs("div",{className:"flex gap-2 mt-6",children:[l.jsx("button",{onClick:k,className:"flex-1 bg-yellow-600 hover:bg-yellow-500 text-black font-medium py-2 px-4 rounded",children:t?"Add Marker":"Save Changes"}),!t&&n&&l.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded",children:l.jsx(ta,{size:18})}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})]})})};function H0({hexes:e={},factions:t={},onHexUpdate:r,onFactionsUpdate:n,onPOIUpdate:s,kingdomName:i="Nauthgard",initialPOIs:o=null}){var aa;const a=()=>{const E=Object.values(t).find(W=>W.isPlayer);return(E==null?void 0:E.color)||"#6366f1"},c=E=>{var W;return E?((W=t[E])==null?void 0:W.color)||"#6366f1":null},[d,p]=C.useState(!1),[g,h]=C.useState(null),[w,k]=C.useState(null),[b,T]=C.useState({x:3500,y:400,width:1500,height:900}),[m,u]=C.useState(!1),[f,y]=C.useState({x:0,y:0}),[L,S]=C.useState(!1),[v,M]=C.useState(null),[z,H]=C.useState(null),[D,G]=C.useState(null),[X,K]=C.useState({building:!0,resources:!0,misc:!0,armies:!0}),[B,ue]=C.useState(()=>{const E=localStorage.getItem("kingdomManager_poiPositions");if(E)try{return JSON.parse(E)}catch(Q){console.warn("Failed to parse saved POI positions",Q)}return(o||D0).filter(Q=>Q.faction!=="1").map((Q,oe)=>({...Q,id:Q.id||`poi-${oe}`}))}),[de,I]=C.useState(()=>{const E=localStorage.getItem("kingdomManager_partyPosition");if(E)try{return JSON.parse(E)}catch{}return{x:4200,y:1300}}),[U,q]=C.useState(!1),A=C.useRef(null);C.useEffect(()=>{localStorage.setItem("kingdomManager_poiPositions",JSON.stringify(B))},[B]),C.useEffect(()=>{localStorage.setItem("kingdomManager_partyPosition",JSON.stringify(de))},[de]);const Y=g?e[g]:null,ne=C.useCallback(E=>{v||(h(null),k(W=>(W==null?void 0:W.id)===E.id?null:E))},[v]),ie=C.useCallback((E,W)=>{M(E),k(null)},[]),se=C.useCallback(E=>{if(!v||!A.current)return;const W=A.current;W.getBoundingClientRect();const Q=W.createSVGPoint();Q.x=E.clientX,Q.y=E.clientY;const oe=Q.matrixTransform(W.getScreenCTM().inverse());ue(pt=>pt.map(Qr=>Qr.id===v.id?{...Qr,left:oe.x,top:oe.y}:Qr))},[v]),Se=C.useCallback(()=>{if(v&&s){const E=B.find(W=>W.id===v.id);E&&s(E)}M(null)},[v,B,s]),Ie=C.useCallback(E=>{E.stopPropagation(),q(!0)},[]),Ze=C.useCallback(E=>{if(!U||!A.current)return;const W=A.current,Q=W.createSVGPoint();Q.x=E.clientX,Q.y=E.clientY;const oe=Q.matrixTransform(W.getScreenCTM().inverse());I({x:oe.x,y:oe.y})},[U]),Je=C.useCallback(()=>{q(!1)},[]),kt=C.useCallback(E=>{E.preventDefault();const W=A.current;if(!W)return;const Q=W.createSVGPoint();Q.x=E.clientX,Q.y=E.clientY;const oe=Q.matrixTransform(W.getScreenCTM().inverse());H({x:E.clientX,y:E.clientY,svgX:oe.x,svgY:oe.y,type:"map"})},[]),N=C.useCallback((E,W)=>{E.preventDefault(),E.stopPropagation(),H({x:E.clientX,y:E.clientY,type:"poi",target:W})},[]),$=C.useCallback((E,W,Q)=>{E.preventDefault(),E.stopPropagation(),H({x:E.clientX,y:E.clientY,type:"hex",target:W,coord:Q})},[]),j=C.useCallback(E=>{G({poi:{id:`poi-${Date.now()}`,type:"camp",elementType:"building",title:"",left:E.x,top:E.y,faction:"None"},isNew:!0})},[]),x=C.useCallback(E=>{G({poi:E,isNew:!1})},[]),P=C.useCallback(E=>{ue(W=>W.find(oe=>oe.id===E.id)?W.map(oe=>oe.id===E.id?E:oe):[...W,E]),G(null)},[]),F=C.useCallback(E=>{ue(W=>W.filter(Q=>Q.id!==E)),G(null),k(null)},[]),V=C.useCallback(()=>{if(!z)return[];if(z.type==="poi")return[{icon:u0,label:"Edit Marker",action:()=>x(z.target)},{icon:ta,label:"Delete Marker",action:()=>F(z.target.id)}];if(z.type==="hex"){const E=z.target,W=z.coord,Q=[];return(E==null?void 0:E.status)!==ke.EXPLORED&&(E==null?void 0:E.status)!==ke.CLAIMED&&Q.push({icon:Zi,label:"Mark Explored",action:()=>r&&r({...E,coord:W,status:ke.EXPLORED})}),(E==null?void 0:E.status)===ke.EXPLORED&&Q.push({icon:fr,label:"Claim Hex",action:()=>r&&r({...E,coord:W,status:ke.CLAIMED,faction:"1"})}),(E==null?void 0:E.status)===ke.CLAIMED&&Object.keys(t).length>0&&(Q.push({separator:!0}),Q.push({label:"Assign to Faction:",disabled:!0}),Object.values(t).forEach(oe=>{Q.push({icon:fr,label:oe.name,color:oe.color,checked:(E==null?void 0:E.faction)===oe.id,action:()=>r&&r({...E,coord:W,faction:oe.id})})})),Q}return[{icon:Jo,label:"Add Marker Here",action:()=>j({x:z.svgX,y:z.svgY})},{separator:!0},{icon:a0,label:"Move Party Here",action:()=>I({x:z.svgX,y:z.svgY})}]},[z,x,F,j,t,r]),ee=C.useCallback((E,W)=>{k(null),h(Q=>Q===W?null:W)},[]),te=C.useCallback((E,W,Q)=>{if(r)switch(E){case"explore":r({...W,coord:Q,status:ke.EXPLORED});break;case"claim":r({...W,coord:Q,status:ke.CLAIMED,faction:"1"});break;case"worksite":S(!0);break}},[r]),ye=C.useCallback(E=>{!Y||!g||!r||(r({...Y,coord:g,workSite:E}),S(!1))},[Y,g,r]),Pe=E=>{T(W=>{const Q=E>0?1.25:.8,oe=Math.max(500,Math.min(4e3,W.width*Q)),pt=Math.max(300,Math.min(2200,W.height*Q)),Qr=(W.width-oe)/2,df=(W.height-pt)/2;return{x:W.x+Qr,y:W.y+df,width:oe,height:pt}})},mt=E=>{E.button===0&&!v&&!U&&(u(!0),y({x:E.clientX,y:E.clientY}))},gr=E=>{if(U){Ze(E);return}if(v){se(E);return}if(!m||!A.current)return;const W=A.current.getBoundingClientRect(),Q=(E.clientX-f.x)*(b.width/W.width),oe=(E.clientY-f.y)*(b.height/W.height);T(pt=>({...pt,x:Math.max(0,Math.min(bc-pt.width,pt.x-Q)),y:Math.max(0,Math.min(jc-pt.height,pt.y-oe))})),y({x:E.clientX,y:E.clientY})},Xn=()=>{U&&Je(),v&&Se(),u(!1)},cf=E=>{E.preventDefault(),Pe(E.deltaY)},uf=C.useMemo(()=>Object.entries(L0).map(([E,W])=>({coord:E,position:W,hex:e[E]||{status:ke.UNEXPLORED}})),[e]);return l.jsxs("div",{className:"relative w-full h-full min-h-[600px] bg-black rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"absolute top-4 left-4 z-40 flex gap-2",children:[l.jsx("button",{onClick:()=>Pe(-1),className:"p-2 bg-black/70 rounded hover:bg-black/90",title:"Zoom In",children:l.jsx(Kd,{size:18})}),l.jsx("button",{onClick:()=>Pe(1),className:"p-2 bg-black/70 rounded hover:bg-black/90",title:"Zoom Out",children:l.jsx(Zd,{size:18})})]}),l.jsx("div",{className:"absolute bottom-4 left-4 z-40 glass-card p-3 text-xs",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[Object.values(t).map(E=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded",style:{background:E.color}}),l.jsx("span",{children:E.name})]},E.id)),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-green-600/50"}),l.jsx("span",{children:"Explored"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-black/70"}),l.jsx("span",{children:"Fog"})]}),l.jsx("button",{onClick:()=>p(!0),className:"ml-2 px-2 py-1 bg-yellow-600/20 hover:bg-yellow-600/40 rounded text-yellow-400",children:"+ Factions"})]})}),l.jsxs("svg",{ref:A,viewBox:`${b.x} ${b.y} ${b.width} ${b.height}`,className:"w-full h-full",onMouseDown:mt,onMouseMove:gr,onMouseUp:Xn,onMouseLeave:Xn,onWheel:cf,onContextMenu:kt,style:{cursor:v||m?"grabbing":"grab"},preserveAspectRatio:"xMidYMid slice",children:[l.jsx("image",{href:"/pathfinder-kingdom-manager/stolen-lands-map.png",x:"0",y:"0",width:bc,height:jc}),uf.map(({coord:E,position:W,hex:Q})=>l.jsx($0,{coord:E,hex:Q,position:W,isSelected:g===E,onClick:ee,onContextMenu:$,getFactionColor:c,defaultColor:a()},E)),B.filter(E=>X[E.elementType]!==!1).map(E=>l.jsx(I0,{poi:E,onClick:ne,onDragStart:ie,onContextMenu:N,isDragging:(v==null?void 0:v.id)===E.id},E.id)),l.jsxs("g",{transform:`translate(${de.x}, ${de.y})`,onMouseDown:Ie,style:{cursor:U?"grabbing":"grab"},children:[l.jsx("circle",{cx:"0",cy:"0",r:"30",fill:"rgba(255,215,0,0.3)"}),l.jsx("circle",{cx:"0",cy:"0",r:"24",fill:U?"#FFD700":"#1a1a2e",stroke:"#FFD700",strokeWidth:U?5:3}),l.jsx("foreignObject",{x:"-16",y:"-16",width:"32",height:"32",children:l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:l.jsx(Ji,{size:26,color:"#FFD700",strokeWidth:2})})}),l.jsx("text",{y:"42",textAnchor:"middle",fontSize:"14",fill:"#FFD700",fontWeight:"bold",style:{textShadow:"1px 1px 2px black, -1px -1px 2px black"},children:"PARTY"})]})]}),l.jsx(z0,{hex:Y,coord:g,onClose:()=>h(null),onAction:te,kingdomName:i}),w&&l.jsxs("div",{className:"absolute top-4 right-4 w-72 p-4 z-50 rounded-lg border border-yellow-600/30",style:{backgroundColor:"rgba(15, 15, 25, 0.95)"},children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-yellow-400",children:((aa=Cl[w.type])==null?void 0:aa.label)||"Point of Interest"}),l.jsx("button",{onClick:()=>k(null),className:"text-gray-400 hover:text-white",children:l.jsx(Sl,{size:18})})]}),l.jsx("div",{className:"text-sm text-gray-300",children:w.title}),w.faction==="1"&&l.jsxs("div",{className:"mt-2 text-xs text-green-400",children:[" Controlled by ",i]})]}),L&&l.jsx(A0,{hex:Y,coord:g,onSelect:ye,onClose:()=>S(!1)}),l.jsxs("div",{className:"absolute top-4 right-4 z-40 bg-gray-900/90 rounded-lg p-3 border border-white/10",children:[l.jsxs("div",{className:"text-xs text-gray-400 mb-2 flex items-center gap-1",children:[l.jsx(Zi,{size:12})," Visibility"]}),l.jsx("div",{className:"space-y-1",children:[{id:"building",label:"Structures",icon:wl},{id:"resources",label:"Resources",icon:hr},{id:"misc",label:"Points of Interest",icon:bl},{id:"armies",label:"Creatures",icon:jl}].map(E=>l.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:X[E.id],onChange:W=>K(Q=>({...Q,[E.id]:W.target.checked})),className:"rounded"}),l.jsx(E.icon,{size:12,className:X[E.id]?"text-yellow-400":"text-gray-500"}),l.jsx("span",{className:X[E.id]?"text-white":"text-gray-500",children:E.label})]},E.id))})]}),z&&l.jsx(_0,{x:z.x,y:z.y,items:V(),onClose:()=>H(null)}),D&&l.jsx(B0,{poi:D.poi,isNew:D.isNew,onSave:P,onDelete:D.isNew?null:()=>F(D.poi.id),onClose:()=>G(null)}),d&&l.jsx(U0,{factions:t,onUpdate:E=>{n&&n(E)},onClose:()=>p(!1)})]})}function U0({factions:e,onUpdate:t,onClose:r}){const[n,s]=C.useState({...e}),[i,o]=C.useState(null),[a,c]=C.useState({name:"",color:"#ef4444",isPlayer:!1}),d=["#6366f1","#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#8b5cf6","#ec4899","#6b7280","#1e293b"],p=()=>{if(!a.name.trim())return;const k=`faction-${Date.now()}`;s(b=>({...b,[k]:{id:k,...a,name:a.name.trim()}})),c({name:"",color:"#ef4444",isPlayer:!1})},g=(k,b)=>{s(T=>({...T,[k]:{...T[k],...b}}))},h=k=>{var b;if((b=n[k])!=null&&b.isPlayer){alert("Cannot delete the player faction!");return}s(T=>{const{[k]:m,...u}=T;return u})},w=()=>{t(n),r()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:l.jsxs("div",{className:"bg-gray-900/95 border border-yellow-600/30 rounded-lg p-6 max-w-lg w-full max-h-[80vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Manage Factions"}),l.jsx("div",{className:"space-y-3 mb-6",children:Object.values(n).map(k=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800 rounded-lg",children:[l.jsx("input",{type:"color",value:k.color,onChange:b=>g(k.id,{color:b.target.value}),className:"w-8 h-8 rounded cursor-pointer"}),i===k.id?l.jsx("input",{type:"text",value:k.name,onChange:b=>g(k.id,{name:b.target.value}),onBlur:()=>o(null),onKeyDown:b=>b.key==="Enter"&&o(null),className:"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white",autoFocus:!0}):l.jsx("span",{className:"flex-1 text-white cursor-pointer hover:text-yellow-400",onClick:()=>o(k.id),children:k.name}),k.isPlayer&&l.jsx("span",{className:"text-xs bg-yellow-600 text-black px-2 py-0.5 rounded",children:"PLAYER"}),!k.isPlayer&&l.jsx("button",{onClick:()=>h(k.id),className:"text-red-400 hover:text-red-300 p-1",children:l.jsx(ta,{size:16})})]},k.id))}),l.jsxs("div",{className:"border-t border-gray-700 pt-4 mb-4",children:[l.jsx("h4",{className:"text-sm text-gray-400 mb-2",children:"Add New Faction"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:a.color,onChange:k=>c(b=>({...b,color:k.target.value})),className:"w-8 h-8 rounded cursor-pointer"}),l.jsx("input",{type:"text",value:a.name,onChange:k=>c(b=>({...b,name:k.target.value})),placeholder:"Faction name...",className:"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white",onKeyDown:k=>k.key==="Enter"&&p()}),l.jsx("button",{onClick:p,disabled:!a.name.trim(),className:`px-3 py-2 rounded ${a.name.trim()?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-700 text-gray-500"}`,children:"Add"})]}),l.jsx("div",{className:"flex gap-1 mt-2",children:d.map(k=>l.jsx("button",{onClick:()=>c(b=>({...b,color:k})),className:`w-6 h-6 rounded ${a.color===k?"ring-2 ring-white":""}`,style:{background:k}},k))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:w,className:"flex-1 bg-yellow-600 hover:bg-yellow-500 text-black font-medium py-2 px-4 rounded",children:"Save Changes"}),l.jsx("button",{onClick:r,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})]})})}const W0=(e,t)=>{const r=e.kingdomFeats||[];let n=0,s=null;for(const i of r){const o=q0(i,t);if(o>n){n=o;const a=Hn(i);s=(a==null?void 0:a.name)||i}}return{bonus:n,source:s}},V0=(e,t)=>{const r=e.kingdomFeats||[];let n=0,s=null;for(const i of r){const o=Y0(i,t);if(o>n){n=o;const a=Hn(i);s=(a==null?void 0:a.name)||i}}return{bonus:n,source:s}},q0=(e,t)=>{const r=(t==null?void 0:t.toLowerCase())||"";switch(e){case"crush-dissent":return r==="quell-unrest"?1:0;case"experienced-farmers":return r==="harvest-crops"?1:0;case"folk-magic":return r==="provide-care"?1:0;case"free-and-fair":return r==="establish-trade-agreement"?1:0;case"practical-magic":return r==="supernatural-solution"?1:0;case"famous-scholars":return r==="creative-solution"?2:0;case"expert-craftspeople":return r==="craft-luxuries"?1:0;case"legendary-craftspeople":return r==="craft-luxuries"?2:0;default:return 0}},Y0=(e,t)=>{const r=(t==null?void 0:t.toLowerCase())||"";switch(e){case"fortified-fiefs":return r==="defense"?1:0;case"insider-trading":return r==="trade"?1:0;case"civil-war-veterans":return r==="warfare"?1:0;case"seasoned-veterans":return r==="warfare"?2:0;case"frontier-mentality":return["exploration","wilderness"].includes(r)?1:0;case"clever-courtiers":return["intrigue","politics"].includes(r)?1:0;case"legendary-craftspeople":return r==="industry"?2:0;case"famous-scholars":return r==="scholarship"?2:0;default:return 0}},sf=e=>{const t=e.kingdomFeats||[];let r=0;for(const n of t)n==="quality-of-life"&&(r-=1);return r},G0=(e,t)=>{const r=e.kingdomFeats||[];let n=0;for(const s of r)s==="celebratory-traditions"&&t==="celebrate-holiday"&&(n-=1),s==="frontier-mentality"&&t==="claim-hex"&&(n-=1);return n},Q0=e=>{const t=e.kingdomFeats||[];let r=0;for(const n of t)n==="enduring-kingdom"&&(r+=2),n==="eternal-kingdom"&&(r+=5);return r},X0=e=>{const t=e.kingdomFeats||[];let r=0;for(const n of t)n==="capital-investment"&&(r+=2);return r},K0=e=>{const t=e.kingdomFeats||[];let r=0;for(const n of t)n==="vast-territory"&&(r+=1);return r},Z0=(e,t)=>{const r=e.settlements||[];let n=0,s=null;for(const i of r){const o=i.structures||[];for(const a of o){const c=Bn(a);if(c&&c.itemBonusTo&&c.itemBonus){const d=c.itemBonusTo.toLowerCase(),p=t.toLowerCase().replace(/-/g," ");(d.includes(p)||p.includes(d.replace(" checks","")))&&c.itemBonus>n&&(n=c.itemBonus,s=`${c.name} in ${i.name}`)}}}return{bonus:n,source:s}},J0=(e,t)=>{const r=e.settlements||[];let n=0,s=null;const i=sa(t);for(const o of r){const a=o.structures||[];for(const c of a){const d=Bn(c);if(d&&d.itemBonusTo&&d.itemBonus){const p=d.itemBonusTo.toLowerCase();i&&(p.includes(i.toLowerCase())||p===t.toLowerCase())&&d.itemBonus>n&&(n=d.itemBonus,s=`${d.name} in ${o.name}`),p===t.toLowerCase()&&d.itemBonus>n&&(n=d.itemBonus,s=`${d.name} in ${o.name}`)}}}return{bonus:n,source:s}},lf=e=>{var i;const t=e.settlements||[];let r=0,n=0;for(const o of t){const a=o.blocks||1;let c=0;a<=4?c=1:a<=8?c=2:a<=16?c=4:c=6,r+=c;const d=o.structures||[];for(const p of d)Bn(p)&&(p==="herbalist"&&(n+=1),p==="mill"&&(((i=e.workSites)==null?void 0:i.farmlands)||0)>0&&(n+=1))}const s=sf(e);return n-=s,Math.max(0,r-n)},eh=e=>{const t=[];let r=0;const n=e.leadership||[];for(const i of n)if(!i.holder||i.holder.trim()===""){const a=i.id==="ruler"?2:1;r+=a,t.push(`${i.name} is vacant: +${a} Unrest`)}return r===0&&t.push("All leadership roles are filled"),{state:{...e,unrest:Math.max(0,e.unrest+r)},unrestGain:r,log:t}},th=e=>{const t=[];let r={...e},n=0;const s={Corruption:"Culture",Crime:"Economy",Decay:"Stability",Strife:"Loyalty"},i={...e.ruin},o={...e.ruinThresholds||{}},a={...e.abilities},c=Q0(e);for(const[d,p]of Object.entries(i)){const g=(o[d]||10)+c;if(p>=g){const h=s[d];h&&a[h]>0&&(a[h]=a[h]-1,t.push(`${d} exceeded threshold (${g})! ${h} reduced to ${a[h]}`)),o[d]=g+1,t.push(`${d} threshold increased to ${o[d]}`);const w=Math.floor(Math.random()*10)+1;n+=w,t.push(`Rolled ${w} Unrest from ${d} overflow`)}}return t.length===0&&t.push("No Ruin thresholds exceeded"),r={...r,ruin:i,ruinThresholds:o,abilities:a,unrest:Math.max(0,r.unrest+n)},{state:r,unrestGain:n,log:t}},rh=e=>{var T,m,u;const t=[],r=((T=e.kingdom)==null?void 0:T.level)||1,n=((m=e.kingdom)==null?void 0:m.hexes)||1,s=Qn(n),i=r+4,o=[4,6,8,10,12],a=o.indexOf(s.die),c=K0(e),d=Math.min(a+c,o.length-1),p=o[d]||s.die,g=[];for(let f=0;f<i;f++)g.push(Math.floor(Math.random()*p)+1);const h=g.reduce((f,y)=>f+y,0),w=X0(e);c>0&&t.push(`Resource die upgraded to d${p} (Vast Territory feat)`),t.push(`Rolled ${i}d${p}: [${g.join(", ")}] = ${h} RP`),w>0&&t.push(`+${w} bonus RP from feats`);const k=h+w;return{state:{...e,resources:{...e.resources,rp:(((u=e.resources)==null?void 0:u.rp)||0)+k},turn:{...e.turn,resourceDiceResult:h,resourceDiceRolls:g}},rolls:g,total:h,log:t}},nh=e=>{const t=[],r=e.workSites||{},n={...e.resources},s={farmlands:{commodity:"food",count:r.farmlands||0},lumberCamps:{commodity:"lumber",count:r.lumberCamps||0},mines:{commodity:"ore",count:r.mines||0},quarries:{commodity:"stone",count:r.quarries||0}};for(const[o,{commodity:a,count:c}]of Object.entries(s))c>0&&(n[a]=(n[a]||0)+c,t.push(`+${c} ${ih(a)} from ${c} ${o.replace(/([A-Z])/g," $1").trim()}`));return t.length===0&&t.push("No work sites to collect from"),{state:{...e,resources:n},log:t}},sh=e=>{var d;const t=[],r=lf(e),n=sf(e),s=Math.max(0,r+n),i=((d=e.resources)==null?void 0:d.food)||0,o={...e.resources};let a=0;if(s===0)t.push("Consumption is 0, nothing to pay");else if(i>=s)o.food=i-s,t.push(`Paid ${s} Food for consumption (${o.food} remaining)`);else{const p=s-i;o.food=0;for(let g=0;g<p;g++)a+=Math.floor(Math.random()*4)+1;t.push(`Food shortage! Missing ${p} Food`),t.push(`+${a} Unrest from starvation`)}return{state:{...e,consumption:s,resources:o,unrest:Math.max(0,(e.unrest||0)+a)},consumption:s,unrestGain:a,shortage:s>i?s-i:0,log:t}},lh=e=>{const t=[];let r=e;const n=eh(r);r=n.state,t.push({step:"Leadership",logs:n.log});const s=th(r);r=s.state,t.push({step:"Ruin",logs:s.log});const i=rh(r);r=i.state,t.push({step:"Resources",logs:i.log});const o=nh(r);r=o.state,t.push({step:"Work Sites",logs:o.log});const a=sh(r);return r=a.state,t.push({step:"Consumption",logs:a.log}),r={...r,turn:{...r.turn,phaseComplete:{...r.turn.phaseComplete,upkeep:!0}}},{state:r,logs:t}},ih=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",oh=(e,t)=>{const r={Culture:["counselor","magister"],Economy:["treasurer","viceroy"],Loyalty:["general","emissary"],Stability:["warden"]},s={Arts:"Culture",Folklore:"Culture",Magic:"Culture",Scholarship:"Culture",Boating:"Economy",Engineering:"Economy",Exploration:"Economy",Industry:"Economy",Trade:"Economy",Intrigue:"Loyalty",Politics:"Loyalty",Statecraft:"Loyalty",Warfare:"Loyalty",Agriculture:"Stability",Defense:"Stability",Wilderness:"Stability"}[t];if(!s)return 0;const i=r[s]||[],o=e.leadership||[];let a=0;for(const c of o)if(i.includes(c.id)&&c.holder&&c.invested){a+=1;break}return a},of=e=>Math.floor(Math.random()*e)+1,ah=(e,t)=>Array(e).fill(0).map(()=>of(t)),ch=e=>e.reduce((t,r)=>t+r,0),Jt=e=>{if(typeof e=="number")return e;const t=e.match(/(\d+)d(\d+)/);if(!t)return parseInt(e)||0;const[,r,n]=t;return ch(ah(parseInt(r),parseInt(n)))},Ml=(e,t,r=null)=>{var k;const n=sa(t);if(!n)return{total:0,components:[]};const s=e.abilities[n]||10,i=Math.floor((s-10)/2),o=((k=e.skillProficiencies)==null?void 0:k[t])||"Untrained",a=la(o,e.kingdom.level),c=e.unrest>=15?4:e.unrest>=10?3:e.unrest>=5?2:e.unrest>=1?1:0,d=oh(e,t);let p=0,g=null;if(r){const b=Z0(e,r);b.bonus>0&&(p=b.bonus,g=b.source)}if(r){const b=W0(e,r);b.bonus>p&&(p=b.bonus,g=b.source+" (Feat)")}if(p===0){const b=J0(e,t);b.bonus>0&&(p=b.bonus,g=b.source)}const h=V0(e,t);return h.bonus>p&&(p=h.bonus,g=h.source+" (Feat)"),{total:i+a-c+d+p,ability:n,abilityMod:i,proficiency:o,profBonus:a,unrestPenalty:c,leaderBonus:d,itemBonus:p,itemBonusSource:g}},oa=(e,t,r=0,n=null)=>{const s=Qn(e.kingdom.hexes),i=na(e.kingdom.level)+s.dcMod+r,o=Ml(e,t,n),a=o.total,c=of(20),d=c+a;let p;return c===20&&d>=i?p="criticalSuccess":c===1&&d<i+10?p="criticalFailure":d>=i+10?p="criticalSuccess":d>=i?p="success":d<=i-10?p="criticalFailure":p="failure",{roll:c,modifier:a,total:d,dc:i,degree:p,breakdown:o}},uh=(e,t,r={})=>{var o,a;if(!t.prerequisite)return{valid:!0};const n=e.hexMap||{},s=(o=r.hexCoord)==null?void 0:o.toLowerCase(),i=s?n[s]:null;switch(t.prerequisite){case"adjacentExploredHex":return i?i.status==="claimed"?{valid:!1,error:"Hex is already claimed"}:i.status!=="explored"?{valid:!1,error:"Hex must be explored first"}:Object.keys(n).filter(h=>n[h].status==="claimed").some(h=>Sc(h,s))?{valid:!0}:{valid:!1,error:"Hex must be adjacent to claimed territory"}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHex":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:{valid:!0}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexNoSettlement":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:i.settlement?{valid:!1,error:"Hex already has a settlement"}:{valid:!0}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexFarmable":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:["plains","hills"].includes(i.terrain)?i.workSite?{valid:!1,error:"Hex already has a work site"}:{valid:!0}:{valid:!1,error:"Farmland requires plains or hills terrain"}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexMinable":case"ownedHexQuarryable":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:["hills","mountain"].includes(i.terrain)?i.workSite?{valid:!1,error:"Hex already has a work site"}:{valid:!0}:{valid:!1,error:"Requires hills or mountain terrain"}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexForest":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:i.terrain!=="forest"?{valid:!1,error:"Requires forest terrain"}:i.workSite?{valid:!1,error:"Hex already has a work site"}:{valid:!0}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexWithFarm":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:i.workSite!=="farm"?{valid:!1,error:"Hex must have farmland"}:{valid:!0}:{valid:!1,error:"Invalid hex coordinate"};case"ownedHexWaterAdjacent":return i?i.status!=="claimed"?{valid:!1,error:"You must own this hex"}:!Object.keys(n).some(h=>n[h].terrain==="water"&&Sc(h,s))&&i.terrain!=="water"?{valid:!1,error:"Hex must be adjacent to water"}:{valid:!0}:{valid:!1,error:"Invalid hex coordinate"};case"hasMultipleSettlements":return(((a=e.settlements)==null?void 0:a.length)||0)<2?{valid:!1,error:"Need at least 2 settlements to relocate capital"}:{valid:!0};default:return{valid:!0}}},Sc=(e,t)=>{const r=d=>{const p=d.toLowerCase().match(/([a-z]+)(\d+)/);if(!p)return null;const g=p[1].charCodeAt(0)-97,h=parseInt(p[2]);return{col:g,row:h}},n=r(e),s=r(t);if(!n||!s)return!1;const i=s.col-n.col,o=s.row-n.row;return(n.col%2===0?[[-1,-1],[-1,0],[0,-1],[0,1],[1,-1],[1,0]]:[[-1,0],[-1,1],[0,-1],[0,1],[1,0],[1,1]]).some(([d,p])=>i===d&&o===p)},dh=(e,t,r,n={})=>{const s=t.effects[r]||[];let i={...e};const o=[];for(const a of s){const c=fh(i,a,n);i=c.state,c.log&&o.push(c.log)}return{state:i,log:o}},fh=(e,t,r)=>{var n,s,i,o,a,c,d,p,g,h,w,k,b,T,m,u,f,y,L;switch(t.type){case"unrest":{const S=Jt(t.delta),v=Math.max(0,e.unrest+S);return{state:{...e,unrest:v},log:S>0?`+${S} Unrest`:`${S} Unrest`}}case"fame":{const S=Jt(t.delta),v=Math.max(0,(e.kingdom.fame||0)+S);return{state:{...e,kingdom:{...e.kingdom,fame:v}},log:S>0?`+${S} Fame`:`${S} Fame`}}case"infamy":{const S=Jt(t.delta),v=Math.max(0,(e.kingdom.infamy||0)+S);return{state:{...e,kingdom:{...e.kingdom,infamy:v}},log:S>0?`+${S} Infamy`:`${S} Infamy`}}case"xp":{const S=Jt(t.delta),v=(e.kingdom.xp||0)+S;return{state:{...e,kingdom:{...e.kingdom,xp:v}},log:`+${S} XP`}}case"rp":{const S=Jt(t.delta),v=Math.max(0,(((n=e.resources)==null?void 0:n.rp)||0)+S);return{state:{...e,resources:{...e.resources,rp:v}},log:S>0?`+${S} RP`:`${S} RP`}}case"ruin":{const S=Jt(t.delta),v=t.ruinType,M=((s=e.ruin)==null?void 0:s[v])||0,z=Math.max(0,M+S);return{state:{...e,ruin:{...e.ruin,[v]:z}},log:S>0?`+${S} ${v}`:`${S} ${v}`}}case"commodity":{const S=Jt(t.delta),v=t.commodity,M=((i=e.resources)==null?void 0:i[v])||0,z=Math.max(0,M+S);return{state:{...e,resources:{...e.resources,[v]:z}},log:S>0?`+${S} ${Nc(v)}`:`${S} ${Nc(v)}`}}case"claimHex":{const S=(o=r.hexCoord)==null?void 0:o.toLowerCase();if(!S)return{state:e,log:null};const v=((a=e.hexMap)==null?void 0:a[S])||{coord:S},M=Object.values(e.factions||{}).find(G=>G.isPlayer),z=(M==null?void 0:M.id)||"1",H={...v,status:"claimed",faction:z},D=(e.kingdom.hexes||0)+1;return{state:{...e,hexMap:{...e.hexMap,[S]:H},kingdom:{...e.kingdom,hexes:D}},log:`Claimed hex ${S.toUpperCase()}`}}case"abandonHex":{const S=(c=r.hexCoord)==null?void 0:c.toLowerCase();if(!S)return{state:e,log:null};const v=(d=e.hexMap)==null?void 0:d[S];if(!v)return{state:e,log:null};const M={...v,status:"explored",faction:null,workSite:null},z=Math.max(0,(e.kingdom.hexes||0)-1);return{state:{...e,hexMap:{...e.hexMap,[S]:M},kingdom:{...e.kingdom,hexes:z}},log:`Abandoned hex ${S.toUpperCase()}`}}case"workSite":{const S=(p=r.hexCoord)==null?void 0:p.toLowerCase();if(!S)return{state:e,log:null};const v=(g=e.hexMap)==null?void 0:g[S];if(!v)return{state:e,log:null};const M=t.siteType,z={...v,workSite:M},H={farm:"farmlands",lumber:"lumberCamps",mine:"mines",quarry:"quarries"}[M]||M,D=((h=e.workSites)==null?void 0:h[H])||0;return{state:{...e,hexMap:{...e.hexMap,[S]:z},workSites:{...e.workSites,[H]:D+1}},log:`Established ${M} at ${S.toUpperCase()}${t.bonus?" (bonus production)":""}`}}case"addRoad":{const S=(w=r.hexCoord)==null?void 0:w.toLowerCase();if(!S)return{state:e,log:null};const v=(k=e.hexMap)==null?void 0:k[S];if(!v)return{state:e,log:null};const M={...v,roads:!0};return{state:{...e,hexMap:{...e.hexMap,[S]:M}},log:`Built roads in ${S.toUpperCase()}`}}case"fortifyHex":{const S=(b=r.hexCoord)==null?void 0:b.toLowerCase();if(!S)return{state:e,log:null};const v=(T=e.hexMap)==null?void 0:T[S];if(!v)return{state:e,log:null};const M={...v,fortified:!0,defenseBonus:(v.defenseBonus||0)+(t.bonus||1)};return{state:{...e,hexMap:{...e.hexMap,[S]:M}},log:`Fortified ${S.toUpperCase()} (+${t.bonus||1} Defense)`}}case"clearHex":{const S=(m=r.hexCoord)==null?void 0:m.toLowerCase();if(!S)return{state:e,log:null};const v=(u=e.hexMap)==null?void 0:u[S];if(!v)return{state:e,log:null};const M={...v,hazards:null,cleared:!0};return{state:{...e,hexMap:{...e.hexMap,[S]:M}},log:`Cleared hazards from ${S.toUpperCase()}`}}case"establishSettlement":{const S=(f=r.hexCoord)==null?void 0:f.toLowerCase(),v=r.settlementName||"New Settlement";if(!S)return{state:e,log:null};const M={id:`settlement-${Date.now()}`,name:v,hexCoordinate:S,isCapital:(((y=e.settlements)==null?void 0:y.length)||0)===0,level:1,type:"Village",blocks:1,structures:[]},H={...((L=e.hexMap)==null?void 0:L[S])||{},settlement:v};return{state:{...e,settlements:[...e.settlements||[],M],hexMap:{...e.hexMap,[S]:H}},log:`Established settlement: ${v}`}}case"relocateCapital":{const S=r.settlementId;if(!S)return{state:e,log:null};const v=(e.settlements||[]).map(z=>({...z,isCapital:z.id===S})),M=v.find(z=>z.isCapital);return{state:{...e,settlements:v,kingdom:{...e.kingdom,capital:(M==null?void 0:M.name)||e.kingdom.capital}},log:`Relocated capital to ${M==null?void 0:M.name}`}}case"special":return{state:e,log:`[${t.key}]`};default:return{state:e,log:null}}},Nc=e=>e.charAt(0).toUpperCase()+e.slice(1),mh=(e,t,r={})=>{var w,k;const n=T0(t);if(!n)return{success:!1,error:"Activity not found"};const s=uh(e,n,r);if(!s.valid)return{success:!1,error:s.error};const i=n.rpCost||0,o=G0(e,t),a=Math.max(0,i+o);if(a>0&&(((w=e.resources)==null?void 0:w.rp)||0)<a)return{success:!1,error:`Insufficient RP (need ${a}, have ${((k=e.resources)==null?void 0:k.rp)||0})`};let c={...e};a>0&&(c={...c,resources:{...c.resources,rp:c.resources.rp-a}});let d=null,p="success";n.skill&&n.skill!=="none"&&n.skill!=="varies"&&(d=oa(c,n.skill,0,t),p=d.degree,n.refundOnFailure&&(p==="failure"||p==="criticalFailure")&&(c={...c,resources:{...c.resources,rp:c.resources.rp+a}}));const{state:g,log:h}=dh(c,n,p,r);return{success:!0,state:g,checkResult:d,degree:p,effectLog:h,rpCost:(p==="failure"||p==="criticalFailure")&&n.refundOnFailure?0:a}},ps={criticalSuccess:{color:"text-green-400",bg:"bg-green-500/20",label:"Critical Success!"},success:{color:"text-blue-400",bg:"bg-blue-500/20",label:"Success"},failure:{color:"text-yellow-400",bg:"bg-yellow-500/20",label:"Failure"},criticalFailure:{color:"text-red-400",bg:"bg-red-500/20",label:"Critical Failure!"}},hs=e=>!e||e.length===0?"No effect":e.map(t=>{switch(t.type){case"unrest":return t.delta>0?`+${t.delta} Unrest`:`${t.delta} Unrest`;case"fame":return`+${t.delta} Fame`;case"infamy":return`+${t.delta} Infamy`;case"xp":return`+${t.delta} XP`;case"rp":return t.delta>0?`+${t.delta} RP`:`${t.delta} RP`;case"ruin":return`+${t.delta} ${t.ruinType}`;case"commodity":return t.delta>0?`+${t.delta} ${Cc(t.commodity)}`:`${t.delta} ${Cc(t.commodity)}`;case"claimHex":return"Claim the hex";case"abandonHex":return"Abandon the hex";case"workSite":return`Establish ${t.siteType}${t.bonus?" (bonus production)":""}`;case"addRoad":return"Build roads";case"fortifyHex":return`Fortify (+${t.bonus||1} Defense)`;case"clearHex":return"Clear hazards";case"establishSettlement":return"Establish settlement";case"relocateCapital":return"Relocate capital";case"special":return`Special: ${t.key}`;default:return JSON.stringify(t)}}).join(", "),Cc=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function ph({activity:e,state:t,onClose:r,onExecute:n,onLog:s}){var m,u,f,y,L,S;const[i,o]=C.useState({}),[a,c]=C.useState(null),[d,p]=C.useState(null),g=C.useMemo(()=>{var z;if(!((z=e.requiresInput)!=null&&z.includes("hexCoord")))return[];const v=t.hexMap||{},M=Object.values(v);switch(e.prerequisite){case"adjacentExploredHex":const H=Object.keys(v).filter(D=>v[D].status==="claimed");return M.filter(D=>D.status==="explored"&&D.status!=="claimed"&&H.some(G=>hh(G,D.coord)));case"ownedHex":return M.filter(D=>D.status==="claimed");case"ownedHexNoSettlement":return M.filter(D=>D.status==="claimed"&&!D.settlement);case"ownedHexFarmable":return M.filter(D=>D.status==="claimed"&&["plains","hills"].includes(D.terrain)&&!D.workSite);case"ownedHexMinable":case"ownedHexQuarryable":return M.filter(D=>D.status==="claimed"&&["hills","mountain"].includes(D.terrain)&&!D.workSite);case"ownedHexForest":return M.filter(D=>D.status==="claimed"&&D.terrain==="forest"&&!D.workSite);case"ownedHexWithFarm":return M.filter(D=>D.status==="claimed"&&D.workSite==="farm");default:return M.filter(D=>D.status==="claimed")}},[e,t.hexMap]),h=C.useMemo(()=>!e.skill||e.skill==="none"||e.skill==="varies"?null:Ml(t,e.skill,e.id),[e.skill,e.id,t]),w=()=>{var H,D,G,X;if(p(null),(H=e.requiresInput)!=null&&H.includes("hexCoord")&&!i.hexCoord){p("Please select a hex");return}if((D=e.requiresInput)!=null&&D.includes("settlementName")&&!((G=i.settlementName)!=null&&G.trim())){p("Please enter a settlement name");return}const v=mh(t,e.id,i);if(!v.success){p(v.error);return}c(v);const M=((X=ps[v.degree])==null?void 0:X.label)||v.degree,z=v.degree.includes("Success")?"success":"failure";if(v.checkResult){const{roll:K,modifier:B,total:ue,dc:de}=v.checkResult;s==null||s(`${e.name}: Rolled ${K} + ${B} = ${ue} vs DC ${de}  ${M}. ${v.effectLog.filter(I=>I).join(", ")}`,z)}else s==null||s(`${e.name}: ${M}. ${v.effectLog.filter(K=>K).join(", ")}`,z)},k=()=>{a&&n(a.state),r()},b=((m=t.resources)==null?void 0:m.rp)||0,T=!e.rpCost||b>=e.rpCost;return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"glass-card p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-yellow-400",children:e.name}),l.jsxs("p",{className:"text-sm text-gray-400",children:[e.category," Activity"]})]}),e.rpCost>0&&l.jsxs("div",{className:`px-3 py-1 rounded ${T?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[e.rpCost," RP"]})]}),l.jsx("p",{className:"text-gray-300 mb-4",children:e.desc}),e.skill&&e.skill!=="none"&&e.skill!=="varies"&&h&&l.jsxs("div",{className:"bg-white/5 rounded p-3 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Skill:"}),l.jsxs("span",{className:"text-white",children:[e.skill," (",h.ability,")"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Total Modifier:"}),l.jsxs("span",{className:"text-white font-bold",children:[h.total>=0?"+":"",h.total]})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-0.5",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Ability (",h.ability,"):"]}),l.jsxs("span",{children:[h.abilityMod>=0?"+":"",h.abilityMod]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Proficiency (",h.proficiency,"):"]}),l.jsx("span",{children:h.profBonus>0?`+${h.profBonus}`:"+0"})]}),h.leaderBonus>0&&l.jsxs("div",{className:"flex justify-between text-green-400",children:[l.jsx("span",{children:"Invested Leader:"}),l.jsxs("span",{children:["+",h.leaderBonus]})]}),h.itemBonus>0&&l.jsxs("div",{className:"flex justify-between text-blue-400",children:[l.jsxs("span",{title:h.itemBonusSource,children:["Item (",((u=h.itemBonusSource)==null?void 0:u.split(" in ")[0])||"Structure","):"]}),l.jsxs("span",{children:["+",h.itemBonus]})]}),h.unrestPenalty>0&&l.jsxs("div",{className:"flex justify-between text-red-400",children:[l.jsx("span",{children:"Unrest Penalty:"}),l.jsxs("span",{children:["-",h.unrestPenalty]})]})]})]}),e.effects&&!a&&l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400",children:"Possible Outcomes:"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-green-400 w-32",children:"Crit Success:"}),l.jsx("span",{className:"text-gray-300",children:hs(e.effects.criticalSuccess)})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-blue-400 w-32",children:"Success:"}),l.jsx("span",{className:"text-gray-300",children:hs(e.effects.success)})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-yellow-400 w-32",children:"Failure:"}),l.jsx("span",{className:"text-gray-300",children:hs(e.effects.failure)})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-red-400 w-32",children:"Crit Failure:"}),l.jsx("span",{className:"text-gray-300",children:hs(e.effects.criticalFailure)})]})]})]}),!a&&((f=e.requiresInput)==null?void 0:f.includes("hexCoord"))&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:[l.jsx(bl,{className:"w-4 h-4 inline mr-1"}),"Select Hex"]}),g.length===0?l.jsx("div",{className:"text-red-400 text-sm",children:"No valid hexes available for this activity"}):l.jsxs("select",{value:i.hexCoord||"",onChange:v=>o({...i,hexCoord:v.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white",children:[l.jsx("option",{value:"",children:"-- Select a hex --"}),g.map(v=>l.jsxs("option",{value:v.coord,children:[v.coord.toUpperCase()," - ",v.terrain,v.notes?` (${v.notes})`:""]},v.coord))]})]}),!a&&((y=e.requiresInput)==null?void 0:y.includes("settlementName"))&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:[l.jsx(wl,{className:"w-4 h-4 inline mr-1"}),"Settlement Name"]}),l.jsx("input",{type:"text",value:i.settlementName||"",onChange:v=>o({...i,settlementName:v.target.value}),placeholder:"Enter settlement name...",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white"})]}),d&&l.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded p-3 mb-4 text-red-400 flex items-center gap-2",children:[l.jsx(S0,{className:"w-5 h-5"}),d]}),a&&l.jsxs("div",{className:`rounded p-4 mb-4 ${ps[a.degree].bg}`,children:[l.jsx("div",{className:`text-lg font-bold ${ps[a.degree].color} mb-2`,children:ps[a.degree].label}),a.checkResult&&l.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:["Rolled ",a.checkResult.roll," + ",a.checkResult.modifier," = ",a.checkResult.total," vs DC ",a.checkResult.dc]}),a.effectLog.length>0&&l.jsx("div",{className:"space-y-1",children:a.effectLog.filter(v=>v).map((v,M)=>l.jsxs("div",{className:"text-sm flex items-center gap-2",children:[l.jsx(An,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-gray-200",children:v})]},M))}),a.rpCost>0&&l.jsxs("div",{className:"text-sm text-yellow-400 mt-2",children:["-",a.rpCost," RP spent"]})]}),l.jsx("div",{className:"flex gap-2",children:a?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded font-medium bg-green-600 hover:bg-green-500 text-white",children:[l.jsx(vn,{className:"w-5 h-5"}),"Confirm & Apply"]}),l.jsx("button",{onClick:r,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:w,disabled:!T||((L=e.requiresInput)==null?void 0:L.includes("hexCoord"))&&g.length===0,className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded font-medium transition-colors ${T&&!((S=e.requiresInput)!=null&&S.includes("hexCoord")&&g.length===0)?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[l.jsx(qd,{className:"w-5 h-5"}),"Roll Check"]}),l.jsx("button",{onClick:r,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})})]})})}const hh=(e,t)=>{const r=d=>{const p=d.toLowerCase().match(/([a-z]+)(\d+)/);if(!p)return null;const g=p[1].charCodeAt(0)-97,h=parseInt(p[2]);return{col:g,row:h}},n=r(e),s=r(t);if(!n||!s)return!1;const i=s.col-n.col,o=s.row-n.row;return(n.col%2===0?[[-1,-1],[-1,0],[0,-1],[0,1],[1,-1],[1,0]]:[[-1,0],[-1,1],[0,-1],[0,1],[1,0],[1,1]]).some(([d,p])=>i===d&&o===p)},gh=e=>{var a,c;const t=[],r=oa(e,"Trade",0,"collect-taxes");let n=0,s=0;const i=((a=e.kingdom)==null?void 0:a.level)||1;switch(r.degree){case"criticalSuccess":n=i+2,t.push(`Critical Success! Collected ${n} RP in taxes (base ${i} + 2 bonus)`);break;case"success":n=i,t.push(`Success. Collected ${n} RP in taxes`);break;case"failure":n=Math.max(1,Math.floor(i/2)),t.push(`Failure. Only collected ${n} RP in taxes (half)`);break;case"criticalFailure":n=0,s=1,t.push("Critical Failure! No taxes collected, +1 Unrest from citizen anger");break}return{state:{...e,resources:{...e.resources,rp:(((c=e.resources)==null?void 0:c.rp)||0)+n},unrest:(e.unrest||0)+s,turn:{...e.turn,taxesCollected:!0,taxesResult:n}},result:r,rpGained:n,unrestGained:s,log:t}},sl={food:1,lumber:2,ore:2,stone:2,luxuries:4},yh=(e,t,r,n)=>{var b,T;const s=[];if(!r||!n||n<=0)return{success:!1,error:"Invalid trade parameters"};const i=r.toLowerCase(),o=sl[i];if(!o)return{success:!1,error:`Unknown commodity: ${r}`};const a=oa(e,"Trade",0,"trade-commodities");let c=1,d=0;switch(a.degree){case"criticalSuccess":c=t==="sell"?1.5:.75,s.push("Critical Success! Excellent trade terms");break;case"success":c=1,s.push("Success. Fair trade terms");break;case"failure":c=t==="sell"?.75:1.25,s.push("Failure. Poor trade terms");break;case"criticalFailure":c=t==="sell"?.5:1.5,d=1,s.push("Critical Failure! Terrible trade, +1 Unrest");break}const p=Math.max(1,Math.round(o*c)),g=p*n;let h={...e};const w=((b=e.resources)==null?void 0:b[i])||0,k=((T=e.resources)==null?void 0:T.rp)||0;if(t==="sell"){if(w<n)return{success:!1,error:`Insufficient ${r} (have ${w}, need ${n})`};h={...h,resources:{...h.resources,[i]:w-n,rp:k+g}},s.push(`Sold ${n} ${r} for ${g} RP (${p} RP each)`)}else{if(k<g)return{success:!1,error:`Insufficient RP (have ${k}, need ${g})`};h={...h,resources:{...h.resources,[i]:w+n,rp:k-g}},s.push(`Bought ${n} ${r} for ${g} RP (${p} RP each)`)}return h.unrest=(h.unrest||0)+d,{success:!0,state:h,result:a,tradeType:t,commodity:r,amount:n,totalRP:g,rateModifier:c,log:s}},xh=e=>{var n;const t=[];let r=e;if(!((n=e.turn)!=null&&n.taxesCollected)){const s=gh(r);r=s.state,t.push({step:"Collect Taxes",logs:s.log})}return r={...r,turn:{...r.turn,phaseComplete:{...r.turn.phaseComplete,commerce:!0}}},t.push({step:"Commerce",logs:["Commerce Phase complete"]}),{state:r,logs:t}},vh=(e,t,r,n=1)=>{const s=sl[e.toLowerCase()]||0;return Math.max(1,Math.round(s*n))*t},kh={food:hr,lumber:Gn,luxuries:Ko,ore:Wr,stone:()=>l.jsx("div",{className:"w-5 h-5 bg-gray-400 rounded"})},wh={food:"text-amber-400",lumber:"text-green-400",luxuries:"text-pink-400",ore:"text-orange-400",stone:"text-gray-400"};function bh({state:e,onClose:t,onTrade:r,onLog:n}){var L,S;const[s,i]=C.useState("sell"),[o,a]=C.useState("food"),[c,d]=C.useState(1),[p,g]=C.useState(null),[h,w]=C.useState(null),k=((L=e.resources)==null?void 0:L.rp)||0,b=((S=e.resources)==null?void 0:S[o])||0,T=C.useMemo(()=>vh(o,c,s,1),[o,c,s]),m=C.useMemo(()=>c<=0?!1:s==="sell"?b>=c:k>=T,[s,c,b,k,T]),u=()=>{w(null);const v=yh(e,s,o,c);if(!v.success){w(v.error);return}g(v);const M={criticalSuccess:"Critical Success!",success:"Success",failure:"Failure",criticalFailure:"Critical Failure!"}[v.result.degree];n==null||n(`Trade (${s} ${c} ${o}): ${M}`,v.result.degree.includes("Success")?"success":"failure");for(const z of v.log)n==null||n(z,"info")},f=()=>{p&&r(p.state),t()},y=Object.keys(sl);return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"glass-card p-6 max-w-md w-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(Up,{className:"w-5 h-5"}),"Trade Commodities"]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:l.jsx(Sl,{className:"w-5 h-5"})})]}),p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`rounded p-4 mb-4 ${p.result.degree==="criticalSuccess"?"bg-green-500/20":p.result.degree==="success"?"bg-blue-500/20":p.result.degree==="failure"?"bg-yellow-500/20":"bg-red-500/20"}`,children:[l.jsx("div",{className:`text-lg font-bold mb-2 ${p.result.degree==="criticalSuccess"?"text-green-400":p.result.degree==="success"?"text-blue-400":p.result.degree==="failure"?"text-yellow-400":"text-red-400"}`,children:p.result.degree==="criticalSuccess"?"Critical Success!":p.result.degree==="success"?"Success":p.result.degree==="failure"?"Failure":"Critical Failure!"}),l.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:["Trade check: ",p.result.roll," + ",p.result.modifier," = ",p.result.total," vs DC ",p.result.dc]}),l.jsx("div",{className:"space-y-1",children:p.log.map((v,M)=>l.jsx("div",{className:"text-sm text-gray-200",children:v},M))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:f,className:"flex-1 py-2 px-4 rounded font-medium bg-green-600 hover:bg-green-500 text-white flex items-center justify-center gap-2",children:[l.jsx(vn,{className:"w-5 h-5"}),"Confirm Trade"]}),l.jsx("button",{onClick:t,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsxs("button",{onClick:()=>i("sell"),className:`flex-1 py-2 px-4 rounded flex items-center justify-center gap-2 transition-colors ${s==="sell"?"bg-green-500/20 border border-green-500 text-green-400":"bg-gray-800 border border-gray-700 text-gray-400"}`,children:[l.jsx(ra,{className:"w-4 h-4"}),"Sell"]}),l.jsxs("button",{onClick:()=>i("buy"),className:`flex-1 py-2 px-4 rounded flex items-center justify-center gap-2 transition-colors ${s==="buy"?"bg-blue-500/20 border border-blue-500 text-blue-400":"bg-gray-800 border border-gray-700 text-gray-400"}`,children:[l.jsx(k0,{className:"w-4 h-4"}),"Buy"]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Commodity"}),l.jsx("div",{className:"grid grid-cols-5 gap-2",children:y.map(v=>{var D;const M=kh[v],z=((D=e.resources)==null?void 0:D[v])||0,H=o===v;return l.jsxs("button",{onClick:()=>a(v),className:`p-3 rounded text-center transition-colors ${H?"bg-yellow-500/20 border border-yellow-500":"bg-gray-800 border border-gray-700 hover:border-gray-600"}`,children:[l.jsx("div",{className:`mx-auto mb-1 ${wh[v]}`,children:typeof M=="function"?l.jsx(M,{className:"w-5 h-5 mx-auto"}):M}),l.jsx("div",{className:"text-xs text-gray-400 capitalize",children:v}),l.jsx("div",{className:"text-sm font-bold",children:z})]},v)})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Amount (",s==="sell"?`max ${b}`:"any",")"]}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("button",{onClick:()=>d(Math.max(1,c-1)),className:"px-3 py-2 bg-gray-800 rounded hover:bg-gray-700",children:"-"}),l.jsx("input",{type:"number",min:"1",max:s==="sell"?b:99,value:c,onChange:v=>d(Math.max(1,parseInt(v.target.value)||1)),className:"flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 text-center"}),l.jsx("button",{onClick:()=>d(c+1),className:"px-3 py-2 bg-gray-800 rounded hover:bg-gray-700",children:"+"}),s==="sell"&&l.jsx("button",{onClick:()=>d(b),className:"px-3 py-2 bg-gray-800 rounded hover:bg-gray-700 text-xs",children:"Max"})]})]}),l.jsxs("div",{className:"bg-white/5 rounded p-4 mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[l.jsx("span",{className:"text-gray-400",children:"Base Value:"}),l.jsxs("span",{children:[sl[o]," RP each"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:s==="sell"?"Estimated Gain:":"Estimated Cost:"}),l.jsxs("span",{className:`text-xl font-bold ${s==="sell"?"text-green-400":"text-blue-400"}`,children:[s==="sell"?"+":"-",T," RP"]})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Final value depends on Trade skill check"})]}),l.jsxs("div",{className:"bg-white/5 rounded p-3 mb-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Your RP:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:k})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-400",children:["Your ",o,":"]}),l.jsx("span",{className:"font-bold",children:b})]})]}),h&&l.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded p-3 mb-4 text-red-400 text-sm",children:h}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:u,disabled:!m,className:`flex-1 py-2 px-4 rounded font-medium flex items-center justify-center gap-2 ${m?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[l.jsx(_n,{className:"w-5 h-5"}),s==="sell"?"Sell":"Buy"]}),l.jsx("button",{onClick:t,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})]})]})})}const sn=[{id:"name",label:"Kingdom Name",icon:On},{id:"charter",label:"Charter",icon:d0},{id:"heartland",label:"Heartland",icon:rl},{id:"government",label:"Government",icon:Xo},{id:"abilities",label:"Ability Boosts",icon:ea},{id:"review",label:"Review",icon:zn}],jh={forest:Gn,hill:Wr,lake:j0,mountain:Wr};function Sh({onComplete:e,onCancel:t}){const[r,n]=C.useState(0),[s,i]=C.useState({name:"",charter:null,heartland:null,government:null,freeBoosts:[],abilities:{Culture:10,Economy:10,Loyalty:10,Stability:10},trainedSkills:[]}),o=sn[r],a=()=>{switch(o.id){case"name":return s.name.trim().length>0;case"charter":return s.charter!==null;case"heartland":return s.heartland!==null;case"government":return s.government!==null;case"abilities":return s.freeBoosts.length===2;case"review":return!0;default:return!1}},c=()=>{r<sn.length-1&&(o.id==="charter"&&s.charter&&p(),o.id==="heartland"&&s.heartland&&g(),o.id==="government"&&s.government&&h(),n(r+1))},d=()=>{r>0&&(o.id==="abilities"&&i(T=>({...T,freeBoosts:[]})),n(r-1))},p=()=>{const T=ti.find(m=>m.id===s.charter);T&&i(m=>{const u={...m.abilities};return T.boost!=="Any"&&(u[T.boost]=(u[T.boost]||10)+2),T.flaw!=="Any"&&(u[T.flaw]=Math.max(8,(u[T.flaw]||10)-2)),{...m,abilities:u}})},g=()=>{const T=ri.find(m=>m.id===s.heartland);T&&i(m=>{const u={...m.abilities};return u[T.boost]=(u[T.boost]||10)+2,{...m,abilities:u}})},h=()=>{const T=ni.find(m=>m.id===s.government);T&&i(m=>{const u={...m.abilities};return u[T.boost]=(u[T.boost]||10)+2,{...m,abilities:u,trainedSkills:[T.skill]}})},w=T=>{i(m=>{const u=[...m.freeBoosts],f=u.indexOf(T);return f>=0?(u.splice(f,1),{...m,freeBoosts:u,abilities:{...m.abilities,[T]:m.abilities[T]-2}}):u.length<2?(u.push(T),{...m,freeBoosts:u,abilities:{...m.abilities,[T]:m.abilities[T]+2}}):m})},k=()=>{e(s)},b=()=>{switch(o.id){case"name":return l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"What is the name of your new kingdom?"}),l.jsx("input",{type:"text",value:s.name,onChange:f=>i(y=>({...y,name:f.target.value})),placeholder:"Enter kingdom name...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-xl text-yellow-400 font-cinzel",autoFocus:!0})]});case"charter":return l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Your charter determines how your kingdom was founded and provides ability modifiers."}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:ti.map(f=>l.jsxs("button",{onClick:()=>i(y=>({...y,charter:f.id})),className:`text-left p-4 rounded-lg border transition-all ${s.charter===f.id?"bg-yellow-500/20 border-yellow-500":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[l.jsx("div",{className:"font-semibold text-yellow-400",children:f.name}),l.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[f.boost!=="Any"?l.jsxs("span",{className:"text-green-400",children:["+2 ",f.boost]}):l.jsx("span",{className:"text-blue-400",children:"+2 to any ability"}),"  ",f.flaw!=="Any"?l.jsxs("span",{className:"text-red-400",children:["-2 ",f.flaw]}):l.jsx("span",{className:"text-orange-400",children:"-2 to any ability"})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Nh(f.id)})]},f.id))})]});case"heartland":return l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Your heartland is the terrain type where your kingdom was founded."}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:ri.map(f=>{const y=jh[f.id]||rl;return l.jsxs("button",{onClick:()=>i(L=>({...L,heartland:f.id})),className:`text-left p-4 rounded-lg border transition-all ${s.heartland===f.id?"bg-yellow-500/20 border-yellow-500":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(y,{className:"w-5 h-5 text-yellow-400"}),l.jsx("span",{className:"font-semibold text-yellow-400",children:f.name})]}),l.jsxs("div",{className:"text-sm text-green-400 mt-1",children:["+2 ",f.boost]})]},f.id)})})]});case"government":return l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Your government type determines how your kingdom is ruled and what skills you start trained in."}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:ni.map(f=>l.jsxs("button",{onClick:()=>i(y=>({...y,government:f.id})),className:`text-left p-4 rounded-lg border transition-all ${s.government===f.id?"bg-yellow-500/20 border-yellow-500":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[l.jsx("div",{className:"font-semibold text-yellow-400",children:f.name}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsxs("span",{className:"text-green-400",children:["+2 ",f.boost]}),"  ",l.jsxs("span",{className:"text-blue-400",children:["Trained in ",f.skill]})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Ch(f.id)})]},f.id))})]});case"abilities":return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-300",children:["Choose two ability scores to boost. Each boost adds +2.",l.jsxs("span",{className:"text-yellow-400 ml-2",children:["(",s.freeBoosts.length,"/2 selected)"]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:nl.map(f=>{const y=s.freeBoosts.includes(f),L=s.abilities[f]||10;return l.jsxs("button",{onClick:()=>w(f),disabled:!y&&s.freeBoosts.length>=2,className:`p-4 rounded-lg border transition-all ${y?"bg-yellow-500/20 border-yellow-500":s.freeBoosts.length>=2?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[l.jsx("div",{className:"font-semibold text-yellow-400",children:f}),l.jsx("div",{className:"text-2xl font-bold mt-1",children:L}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Modifier: ",Math.floor((L-10)/2)>=0?"+":"",Math.floor((L-10)/2)]}),y&&l.jsx("div",{className:"text-xs text-green-400 mt-1",children:"+2 Free Boost"})]},f)})})]});case"review":const T=ti.find(f=>f.id===s.charter),m=ri.find(f=>f.id===s.heartland),u=ni.find(f=>f.id===s.government);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx(On,{className:"w-12 h-12 mx-auto text-yellow-400 mb-2"}),l.jsx("h2",{className:"text-2xl font-bold text-yellow-400 font-cinzel",children:s.name})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-xs text-gray-400",children:"Charter"}),l.jsx("div",{className:"font-semibold text-yellow-400",children:T==null?void 0:T.name})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-xs text-gray-400",children:"Heartland"}),l.jsx("div",{className:"font-semibold text-yellow-400",children:m==null?void 0:m.name})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-xs text-gray-400",children:"Government"}),l.jsx("div",{className:"font-semibold text-yellow-400",children:u==null?void 0:u.name})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Final Ability Scores"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:nl.map(f=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs text-gray-500",children:f}),l.jsx("div",{className:"text-xl font-bold text-yellow-400",children:s.abilities[f]}),l.jsxs("div",{className:"text-xs text-gray-400",children:[Math.floor((s.abilities[f]-10)/2)>=0?"+":"",Math.floor((s.abilities[f]-10)/2)]})]},f))})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Trained Skills"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:s.trainedSkills.map(f=>l.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-sm",children:f},f))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-900 border border-yellow-600/30 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 font-cinzel flex items-center gap-2",children:[l.jsx(On,{className:"w-6 h-6"}),"Found Your Kingdom"]}),l.jsx("div",{className:"flex items-center gap-1 mt-4",children:sn.map((T,m)=>{const u=T.icon,f=m<r,y=m===r;return l.jsxs(Bc.Fragment,{children:[l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs ${f?"bg-green-500/20 text-green-400":y?"bg-yellow-500/20 text-yellow-400":"bg-gray-800 text-gray-500"}`,children:[l.jsx(u,{className:"w-3 h-3"}),l.jsx("span",{className:"hidden sm:inline",children:T.label})]}),m<sn.length-1&&l.jsx(An,{className:"w-4 h-4 text-gray-600"})]},T.id)})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:o.label}),b()]}),l.jsxs("div",{className:"p-4 border-t border-gray-800 flex justify-between",children:[l.jsxs("button",{onClick:r===0?t:d,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white flex items-center gap-2",children:[l.jsx(Vp,{className:"w-4 h-4"}),r===0?"Cancel":"Back"]}),r<sn.length-1?l.jsxs("button",{onClick:c,disabled:!a(),className:`px-4 py-2 rounded flex items-center gap-2 ${a()?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:["Next",l.jsx(An,{className:"w-4 h-4"})]}):l.jsxs("button",{onClick:k,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded flex items-center gap-2",children:[l.jsx(zn,{className:"w-4 h-4"}),"Found Kingdom"]})]})]})})}function Nh(e){return{conquest:"Founded through military might and territorial expansion.",expansion:"An extension of an existing nation seeking new frontiers.",exploration:"Born from the spirit of discovery and pioneering.",grant:"Established through official decree from a higher authority.",open:"A free kingdom with no predefined structure."}[e]||""}function Ch(e){return{despotism:"Rule by a single absolute authority.",feudalism:"A hierarchy of nobles owing fealty to the crown.",oligarchy:"Rule by a small group of wealthy or powerful individuals.",republic:"Citizens elect representatives to govern.",thaumocracy:"Rule by those with magical power.",yeomanry:"A nation of free landowners and farmers."}[e]||""}const Mc={1:0,2:1e3,3:2e3,4:3e3,5:4e3,6:6e3,7:8e3,8:1e4,9:12e3,10:14e3,11:17e3,12:2e4,13:23e3,14:26e3,15:29e3,16:33e3,17:37e3,18:41e3,19:45e3,20:49e3},Mh=[{id:"first-settlement",name:"First Settlement",description:"Establish your first settlement",xp:80,condition:e=>{var t;return(((t=e.settlements)==null?void 0:t.length)||0)>=1}},{id:"five-hexes",name:"Territorial Claim",description:"Claim 5 hexes",xp:40,condition:e=>{var t;return(((t=e.kingdom)==null?void 0:t.hexes)||0)>=5}},{id:"ten-hexes",name:"Growing Territory",description:"Claim 10 hexes",xp:80,condition:e=>{var t;return(((t=e.kingdom)==null?void 0:t.hexes)||0)>=10}},{id:"twenty-five-hexes",name:"Established Province",description:"Claim 25 hexes",xp:120,condition:e=>{var t;return(((t=e.kingdom)==null?void 0:t.hexes)||0)>=25}},{id:"first-town",name:"First Town",description:"Upgrade a village to a town",xp:80,condition:e=>{var t;return(t=e.settlements)==null?void 0:t.some(r=>r.blocks>=5)}},{id:"first-city",name:"First City",description:"Upgrade a town to a city",xp:120,condition:e=>{var t;return(t=e.settlements)==null?void 0:t.some(r=>r.blocks>=9)}},{id:"zero-unrest",name:"Content Kingdom",description:"Reduce Unrest to 0",xp:40,condition:e=>(e.unrest||0)===0},{id:"all-leadership",name:"Full Council",description:"Fill all leadership positions",xp:40,condition:e=>{var t;return(t=e.leadership)==null?void 0:t.every(r=>r.holder&&r.holder.trim())}},{id:"ten-buildings",name:"Infrastructure",description:"Build 10 structures",xp:60,condition:e=>{var t;return((t=e.settlements)==null?void 0:t.reduce((r,n)=>{var s;return r+(((s=n.structures)==null?void 0:s.length)||0)},0))>=10}},{id:"level-five",name:"Established Kingdom",description:"Reach kingdom level 5",xp:100,condition:e=>{var t;return(((t=e.kingdom)==null?void 0:t.level)||1)>=5}},{id:"level-ten",name:"Regional Power",description:"Reach kingdom level 10",xp:200,condition:e=>{var t;return(((t=e.kingdom)==null?void 0:t.level)||1)>=10}}],El=e=>{const t=e+1;return Mc[t]||Mc[20]+(t-20)*4e3},Eh=e=>{var s,i;const t=((s=e.kingdom)==null?void 0:s.level)||1,r=((i=e.kingdom)==null?void 0:i.xp)||0,n=El(t);return r>=n?{shouldLevel:!0,newLevel:t+1,currentXP:r,xpRequired:n}:{shouldLevel:!1,currentLevel:t,currentXP:r,xpForNextLevel:n,xpRemaining:n-r}},Th=(e,t,r,n=null)=>{var o,a,c;const s=(((o=e.kingdom)==null?void 0:o.level)||1)+1,i={...e,kingdom:{...e.kingdom,level:s,xpToNext:El(s)}};if(t&&(i.abilities={...e.abilities,[t]:(((a=e.abilities)==null?void 0:a[t])||10)+2}),r){const d=((c=e.skillProficiencies)==null?void 0:c[r])||"Untrained",p=["Untrained","Trained","Expert","Master","Legendary"],g=p.indexOf(d),h=p[Math.min(g+1,p.length-1)];i.skillProficiencies={...e.skillProficiencies,[r]:h}}return n&&(i.kingdomFeats=[...e.kingdomFeats||[],n]),i},Ph=(e,t,r)=>{var i;const s=(((i=e.kingdom)==null?void 0:i.xp)||0)+t;return{state:{...e,kingdom:{...e.kingdom,xp:s}},awarded:t,reason:r,newTotal:s}},Fh=e=>{const t=e.achievedMilestones||[],r=[];for(const n of Mh)!t.includes(n.id)&&n.condition(e)&&r.push(n);return r},Lh=(e,t)=>{let r=e,n=0;const s=[];for(const i of t)r=Ph(r,i.xp,`Milestone: ${i.name}`).state,n+=i.xp,s.push(`Milestone achieved: ${i.name} (+${i.xp} XP)`);return r={...r,achievedMilestones:[...e.achievedMilestones||[],...t.map(i=>i.id)]},{state:r,totalXP:n,milestones:t,log:s}},af=e=>{switch(e){case"Untrained":return 10;case"Trained":return 20;case"Expert":return 40;case"Master":return 80;default:return null}},Dh=(e,t)=>{var a,c,d;const r=((a=e.skillProficiencies)==null?void 0:a[t])||"Untrained",n=af(r);if(n===null)return{success:!1,error:"Skill is already at maximum proficiency"};if((((c=e.resources)==null?void 0:c.rp)||0)<n)return{success:!1,error:`Insufficient RP (need ${n}, have ${((d=e.resources)==null?void 0:d.rp)||0})`};const s=["Untrained","Trained","Expert","Master","Legendary"],i=s.indexOf(r),o=s[i+1];return{success:!0,state:{...e,resources:{...e.resources,rp:e.resources.rp-n},skillProficiencies:{...e.skillProficiencies,[t]:o}},cost:n,oldProficiency:r,newProficiency:o}};function Rh({state:e,onComplete:t,onCancel:r}){var z,H;const n=(((z=e.kingdom)==null?void 0:z.level)||1)+1,s=n===1||n%2===0,i=s?["ability","skill","feat","confirm"]:["ability","skill","confirm"],[o,a]=C.useState("ability"),[c,d]=C.useState(null),[p,g]=C.useState(null),[h,w]=C.useState(null),k=e.kingdomFeats||[],b=C.useMemo(()=>nf.filter(D=>!(D.level>n||k.includes(D.id))),[n,k]),T=()=>{const D=i.indexOf(o);return i[D+1]||"confirm"},m=()=>{const D=i.indexOf(o);return D>0?i[D-1]:null},u=()=>{const D=Th(e,c,p,h);t(D)},f=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Choose an ability score to boost by +2:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:nl.map(D=>{var B;const G=((B=e.abilities)==null?void 0:B[D])||10,X=G+2,K=c===D;return l.jsxs("button",{onClick:()=>d(D),className:`p-4 rounded-lg border transition-all text-left ${K?"bg-yellow-500/20 border-yellow-500":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[l.jsx("div",{className:"font-semibold text-yellow-400",children:D}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-gray-400",children:G}),l.jsx(An,{className:"w-4 h-4 text-gray-600"}),l.jsx("span",{className:"text-green-400 font-bold",children:X})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Modifier: ",Math.floor((X-10)/2)>=0?"+":"",Math.floor((X-10)/2)]})]},D)})})]}),y=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Choose a skill to train or upgrade:"}),l.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:Object.entries(Nl).map(([D,G])=>l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-yellow-400 mb-2",children:D}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:G.map(X=>{var q;const K=((q=e.skillProficiencies)==null?void 0:q[X])||"Untrained",B=["Untrained","Trained","Expert","Master","Legendary"],ue=B.indexOf(K),de=B[Math.min(ue+1,B.length-1)],I=K!=="Legendary",U=p===X;return l.jsxs("button",{onClick:()=>I&&g(X),disabled:!I,className:`p-3 rounded-lg border transition-all text-left ${U?"bg-blue-500/20 border-blue-500":I?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed"}`,children:[l.jsx("div",{className:"font-medium",children:X}),l.jsxs("div",{className:"text-xs mt-1",children:[l.jsx("span",{className:"text-gray-400",children:K}),I&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-600 mx-1",children:""}),l.jsx("span",{className:"text-green-400",children:de})]})]})]},X)})})]},D))})]}),L=()=>{const D={};for(const G of b)D[G.level]||(D[G.level]=[]),D[G.level].push(G);return l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300",children:"Choose a kingdom feat:"}),l.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:Object.entries(D).sort(([G],[X])=>Number(G)-Number(X)).map(([G,X])=>l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-semibold text-yellow-400 mb-2",children:["Level ",G," Feats"]}),l.jsx("div",{className:"space-y-2",children:X.map(K=>{const B=P0(K,k),ue=K.prerequisite?Hn(K.prerequisite):null,de=h===K.id;return l.jsxs("button",{onClick:()=>B&&w(K.id),disabled:!B,className:`w-full p-3 rounded-lg border transition-all text-left ${de?"bg-purple-500/20 border-purple-500":B?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed"}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"font-medium flex items-center gap-2",children:[!B&&l.jsx(o0,{className:"w-4 h-4 text-red-400"}),K.name]}),de&&l.jsx(zn,{className:"w-4 h-4 text-purple-400"})]}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:K.description}),l.jsx("div",{className:"text-xs text-green-400 mt-1",children:K.benefit}),K.prerequisite&&l.jsxs("div",{className:`text-xs mt-1 flex items-center gap-1 ${B?"text-gray-500":"text-red-400"}`,children:[l.jsx(Hp,{className:"w-3 h-3"}),"Requires: ",(ue==null?void 0:ue.name)||K.prerequisite]})]},K.id)})})]},G))})]})},S=()=>{var ue,de,I,U;const D=(((ue=e.abilities)==null?void 0:ue[c])||10)+2,G=((de=e.skillProficiencies)==null?void 0:de[p])||"Untrained",X=["Untrained","Trained","Expert","Master","Legendary"],K=X[X.indexOf(G)+1],B=h?Hn(h):null;return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx(Qd,{className:"w-12 h-12 mx-auto text-yellow-400 mb-2"}),l.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:"Level Up!"}),l.jsxs("p",{className:"text-gray-400",children:[(I=e.kingdom)==null?void 0:I.name," reaches Level ",n]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ea,{className:"w-6 h-6 text-yellow-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Ability Boost"}),l.jsx("div",{className:"font-semibold",children:c})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-gray-400",children:((U=e.abilities)==null?void 0:U[c])||10}),l.jsx("span",{className:"text-gray-600 mx-2",children:""}),l.jsx("span",{className:"text-green-400 font-bold",children:D})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Js,{className:"w-6 h-6 text-blue-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Skill Training"}),l.jsx("div",{className:"font-semibold",children:p})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-gray-400",children:G}),l.jsx("span",{className:"text-gray-600 mx-2",children:""}),l.jsx("span",{className:"text-green-400 font-bold",children:K})]})]}),B&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Wd,{className:"w-6 h-6 text-purple-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Kingdom Feat"}),l.jsx("div",{className:"font-semibold",children:B.name})]})]}),l.jsx("div",{className:"text-xs text-green-400 mt-2 ml-9",children:B.benefit})]})]}),l.jsxs("div",{className:"text-center text-sm text-gray-400 mt-4",children:["Next level at ",El(n).toLocaleString()," XP"]})]})},v=i.indexOf(o),M=o==="ability"&&c||o==="skill"&&p||o==="feat"&&h||o==="confirm";return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-900 border border-yellow-600/30 rounded-lg max-w-lg w-full max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 bg-gradient-to-r from-yellow-600/20 to-transparent",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(ra,{className:"w-6 h-6"}),"Kingdom Level Up!"]}),l.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[(H=e.kingdom)==null?void 0:H.name," is ready to advance to Level ",n,s&&l.jsx("span",{className:"text-purple-400 ml-2",children:" Gains a Feat!"})]})]}),l.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-800/50",children:i.map((D,G)=>l.jsx("div",{className:`flex-1 h-1 rounded ${G<v?"bg-green-500":G===v?"bg-yellow-500":"bg-gray-700"}`},D))}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o==="ability"&&f(),o==="skill"&&y(),o==="feat"&&L(),o==="confirm"&&S()]}),l.jsxs("div",{className:"p-4 border-t border-gray-800 flex justify-between",children:[l.jsx("button",{onClick:()=>{const D=m();D?a(D):r()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:o==="ability"?"Cancel":"Back"}),o!=="confirm"&&l.jsx("button",{onClick:()=>a(T()),disabled:!M,className:`px-4 py-2 rounded ${M?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"Next"}),o==="confirm"&&l.jsxs("button",{onClick:u,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded flex items-center gap-2",children:[l.jsx(zn,{className:"w-4 h-4"}),"Level Up!"]})]})]})})}const Ih={Arts:c0,Folklore:f0,Magic:Gd,Scholarship:r0,Boating:p0,Engineering:Yp,Exploration:Gp,Industry:Kp,Trade:Xd,Intrigue:Zp,Politics:b0,Statecraft:Xo,Warfare:jl,Agriculture:hr,Defense:ea,Wilderness:v0},$h={Culture:"text-purple-400",Economy:"text-yellow-400",Loyalty:"text-red-400",Stability:"text-green-400"},zh={Untrained:"text-gray-500",Trained:"text-blue-400",Expert:"text-purple-400",Master:"text-yellow-400",Legendary:"text-orange-400"};function Ah({state:e,onStateChange:t,onLog:r}){var d;const[n,s]=C.useState(null),[i,o]=C.useState(!1),a=p=>{const g=Dh(e,p);if(!g.success){r==null||r(g.error,"failure");return}t(g.state),r==null||r(`Trained ${p} to ${g.newProficiency} (-${g.cost} RP)`,"success"),s(null),o(!1)},c=((d=e.resources)==null?void 0:d.rp)||0;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(Js,{className:"w-6 h-6"}),"Kingdom Skills"]}),l.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[l.jsx(_n,{className:"w-4 h-4 text-yellow-400"}),c," RP available"]})]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Skills can be trained using RP. Each proficiency level costs more than the last. Level ups also grant skill training at no cost."}),nl.map(p=>{var g,h,w;return l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("h3",{className:`font-semibold mb-3 flex items-center gap-2 ${$h[p]}`,children:[p,l.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["Score: ",((g=e.abilities)==null?void 0:g[p])||10," (",Math.floor(((((h=e.abilities)==null?void 0:h[p])||10)-10)/2)>=0?"+":"",Math.floor(((((w=e.abilities)==null?void 0:w[p])||10)-10)/2),")"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Nl[p].map(k=>{var L,S;const b=Ih[k]||Js,T=((L=e.skillProficiencies)==null?void 0:L[k])||"Untrained",m=af(T),u=m!==null&&c>=m,f=n===k,y=Ml(e,k);return l.jsxs("div",{className:`p-3 rounded-lg border transition-all ${f?"bg-blue-500/20 border-blue-500":"bg-white/5 border-white/10 hover:border-white/30"}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(b,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"font-medium",children:k})]}),l.jsxs("span",{className:`text-sm font-bold ${y.total>=0?"text-green-400":"text-red-400"}`,children:[y.total>=0?"+":"",y.total]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("span",{className:`text-xs ${zh[T]}`,children:[T,T!=="Untrained"&&l.jsxs("span",{className:"text-gray-500 ml-1",children:["(+",la(T,((S=e.kingdom)==null?void 0:S.level)||1),")"]})]}),m!==null?l.jsxs("button",{onClick:()=>{f&&i?a(k):(s(k),o(!1))},disabled:!u,className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${u?f?"bg-green-500 text-black hover:bg-green-400":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[l.jsx(qp,{className:"w-3 h-3"}),m," RP"]}):l.jsx("span",{className:"text-xs text-gray-500",children:"Max"})]}),f&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[l.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Train to ",_h(T)," for ",m," RP?"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>a(k),disabled:!u,className:`flex-1 px-2 py-1 rounded text-xs flex items-center justify-center gap-1 ${u?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[l.jsx(zn,{className:"w-3 h-3"}),"Confirm"]}),l.jsx("button",{onClick:()=>s(null),className:"flex-1 px-2 py-1 rounded text-xs bg-gray-700 hover:bg-gray-600",children:"Cancel"})]})]}),f&&l.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-0.5",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Ability:"}),l.jsxs("span",{children:[y.abilityMod>=0?"+":"",y.abilityMod]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Proficiency:"}),l.jsxs("span",{children:["+",y.profBonus]})]}),y.leaderBonus>0&&l.jsxs("div",{className:"flex justify-between text-green-400",children:[l.jsx("span",{children:"Leader:"}),l.jsxs("span",{children:["+",y.leaderBonus]})]}),y.itemBonus>0&&l.jsxs("div",{className:"flex justify-between text-blue-400",children:[l.jsx("span",{children:"Item:"}),l.jsxs("span",{children:["+",y.itemBonus]})]}),y.unrestPenalty>0&&l.jsxs("div",{className:"flex justify-between text-red-400",children:[l.jsx("span",{children:"Unrest:"}),l.jsxs("span",{children:["-",y.unrestPenalty]})]})]})]},k)})})]},p)})]})}function _h(e){const t=["Untrained","Trained","Expert","Master","Legendary"],r=t.indexOf(e);return t[Math.min(r+1,t.length-1)]}const ve="/pathfinder-kingdom-manager/",Ec={houses:`${ve}assets/buildings/cottage-1.png`,inn:`${ve}assets/buildings/inn-1.png`,tavern:`${ve}assets/buildings/inn-2.png`,temple:`${ve}assets/buildings/temple-1.png`,shrine:`${ve}assets/buildings/temple-2.png`,granary:`${ve}assets/buildings/cottage-2.png`,smithy:`${ve}assets/buildings/smithy-1.png`,brewery:`${ve}assets/buildings/brewery-1.png`,"general-store":`${ve}assets/buildings/general-store.png`,cemetery:`${ve}assets/buildings/cemetery.png`,herbalist:`${ve}assets/buildings/herbalist.png`,mill:`${ve}assets/buildings/mill.png`,stable:`${ve}assets/buildings/stable.png`,watchtower:`${ve}assets/buildings/watchtower.png`,stonemason:`${ve}assets/buildings/stonemason.png`,stockyard:`${ve}assets/buildings/stockyard.png`,barracks:`${ve}assets/buildings/barracks.png`,marketplace:`${ve}assets/buildings/marketplace.png`,castle:`${ve}assets/buildings/castle.png`,"town-hall":`${ve}assets/buildings/town-hall.png`},Ve=96,Rt=48;function Tc(e,t,r){const n=(e-t)*(Ve/2)+r*Ve/2,s=(e+t)*(Rt/2)+20;return{px:n,py:s}}function si(e,t){const r=Ve/2,n=Rt/2;return`M ${e} ${t-n} L ${e+r} ${t} L ${e} ${t+n} L ${e-r} ${t} Z`}function Oh({settlement:e,state:t,onUpdateSettlement:r,onLog:n}){var ne,ie,se,Se,Ie,Ze,Je,kt;const[s,i]=C.useState(""),[o,a]=C.useState(null),[c,d]=C.useState(null),[p,g]=C.useState(null),[h,w]=C.useState(!0),[k,b]=C.useState(1),T=C.useRef(null),m=((ne=t.kingdom)==null?void 0:ne.level)||1,u=((ie=t.resources)==null?void 0:ie.rp)||0,y=(N=>N<=4?{type:"Village",maxLots:16,cols:4,rows:4}:N<=8?{type:"Town",maxLots:32,cols:8,rows:4}:N<=16?{type:"City",maxLots:64,cols:8,rows:8}:{type:"Metropolis",maxLots:144,cols:12,rows:12})(e.blocks||1),L=(y.cols+y.rows)*(Ve/2)+Ve,S=(y.cols+y.rows)*(Rt/2)+Rt+80,v=C.useMemo(()=>{let N=C0(m);if(s){const $=s.toLowerCase();N=N.filter(j=>{var x;return j.name.toLowerCase().includes($)||((x=j.effects)==null?void 0:x.toLowerCase().includes($))})}return o!==null&&(N=N.filter($=>$.level===o)),N.sort(($,j)=>$.level-j.level||$.name.localeCompare(j.name))},[m,s,o]),M=C.useCallback(N=>{var j,x,P,F;const $=N.cost||{};return!($.rp&&u<$.rp||$.lumber&&(((j=t.resources)==null?void 0:j.lumber)||0)<$.lumber||$.stone&&(((x=t.resources)==null?void 0:x.stone)||0)<$.stone||$.ore&&(((P=t.resources)==null?void 0:P.ore)||0)<$.ore||$.luxuries&&(((F=t.resources)==null?void 0:F.luxuries)||0)<$.luxuries)},[u,t.resources]),z=C.useCallback((N,$)=>{var F,V,ee,te,ye;if(!$||N>=y.maxLots||(F=e.structures)!=null&&F[N])return!1;const j=$.lots||1,x=N%y.cols,P=Math.floor(N/y.cols);if(j===2&&x+2>y.cols||j===4&&(x+2>y.cols||P+2>y.rows)||j>=2&&((V=e.structures)!=null&&V[N+1])||j===4&&((ee=e.structures)!=null&&ee[N+y.cols]||(te=e.structures)!=null&&te[N+y.cols+1]))return!1;if($.requiresWater){const Pe=((ye=e.mapConfig)==null?void 0:ye.waterfront)||"none";if(!(Pe==="south"&&P===y.rows-1||Pe==="north"&&P===0||Pe==="east"&&x===y.cols-1||Pe==="west"&&x===0))return!1}return!0},[e,y]),H=C.useCallback((N,$)=>{if(!M(N)||!z($,N))return;const j=N.cost||{},x={...t.resources};Object.entries(j).forEach(([V,ee])=>{x[V]&&(x[V]-=ee)});const P=[...e.structures||[]],F=N.lots||1;P[$]=N.id,F>=2&&(P[$+1]=`${N.id}_part`),F===4&&(P[$+y.cols]=`${N.id}_part`,P[$+y.cols+1]=`${N.id}_part`),r({...e,structures:P},x),n==null||n(`Built ${N.name} in ${e.name}`,"success")},[e,t.resources,M,z,r,n,y]),D=C.useCallback(N=>{var F;const $=(F=e.structures)==null?void 0:F[N];if(!$||$.endsWith("_part"))return;const j=Bn($),x=[...e.structures||[]],P=(j==null?void 0:j.lots)||1;x[N]=null,P>=2&&(x[N+1]=null),P===4&&(x[N+y.cols]=null,x[N+y.cols+1]=null),r({...e,structures:x},t.resources),n==null||n(`Demolished ${j==null?void 0:j.name}`,"info")},[e,t.resources,r,n,y]),G=(N,$)=>{if(!M($)){N.preventDefault();return}d($),N.dataTransfer.effectAllowed="copy",N.dataTransfer.setData("text/plain",$.id)},X=()=>{d(null),g(null)},K=C.useCallback((N,$)=>{if(!T.current)return null;const j=T.current.getBoundingClientRect(),x=k,P=(N-j.left)/x,F=($-j.top)/x,V=y.cols*Ve/2,ee=20,te=P-V,ye=F-ee,Pe=Math.floor((te/(Ve/2)+ye/(Rt/2))/2),mt=Math.floor((ye/(Rt/2)-te/(Ve/2))/2);return Pe<0||Pe>=y.cols||mt<0||mt>=y.rows?null:mt*y.cols+Pe},[y,k]),B=C.useCallback(N=>{N.preventDefault();const $=K(N.clientX,N.clientY);$!==null&&c&&z($,c)?(N.dataTransfer.dropEffect="copy",g($)):g(null)},[K,c,z]),ue=C.useCallback(N=>{N.preventDefault();const $=K(N.clientX,N.clientY);$!==null&&c&&z($,c)&&H(c,$),X()},[K,c,z,H]),de=C.useMemo(()=>{var $;const N=(($=e.mapConfig)==null?void 0:$.waterfront)||"none";return Array(y.maxLots).fill(null).map((j,x)=>{var gr;const P=x%y.cols,F=Math.floor(x/y.cols),{px:V,py:ee}=Tc(P,F,y.cols),te=N==="south"&&F===y.rows-1||N==="north"&&F===0||N==="east"&&P===y.cols-1||N==="west"&&P===0,ye=(gr=e.structures)==null?void 0:gr[x],Pe=!!ye,mt=ye==null?void 0:ye.endsWith("_part");return{i:x,col:P,row:F,px:V,py:ee,isWater:te,isOccupied:Pe,isPart:mt,structureId:ye}})},[e,y]),I=C.useMemo(()=>{const N=[],$=new Set;return(e.structures||[]).forEach((j,x)=>{if(!j||j.endsWith("_part")||$.has(x))return;const P=Bn(j);if(!P)return;const F=x%y.cols,V=Math.floor(x/y.cols),ee=P.lots||1,te=ee>=2?2:1,ye=ee===4?2:1,Pe=F+(te-1)/2,mt=V+(ye-1)/2,{px:gr,py:Xn}=Tc(Pe,mt,y.cols);N.push({structure:P,slotIndex:x,col:F,row:V,w:te,h:ye,px:gr,py:Xn,lots:ee}),$.add(x),ee>=2&&$.add(x+1),ee===4&&($.add(x+y.cols),$.add(x+y.cols+1))}),N.sort((j,x)=>j.py-x.py),N},[e.structures,y]),U=I.reduce((N,$)=>N+($.structure.lots||1),0),q=N=>{var x,P,F,V;const $=N.cost||{},j=[];return $.rp&&j.push(l.jsxs("span",{className:u>=$.rp?"text-yellow-400":"text-red-400",children:[$.rp," RP"]},"rp")),$.lumber&&j.push(l.jsxs("span",{className:(((x=t.resources)==null?void 0:x.lumber)||0)>=$.lumber?"text-green-400":"text-red-400",children:[$.lumber,""]},"l")),$.stone&&j.push(l.jsxs("span",{className:(((P=t.resources)==null?void 0:P.stone)||0)>=$.stone?"text-gray-300":"text-red-400",children:[$.stone,""]},"s")),$.ore&&j.push(l.jsxs("span",{className:(((F=t.resources)==null?void 0:F.ore)||0)>=$.ore?"text-orange-400":"text-red-400",children:[$.ore,""]},"o")),$.luxuries&&j.push(l.jsxs("span",{className:(((V=t.resources)==null?void 0:V.luxuries)||0)>=$.luxuries?"text-pink-400":"text-red-400",children:[$.luxuries,""]},"x")),j.length?j.reduce((ee,te,ye)=>[...ee,ye?" ":"",te],[]):l.jsx("span",{className:"text-green-400",children:"Free"})},A=N=>{if(N.isWater)return"#2a6496";const $=(N.col*7+N.row*13)%5;return["#4a7a3b","#527f42","#486e38","#5a8a48","#4f7540"][$]},Y=N=>N.isWater?"#1d4e78":"#3a5e2e";return l.jsxs("div",{className:"flex gap-4 h-[650px]",children:[l.jsxs("div",{className:"w-56 flex flex-col glass-card overflow-hidden",children:[l.jsxs("div",{className:"p-2 border-b border-white/10",children:[l.jsxs("h3",{className:"text-xs font-semibold text-yellow-400 mb-1 flex items-center gap-1",children:[l.jsx(Gr,{className:"w-3 h-3"})," Buildings"]}),l.jsxs("div",{className:"relative",children:[l.jsx(m0,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500"}),l.jsx("input",{type:"text",value:s,onChange:N=>i(N.target.value),placeholder:"Search...",className:"w-full bg-gray-800 border border-gray-700 rounded pl-7 pr-2 py-1 text-xs"})]}),l.jsx("div",{className:"flex gap-1 mt-1",children:[null,1,2,3].map(N=>l.jsx("button",{onClick:()=>a(N),disabled:N!==null&&N>m,className:`flex-1 px-1 py-0.5 rounded text-[10px] ${o===N?"bg-yellow-500/20 text-yellow-400":N&&N>m?"bg-gray-800 text-gray-600":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:N?`L${N}`:"All"},N??"all"))})]}),l.jsxs("div",{className:"px-2 py-1 bg-gray-800/50 text-[10px] flex flex-wrap gap-1 border-b border-white/10",children:[l.jsxs("span",{className:"text-yellow-400",children:[u,"RP"]}),l.jsxs("span",{className:"text-green-400",children:[((se=t.resources)==null?void 0:se.lumber)||0,""]}),l.jsxs("span",{className:"text-gray-300",children:[((Se=t.resources)==null?void 0:Se.stone)||0,""]}),l.jsxs("span",{className:"text-orange-400",children:[((Ie=t.resources)==null?void 0:Ie.ore)||0,""]}),l.jsxs("span",{className:"text-pink-400",children:[((Ze=t.resources)==null?void 0:Ze.luxuries)||0,""]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-1 space-y-1",children:v.map(N=>{const $=M(N),j=Ec[N.id];return l.jsxs("div",{draggable:$,onDragStart:x=>G(x,N),onDragEnd:X,className:`p-1.5 rounded border transition-all flex gap-2 ${$?"bg-white/5 border-white/10 hover:border-yellow-500/50 cursor-grab active:cursor-grabbing":"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded bg-gray-700/50 flex-shrink-0 overflow-hidden flex items-center justify-center",children:j?l.jsx("img",{src:j,alt:N.name,className:"w-full h-full object-contain"}):l.jsx("span",{className:"text-lg",children:""})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"font-medium text-[11px] text-yellow-400 truncate",children:N.name}),l.jsxs("span",{className:"text-[9px] bg-gray-700 px-1 rounded",children:["L",N.level]})]}),l.jsxs("div",{className:"text-[9px] text-gray-500",children:[N.lots>1?`${N.lots} lots`:"1 lot",N.requiresWater&&" "]}),l.jsx("div",{className:"text-[9px]",children:q(N)})]})]},N.id)})})]}),l.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-base font-semibold text-yellow-400",children:[e.name,e.isCapital&&l.jsx("span",{className:"ml-2 text-[10px] bg-yellow-500/20 text-yellow-400 px-1.5 py-0.5 rounded",children:"Capital"})]}),l.jsxs("div",{className:"text-xs text-gray-400",children:[y.type,"  ",U,"/",y.maxLots," lots",((Je=e.mapConfig)==null?void 0:Je.waterfront)!=="none"&&`  ${(kt=e.mapConfig)==null?void 0:kt.waterfront} waterfront`]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>w(!h),className:`p-1.5 rounded text-xs ${h?"bg-yellow-500/20 text-yellow-400":"bg-gray-800 text-gray-400"}`,title:"Toggle grid",children:l.jsx(l0,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>b(N=>Math.max(.5,N-.25)),className:"p-1.5 rounded bg-gray-800 text-gray-400 hover:bg-gray-700",children:l.jsx(Zd,{className:"w-4 h-4"})}),l.jsxs("span",{className:"text-[10px] text-gray-400 w-8 text-center",children:[Math.round(k*100),"%"]}),l.jsx("button",{onClick:()=>b(N=>Math.min(2,N+.25)),className:"p-1.5 rounded bg-gray-800 text-gray-400 hover:bg-gray-700",children:l.jsx(Kd,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex-1 rounded-lg overflow-auto relative",style:{background:"radial-gradient(ellipse at center, #1a2e1a 0%, #0d1a0d 100%)"},children:[l.jsx("div",{className:"min-w-full min-h-full flex items-center justify-center p-4",children:l.jsxs("svg",{ref:T,width:L*k,height:S*k,viewBox:`0 0 ${L} ${S}`,onDragOver:B,onDragLeave:()=>g(null),onDrop:ue,className:"select-none",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"waterGrad",x1:"0",y1:"0",x2:"1",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#2a6496"}),l.jsx("stop",{offset:"50%",stopColor:"#3a7ab6"}),l.jsx("stop",{offset:"100%",stopColor:"#2a6496"})]}),l.jsxs("filter",{id:"glow",children:[l.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"blur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),de.map(N=>{const $=A(N),j=Y(N),x=p===N.i,P=c&&z(N.i,c);return l.jsxs("g",{children:[l.jsx("path",{d:si(N.px,N.py),fill:N.isWater?"url(#waterGrad)":$,stroke:x?"#4ade80":P?"#facc15":j,strokeWidth:x?2.5:P?1.5:.8,opacity:h?1:.95,filter:x?"url(#glow)":void 0,className:"transition-colors"}),P&&l.jsx("path",{d:si(N.px,N.py),fill:x?"rgba(74, 222, 128, 0.35)":"rgba(250, 204, 21, 0.15)",stroke:"none"}),h&&!N.isOccupied&&l.jsx("path",{d:si(N.px,N.py),fill:"none",stroke:"rgba(255,255,255,0.08)",strokeWidth:"0.5",strokeDasharray:"3 3"}),N.isWater&&l.jsxs(l.Fragment,{children:[l.jsx("line",{x1:N.px-Ve*.25,y1:N.py-2,x2:N.px+Ve*.25,y2:N.py-2,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1",strokeLinecap:"round"}),l.jsx("line",{x1:N.px-Ve*.15,y1:N.py+5,x2:N.px+Ve*.15,y2:N.py+5,stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.8",strokeLinecap:"round"})]})]},N.i)}),I.map(N=>{const $=Ec[N.structure.id],j=Ve*(N.w===2?2.2:1.3),x=j*1.3,P=N.px-j/2,F=N.py-x+Rt*.15;return l.jsxs("g",{className:"cursor-pointer",children:[l.jsx("ellipse",{cx:N.px,cy:N.py+2,rx:j*.35,ry:Rt*.25,fill:"rgba(0,0,0,0.3)"}),$?l.jsx("image",{href:$,x:P,y:F,width:j,height:x,preserveAspectRatio:"xMidYMax meet"}):l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:N.px-30,y:N.py-50,width:60,height:50,rx:4,fill:"#6b5b3d",opacity:.9,stroke:"#8b7355",strokeWidth:1.5}),l.jsx("polygon",{points:`${N.px-30},${N.py-50} ${N.px},${N.py-68} ${N.px+30},${N.py-50}`,fill:"#a0522d",stroke:"#8b4513",strokeWidth:.5}),l.jsx("text",{x:N.px,y:N.py-14,textAnchor:"middle",fontSize:"14",fill:"white",children:""})]}),l.jsxs("g",{opacity:"0",className:"building-label",children:[l.jsx("rect",{x:N.px-40,y:F-16,width:80,height:14,rx:3,fill:"rgba(0,0,0,0.85)"}),l.jsx("text",{x:N.px,y:F-6,textAnchor:"middle",fontSize:"9",fill:"#facc15",fontFamily:"sans-serif",children:N.structure.name})]})]},N.slotIndex)})]})}),c&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/90 text-yellow-400 text-sm px-4 py-2 rounded-full shadow-lg border border-yellow-500/30",children:["Drop ",l.jsx("strong",{children:c.name})," on a highlighted tile"]})]})]}),I.length>0&&l.jsxs("div",{className:"w-44 glass-card p-2 flex flex-col overflow-hidden",children:[l.jsxs("h4",{className:"text-xs font-semibold text-yellow-400 mb-1 flex items-center gap-1",children:[l.jsx(Yd,{className:"w-3 h-3"})," Built (",I.length,")"]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 text-[10px]",children:I.map(N=>l.jsxs("div",{className:"p-1.5 bg-white/5 rounded group relative",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"font-medium text-purple-400",children:N.structure.name}),l.jsx("button",{onClick:()=>D(N.slotIndex),className:"w-4 h-4 bg-red-600/80 rounded-full hidden group-hover:flex items-center justify-center hover:bg-red-500",title:"Demolish",children:l.jsx(Sl,{className:"w-2.5 h-2.5 text-white"})})]}),N.structure.effects&&l.jsx("div",{className:"text-gray-400 mt-0.5",children:N.structure.effects})]},N.slotIndex))})]})]})}const Pc=[{id:"artistic-masterpiece",name:"Artistic Masterpiece",description:"A renowned artist seeks patronage to create a great work in your kingdom.",skill:"Arts",dcModifier:0,outcomes:{criticalSuccess:{fame:2,unrest:-1,message:"The masterpiece becomes legendary, drawing visitors from afar!"},success:{fame:1,message:"A beautiful work is created that brings pride to your people."},failure:{rp:-1,message:"The project stalls due to creative differences."},criticalFailure:{rp:-2,unrest:1,message:"The artist creates a controversial piece that divides opinion."}}},{id:"theater-troupe",name:"Traveling Theater",description:"A theater troupe arrives seeking permission to perform.",skill:"Arts",dcModifier:-2,outcomes:{criticalSuccess:{unrest:-2,fame:1,message:"The performances are a sensation! Everyone is talking about them."},success:{unrest:-1,message:"The shows provide welcome entertainment."},failure:{message:"Mediocre performances draw modest crowds."},criticalFailure:{unrest:1,message:"The troupe's bawdy show offends local sensibilities."}}},{id:"religious-festival",name:"Religious Festival",description:"A holy day approaches and the faithful expect celebrations.",skill:"Folklore",dcModifier:-2,outcomes:{criticalSuccess:{unrest:-2,fame:1,message:"A magnificent festival that will be remembered for years!"},success:{unrest:-1,message:"The celebration brings joy to the people."},failure:{message:"A modest observance, neither memorable nor disappointing."},criticalFailure:{unrest:1,ruin:{Corruption:1},message:"The festival descends into debauchery and scandal."}}},{id:"local-legend",name:"Local Legend Surfaces",description:"Tales of buried treasure or a lost ruin spread through the populace.",skill:"Folklore",dcModifier:0,outcomes:{criticalSuccess:{luxuries:2,xp:20,message:"The legend proves true! Treasure is recovered!"},success:{luxuries:1,message:"Some valuables are found at the legendary site."},failure:{unrest:1,message:"Treasure hunters cause problems searching for nothing."},criticalFailure:{unrest:2,message:'The "treasure hunt" turns into a lawless rush.'}}},{id:"arcane-discovery",name:"Arcane Discovery",description:"Scholars have uncovered an ancient magical artifact or text.",skill:"Magic",dcModifier:0,outcomes:{criticalSuccess:{luxuries:2,xp:20,message:"A powerful artifact is safely recovered!"},success:{luxuries:1,message:"The discovery yields valuable magical resources."},failure:{message:"The discovery proves less significant than hoped."},criticalFailure:{unrest:1,ruin:{Corruption:1},message:"The artifact releases harmful magical energy!"}}},{id:"wild-magic",name:"Wild Magic Surge",description:"Strange magical phenomena manifest across the kingdom.",skill:"Magic",dcModifier:2,outcomes:{criticalSuccess:{luxuries:1,fame:1,message:"Mages harness the surge for beneficial effects!"},success:{message:"The magic is contained without incident."},failure:{unrest:1,message:"Strange effects unnerve the populace."},criticalFailure:{unrest:2,ruin:{Corruption:1},message:"Magical chaos damages property and injures citizens!"}}},{id:"visiting-scholar",name:"Visiting Scholar",description:"A renowned sage seeks to establish a library or academy.",skill:"Scholarship",dcModifier:0,outcomes:{criticalSuccess:{fame:1,xp:20,message:"The scholar establishes a center of learning!"},success:{xp:10,message:"Valuable knowledge is shared with your people."},failure:{message:"The scholar moves on, unimpressed by local facilities."},criticalFailure:{infamy:1,message:"The scholar publicly criticizes your kingdom's ignorance."}}},{id:"historical-dispute",name:"Historical Dispute",description:"Two factions argue over historical claims to land or titles.",skill:"Scholarship",dcModifier:0,outcomes:{criticalSuccess:{unrest:-1,fame:1,message:"Your wise ruling satisfies all parties!"},success:{message:"A fair compromise is reached."},failure:{unrest:1,message:"The dispute remains unresolved and simmers."},criticalFailure:{unrest:2,ruin:{Strife:1},message:"Your ruling enrages one faction!"}}},{id:"river-trade",name:"River Trade Boom",description:"Merchants seek to establish river trade routes through your territory.",skill:"Boating",dcModifier:0,outcomes:{criticalSuccess:{rp:3,fame:1,message:"Your waterways become a major trade artery!"},success:{rp:2,message:"River trade brings prosperity."},failure:{message:"Trade routes prove impractical."},criticalFailure:{rp:-1,message:"A shipping accident damages your reputation."}}},{id:"flooding",name:"River Flooding",description:"Heavy rains cause rivers to overflow their banks.",skill:"Boating",dcModifier:2,outcomes:{criticalSuccess:{message:"Excellent preparations prevent all damage."},success:{message:"Minor flooding is quickly managed."},failure:{food:-1,unrest:1,message:"Floods damage farmland and homes."},criticalFailure:{food:-2,unrest:2,ruin:{Decay:1},message:"Catastrophic flooding destroys crops and buildings!"}}},{id:"natural-disaster",name:"Natural Disaster",description:"Earthquakes or storms threaten your settlements.",skill:"Engineering",dcModifier:2,outcomes:{criticalSuccess:{message:"Your preparations minimize all damage."},success:{message:"Some damage occurs but recovery is swift."},failure:{rp:-2,unrest:1,message:"Significant damage requires costly repairs."},criticalFailure:{rp:-4,unrest:2,ruin:{Decay:1},message:"Devastation! Buildings collapse and resources are lost."}}},{id:"infrastructure-decay",name:"Infrastructure Decay",description:"Roads and bridges show signs of wear and neglect.",skill:"Engineering",dcModifier:0,outcomes:{criticalSuccess:{fame:1,message:"Repairs improve infrastructure beyond its original state!"},success:{message:"Necessary repairs are completed efficiently."},failure:{rp:-1,message:"Repairs cost more than expected."},criticalFailure:{rp:-2,unrest:1,ruin:{Decay:1},message:"A bridge collapses! Someone may have been hurt."}}},{id:"new-resources",name:"Resource Discovery",description:"Explorers report finding valuable resources in unclaimed territory.",skill:"Exploration",dcModifier:0,outcomes:{criticalSuccess:{ore:2,stone:1,xp:20,message:"A major deposit is discovered!"},success:{ore:1,message:"Useful resources are found."},failure:{message:"The reports prove exaggerated."},criticalFailure:{unrest:1,message:"Expeditions return empty-handed after costly efforts."}}},{id:"lost-expedition",name:"Lost Expedition",description:"An exploration party has gone missing in the wilderness.",skill:"Exploration",dcModifier:2,outcomes:{criticalSuccess:{fame:1,xp:30,message:"The expedition is rescued with valuable discoveries!"},success:{message:"The lost explorers are found and returned safely."},failure:{unrest:1,message:"The search fails; the expedition is presumed lost."},criticalFailure:{unrest:2,message:"The rescue party also goes missing!"}}},{id:"labor-dispute",name:"Labor Dispute",description:"Workers are protesting conditions and demanding better treatment.",skill:"Industry",dcModifier:0,outcomes:{criticalSuccess:{unrest:-2,message:"You address their concerns with wisdom, earning loyalty."},success:{unrest:-1,message:"A fair compromise is reached."},failure:{unrest:1,message:"The dispute drags on, souring morale."},criticalFailure:{unrest:3,ruin:{Strife:1},message:"The protest turns into a riot!"}}},{id:"production-boom",name:"Production Boom",description:"Favorable conditions lead to increased industrial output.",skill:"Industry",dcModifier:-2,outcomes:{criticalSuccess:{lumber:2,ore:1,stone:1,message:"Exceptional productivity across all sectors!"},success:{lumber:1,ore:1,message:"Good output from your work sites."},failure:{message:"Production remains steady, nothing special."},criticalFailure:{unrest:1,message:"Overwork leads to accidents and complaints."}}},{id:"trade-opportunity",name:"Trade Opportunity",description:"Merchants from distant lands arrive seeking to establish trade.",skill:"Trade",dcModifier:0,outcomes:{criticalSuccess:{rp:4,luxuries:1,message:"Lucrative trade deals are struck!"},success:{rp:2,message:"Fair trade agreements are established."},failure:{message:"Negotiations stall but no harm done."},criticalFailure:{rp:-1,unrest:1,message:"Trade talks break down acrimoniously."}}},{id:"merchant-caravan",name:"Merchant Caravan",description:"A large merchant caravan requests passage and trading rights.",skill:"Trade",dcModifier:-2,outcomes:{criticalSuccess:{rp:3,luxuries:1,message:"Excellent trade and lasting connections!"},success:{rp:2,message:"Profitable trading for all parties."},failure:{rp:1,message:"Minimal trade, but tolls collected."},criticalFailure:{unrest:1,ruin:{Crime:1},message:"The caravan brought thieves and swindlers!"}}},{id:"spy-discovered",name:"Spy Discovered",description:"A foreign spy has been discovered in your kingdom.",skill:"Intrigue",dcModifier:2,outcomes:{criticalSuccess:{fame:1,xp:20,message:"The spy is captured and turned into a double agent!"},success:{message:"The spy is captured and expelled."},failure:{message:"The spy escapes but causes no immediate harm."},criticalFailure:{infamy:1,ruin:{Crime:1},message:"The spy escapes with sensitive information."}}},{id:"assassination-plot",name:"Assassination Plot",description:"Rumors of a plot against kingdom leadership surface.",skill:"Intrigue",dcModifier:2,outcomes:{criticalSuccess:{fame:1,message:"The plotters are exposed and brought to justice!"},success:{message:"The plot is foiled before anyone is harmed."},failure:{unrest:1,message:"The threat lingers, keeping everyone on edge."},criticalFailure:{unrest:2,ruin:{Crime:1},message:"An attempt is made! A leader is wounded."}}},{id:"diplomatic-visit",name:"Diplomatic Visit",description:"Envoys from a neighboring nation arrive seeking audience.",skill:"Politics",dcModifier:0,outcomes:{criticalSuccess:{fame:1,unrest:-1,message:"Your diplomatic prowess impresses the envoys greatly."},success:{message:"The visit goes smoothly and goodwill is established."},failure:{message:"The envoys depart without incident but unimpressed."},criticalFailure:{infamy:1,unrest:1,message:"A diplomatic incident damages your reputation."}}},{id:"squatters",name:"Squatters",description:"Homeless refugees have settled in your territory without permission.",skill:"Politics",dcModifier:0,outcomes:{criticalSuccess:{fame:1,unrest:-1,message:"You integrate the refugees as productive citizens!"},success:{message:"The squatters are peacefully relocated."},failure:{unrest:1,message:"Tensions arise between squatters and citizens."},criticalFailure:{unrest:2,ruin:{Strife:1},message:"Conflict erupts between the groups!"}}},{id:"succession-crisis",name:"Succession Question",description:"Citizens question the legitimacy or succession of leadership.",skill:"Statecraft",dcModifier:2,outcomes:{criticalSuccess:{fame:1,unrest:-1,message:"Your authority is reaffirmed with popular support!"},success:{message:"Concerns are addressed and stability maintained."},failure:{unrest:1,message:"Grumbling continues but no action is taken."},criticalFailure:{unrest:3,ruin:{Strife:1},message:"A rival faction openly challenges leadership!"}}},{id:"new-laws",name:"Legal Reform",description:"Citizens petition for new laws or changes to existing ones.",skill:"Statecraft",dcModifier:0,outcomes:{criticalSuccess:{fame:1,unrest:-1,message:"Your wise laws become a model for the region!"},success:{message:"Fair laws are enacted to general approval."},failure:{unrest:1,message:"The changes please no one."},criticalFailure:{unrest:2,message:"The new laws cause outrage and protests!"}}},{id:"bandit-activity",name:"Bandit Activity",description:"Bandits have been raiding trade routes and farms.",skill:"Warfare",dcModifier:0,outcomes:{criticalSuccess:{fame:1,xp:20,message:"Your forces crush the bandits decisively!"},success:{message:"The bandits are driven off with minimal losses."},failure:{food:-1,unrest:1,message:"Bandits escape with stolen goods."},criticalFailure:{food:-2,unrest:2,ruin:{Crime:1},message:"Bandits run rampant, stealing and terrorizing citizens."}}},{id:"border-skirmish",name:"Border Skirmish",description:"Armed forces from a neighboring territory test your borders.",skill:"Warfare",dcModifier:2,outcomes:{criticalSuccess:{fame:1,xp:30,message:"A decisive victory sends a clear message!"},success:{message:"The incursion is repelled."},failure:{unrest:1,message:"Skirmishes continue; citizens feel unsafe."},criticalFailure:{unrest:2,ruin:{Strife:1},message:"Territory is lost or citizens are taken captive!"}}},{id:"bountiful-harvest",name:"Bountiful Harvest",description:"Favorable weather and fertile soil have led to an exceptional harvest.",skill:"Agriculture",dcModifier:-2,outcomes:{criticalSuccess:{food:3,unrest:-1,message:"The harvest is legendary! Surplus food fills every storehouse."},success:{food:2,message:"An excellent harvest provides extra food."},failure:{food:1,message:"A decent harvest, nothing special."},criticalFailure:{unrest:1,message:"The harvest celebration draws criticism for wastefulness."}}},{id:"crop-blight",name:"Crop Blight",description:"A mysterious blight threatens this season's crops.",skill:"Agriculture",dcModifier:2,outcomes:{criticalSuccess:{food:1,message:"Quick action saves the crops and prevents spread!"},success:{message:"The blight is contained with minimal losses."},failure:{food:-1,unrest:1,message:"Significant crop losses this season."},criticalFailure:{food:-2,unrest:2,message:"The blight devastates the harvest!"}}},{id:"disease-outbreak",name:"Disease Outbreak",description:"A sickness spreads through one of your settlements.",skill:"Defense",dcModifier:2,outcomes:{criticalSuccess:{fame:1,unrest:-1,message:"Swift action contains the outbreak and saves lives."},success:{message:"The disease is contained with some effort."},failure:{unrest:2,message:"The outbreak spreads before being contained."},criticalFailure:{unrest:3,ruin:{Decay:1},message:"The plague ravages the population."}}},{id:"fire-outbreak",name:"Fire!",description:"A fire breaks out in a settlement.",skill:"Defense",dcModifier:0,outcomes:{criticalSuccess:{fame:1,message:"Heroes emerge as the fire is quickly contained!"},success:{message:"The fire is put out with minor damage."},failure:{rp:-1,unrest:1,message:"Several buildings are damaged."},criticalFailure:{rp:-3,unrest:2,ruin:{Decay:1},message:"The fire spreads, destroying a city block!"}}},{id:"monster-sighting",name:"Monster Sighting",description:"A dangerous creature has been spotted in your territory.",skill:"Wilderness",dcModifier:0,outcomes:{criticalSuccess:{xp:30,fame:1,message:"The beast is slain and becomes a trophy of your might!"},success:{xp:10,message:"The creature is driven away from settled areas."},failure:{unrest:1,message:"The creature escapes, leaving citizens fearful."},criticalFailure:{unrest:2,food:-1,message:"The monster attacks livestock and citizens flee in terror."}}},{id:"fey-mischief",name:"Fey Mischief",description:"Mischievous fey creatures are causing trouble.",skill:"Wilderness",dcModifier:0,outcomes:{criticalSuccess:{luxuries:1,message:"You befriend the fey, who offer gifts!"},success:{message:"The fey are appeased and cease their pranks."},failure:{unrest:1,message:"The pranks continue, annoying everyone."},criticalFailure:{unrest:2,food:-1,message:"The fey escalate to sabotage and theft!"}}},{id:"good-omens",name:"Good Omens",description:"Strange but fortuitous signs appear across the land.",skill:"Wilderness",dcModifier:-2,outcomes:{criticalSuccess:{fame:1,unrest:-2,message:"The omens herald great fortune! Morale soars!"},success:{unrest:-1,message:"Citizens take heart from the positive signs."},failure:{message:"The omens fade without effect."},criticalFailure:{unrest:1,message:"Superstitious citizens see the signs as warnings."}}}],Bh=()=>{const e=Math.floor(Math.random()*Pc.length);return Pc[e]},Hh=(e,t)=>{var d,p;const r=Qn(((d=e.kingdom)==null?void 0:d.hexes)||1),n=na(((p=e.kingdom)==null?void 0:p.level)||1)+r.dcMod+(t.dcModifier||0),s=Ml(e,t.skill),i=s.total,o=Math.floor(Math.random()*20)+1,a=o+i;let c;return o===20&&a>=n?c="criticalSuccess":o===1&&a<n+10?c="criticalFailure":a>=n+10?c="criticalSuccess":a>=n?c="success":a<=n-10?c="criticalFailure":c="failure",{roll:o,modifier:i,total:a,dc:n,degree:c,outcome:t.outcomes[c],breakdown:s}},Uh=(e,t)=>{var s,i,o,a,c,d,p,g,h;let r={...e};const n=[];if(t.rp){const w=Math.max(0,(((s=r.resources)==null?void 0:s.rp)||0)+t.rp);r={...r,resources:{...r.resources,rp:w}},n.push(t.rp>0?`+${t.rp} RP`:`${t.rp} RP`)}if(t.food){const w=Math.max(0,(((i=r.resources)==null?void 0:i.food)||0)+t.food);r={...r,resources:{...r.resources,food:w}},n.push(t.food>0?`+${t.food} Food`:`${t.food} Food`)}if(t.lumber){const w=Math.max(0,(((o=r.resources)==null?void 0:o.lumber)||0)+t.lumber);r={...r,resources:{...r.resources,lumber:w}},n.push(t.lumber>0?`+${t.lumber} Lumber`:`${t.lumber} Lumber`)}if(t.ore){const w=Math.max(0,(((a=r.resources)==null?void 0:a.ore)||0)+t.ore);r={...r,resources:{...r.resources,ore:w}},n.push(t.ore>0?`+${t.ore} Ore`:`${t.ore} Ore`)}if(t.stone){const w=Math.max(0,(((c=r.resources)==null?void 0:c.stone)||0)+t.stone);r={...r,resources:{...r.resources,stone:w}},n.push(t.stone>0?`+${t.stone} Stone`:`${t.stone} Stone`)}if(t.luxuries){const w=Math.max(0,(((d=r.resources)==null?void 0:d.luxuries)||0)+t.luxuries);r={...r,resources:{...r.resources,luxuries:w}},n.push(t.luxuries>0?`+${t.luxuries} Luxuries`:`${t.luxuries} Luxuries`)}if(t.unrest){const w=Math.max(0,(r.unrest||0)+t.unrest);r={...r,unrest:w},n.push(t.unrest>0?`+${t.unrest} Unrest`:`${t.unrest} Unrest`)}if(t.fame){const w=Math.max(0,(((p=r.kingdom)==null?void 0:p.fame)||0)+t.fame);r={...r,kingdom:{...r.kingdom,fame:w}},n.push(`+${t.fame} Fame`)}if(t.infamy){const w=Math.max(0,(((g=r.kingdom)==null?void 0:g.infamy)||0)+t.infamy);r={...r,kingdom:{...r.kingdom,infamy:w}},n.push(`+${t.infamy} Infamy`)}if(t.xp){const w=(((h=r.kingdom)==null?void 0:h.xp)||0)+t.xp;r={...r,kingdom:{...r.kingdom,xp:w}},n.push(`+${t.xp} XP`)}if(t.ruin){const w={...r.ruin};for(const[k,b]of Object.entries(t.ruin))w[k]=Math.max(0,(w[k]||0)+b),n.push(`+${b} ${k}`);r={...r,ruin:w}}return{state:r,log:n}},Wh=e=>{const t=Bh(),r=Hh(e,t),{state:n,log:s}=Uh(e,r.outcome);return{state:{...n,turn:{...n.turn,phaseComplete:{...n.turn.phaseComplete,event:!0},lastEvent:{id:t.id,name:t.name,description:t.description,skill:t.skill,roll:r.roll,modifier:r.modifier,total:r.total,dc:r.dc,degree:r.degree,outcome:r.outcome}}},event:t,resolution:r,effectLog:s}},Vh=[{id:"upkeep",name:"Upkeep",icon:Vd},{id:"commerce",name:"Commerce",icon:_n},{id:"activity",name:"Activity",icon:Gr},{id:"event",name:"Event",icon:Es}],eo=e=>Math.floor(Math.random()*e)+1,qh=(e,t)=>Array(e).fill(0).map(()=>eo(t)),Yh=e=>e.reduce((t,r)=>t+r,0),Gh=()=>{const r=Qn(12);return{factions:{1:{id:"1",name:"Nauthgard",color:"#6366f1",isPlayer:!0}},kingdom:{name:"Nauthgard",capital:"Lakewatch",level:3,xp:186,xpToNext:1e3,hexes:12,sizeType:r.type,resourceDie:r.die,fame:3,infamy:0},abilities:{Culture:12,Economy:14,Loyalty:14,Stability:14},skillProficiencies:{Agriculture:"Trained",Defense:"Trained",Engineering:"Trained",Trade:"Trained",Warfare:"Trained",Wilderness:"Trained"},resources:{rp:8,food:4,lumber:3,luxuries:1,ore:2,stone:2},ruin:{Corruption:0,Crime:2,Decay:0,Strife:1},unrest:1,consumption:2,kingdomFeats:[],achievedMilestones:[],workSites:{farmlands:2,lumberCamps:1,mines:1,quarries:1},leadership:N0.map(n=>({...n,holder:null,invested:!1,isPC:!1,bio:""})),settlements:[{id:"lakewatch",name:"Lakewatch",isCapital:!0,blocks:2,mapConfig:{rows:3,cols:3,waterfront:"south"},structurePlacements:[{block:"A",lot:1,structureId:"town-hall",lotsUsed:2},{block:"A",lot:3,structureId:"houses",lotsUsed:1},{block:"A",lot:4,structureId:"general-store",lotsUsed:1},{block:"G",lot:1,structureId:"houses",lotsUsed:1},{block:"G",lot:2,structureId:"mill",lotsUsed:1}],structures:["town-hall","houses","general-store","houses","mill"]}],turn:{year:4708,month:"Lamashan",number:1,phase:"upkeep",phaseComplete:{upkeep:!1,commerce:!1,activity:!1,event:!1},leadershipActionsUsed:0,leadershipActionsMax:3},log:[],history:[],hexMap:{c19:{coord:"c19",status:"claimed",terrain:"plains",faction:"1",workSite:null,settlement:null,notes:"Gold Mine nearby"},c20:{coord:"c20",status:"claimed",terrain:"plains",faction:"1",workSite:null,settlement:null,notes:""},d18:{coord:"d18",status:"claimed",terrain:"forest",faction:"1",workSite:null,settlement:null,notes:"Corrupted Temple - Druids nearby"},d19:{coord:"d19",status:"claimed",terrain:"hills",faction:"1",workSite:"mine",settlement:null,notes:"Mine worksite"},d20:{coord:"d20",status:"claimed",terrain:"forest",faction:"1",workSite:"lumber",settlement:null,notes:"Lumber camp"},d21:{coord:"d21",status:"claimed",terrain:"hills",faction:"1",workSite:"mine",settlement:null,notes:"Ore mine - 2 ore per turn"},d22:{coord:"d22",status:"claimed",terrain:"plains",faction:"1",workSite:null,settlement:null,notes:""},e18:{coord:"e18",status:"claimed",terrain:"plains",faction:"1",workSite:"farm",settlement:null,notes:"Fang Berries location"},e19:{coord:"e19",status:"claimed",terrain:"plains",faction:"1",workSite:"farm",settlement:null,notes:"Farmland"},e20:{coord:"e20",status:"claimed",terrain:"plains",faction:"1",workSite:"quarry",settlement:null,notes:"Quarry worksite"},f19:{coord:"f19",status:"claimed",terrain:"hills",faction:"1",workSite:null,settlement:"Lakewatch",notes:"Capital - Fort on a hill with wooden palisades"},f20:{coord:"f20",status:"claimed",terrain:"plains",faction:"1",workSite:null,settlement:null,notes:""},a18:{coord:"a18",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a19:{coord:"a19",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a20:{coord:"a20",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a21:{coord:"a21",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a22:{coord:"a22",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a23:{coord:"a23",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a24:{coord:"a24",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a25:{coord:"a25",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a26:{coord:"a26",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},a27:{coord:"a27",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},b18:{coord:"b18",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},b19:{coord:"b19",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},b20:{coord:"b20",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},b21:{coord:"b21",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},b22:{coord:"b22",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},b23:{coord:"b23",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},c17:{coord:"c17",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},c18:{coord:"c18",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},c21:{coord:"c21",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},c22:{coord:"c22",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},d17:{coord:"d17",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},d23:{coord:"d23",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},e17:{coord:"e17",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},f18:{coord:"f18",status:"explored",terrain:"forest",faction:null,workSite:null,settlement:null,notes:""},f21:{coord:"f21",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},g17:{coord:"g17",status:"explored",terrain:"swamp",faction:null,workSite:null,settlement:null,notes:""},g18:{coord:"g18",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},g19:{coord:"g19",status:"explored",terrain:"plains",faction:null,workSite:null,settlement:null,notes:""},g20:{coord:"g20",status:"explored",terrain:"water",faction:null,workSite:null,settlement:null,notes:""},h17:{coord:"h17",status:"explored",terrain:"swamp",faction:null,workSite:null,settlement:null,notes:"Hag - Elga Vernex"},h18:{coord:"h18",status:"explored",terrain:"water",faction:null,workSite:null,settlement:null,notes:""},h19:{coord:"h19",status:"explored",terrain:"water",faction:null,workSite:null,settlement:null,notes:"Candlemeer Island - haunted"}}}};function Qh(){var $;const[e,t]=C.useState(Gh),[r,n]=C.useState("dashboard"),[s,i]=C.useState(null),[o,a]=C.useState(!1),[c,d]=C.useState(null),[p,g]=C.useState(!1),[h,w]=C.useState(!1),[k,b]=C.useState(!1),[T,m]=C.useState("kingdom"),[u,f]=C.useState(()=>{const j=localStorage.getItem("kingdomManager_customMaps");if(j)try{return JSON.parse(j)}catch{console.warn("Failed to load custom maps")}return[]}),[y,L]=C.useState(!1),[S,v]=C.useState(!1);C.useEffect(()=>{localStorage.setItem("kingdomManager_customMaps",JSON.stringify(u))},[u]);const M=C.useRef(null);C.useEffect(()=>{const j=x=>{M.current&&!M.current.contains(x.target)&&L(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const z=Qn(e.kingdom.hexes),H=na(e.kingdom.level)+z.dcMod,D=Object.values(e.ruin).reduce((j,x)=>j+x,0),G=e.unrest>=15?4:e.unrest>=10?3:e.unrest>=5?2:e.unrest>=1?1:0,X=j=>Math.floor((e.abilities[j]-10)/2),K=j=>{const x=sa(j);if(!x)return 0;const P=X(x),F=e.skillProficiencies[j]||"Untrained",V=la(F,e.kingdom.level);return P+V-G},B=C.useCallback((j,x="info")=>{const P={timestamp:new Date().toLocaleTimeString(),turn:e.turn.number,phase:e.turn.phase,message:j,type:x};t(F=>({...F,log:[...F.log,P]}))},[e.turn.number,e.turn.phase]),ue=C.useCallback(()=>{const j=e.kingdom.level+4,x=z.die,P=qh(j,x),F=Yh(P);i({rolls:P,total:F,sides:x}),t(V=>({...V,resources:{...V.resources,rp:V.resources.rp+F}})),B(`Rolled ${j}d${x} for Resource Points: [${P.join(", ")}] = ${F} RP`,"success")},[e.kingdom.level,z.die,B]),de=C.useCallback(()=>{const{farmlands:j,lumberCamps:x,mines:P,quarries:F}=e.workSites;t(V=>({...V,resources:{...V.resources,food:V.resources.food+j,lumber:V.resources.lumber+x,ore:V.resources.ore+P,stone:V.resources.stone+F}})),B(`Collected from work sites: +${j} Food, +${x} Lumber, +${P} Ore, +${F} Stone`,"success")},[e.workSites,B]),I=C.useMemo(()=>lf(e),[e.settlements,e.workSites]),U=C.useCallback(()=>{const j=I;if(e.resources.food>=j)t(x=>({...x,consumption:j,resources:{...x.resources,food:x.resources.food-j}})),B(`Paid consumption: -${j} Food`,"success");else{const x=j-e.resources.food,P=eo(4);t(F=>({...F,consumption:j,resources:{...F.resources,food:0},unrest:F.unrest+P})),B(`Food shortage! Missing ${x} Food. +${P} Unrest`,"failure")}},[e.resources.food,I,B]),q=C.useCallback(()=>{const j=["upkeep","commerce","activity","event"],x=j.indexOf(e.turn.phase);if(x<j.length-1){const P=j[x+1];t(F=>({...F,turn:{...F.turn,phase:P,phaseComplete:{...F.turn.phaseComplete,[F.turn.phase]:!0}}})),B(`Advanced to ${P.charAt(0).toUpperCase()+P.slice(1)} Phase`,"info")}},[e.turn.phase,B]),A=C.useCallback(()=>{const x=(wc.indexOf(e.turn.month)+1)%12,P=wc[x],F=x===0?e.turn.year+1:e.turn.year,V={number:e.turn.number,year:e.turn.year,month:e.turn.month,log:[...e.log],endState:{rp:e.resources.rp,unrest:e.unrest,xp:e.kingdom.xp}};t(ee=>({...ee,turn:{...ee.turn,number:ee.turn.number+1,year:F,month:P,phase:"upkeep",phaseComplete:{upkeep:!1,commerce:!1,activity:!1,event:!1},leadershipActionsUsed:0},history:[...ee.history,V],log:[]})),B(`Turn ${e.turn.number} ended. Beginning ${P}, ${F}`,"info")},[e,B]);C.useCallback((j,x)=>{const P=K(j),F=eo(20),V=F+P,ee=V>=x+10?"criticalSuccess":V>=x?"success":V<=x-10?"criticalFailure":"failure";return{roll:F,modifier:P,total:V,dc:x,degree:ee}},[K]);const Y=()=>{const j={version:"1.0",exportedAt:new Date().toISOString(),kingdom:e,mapData:{poiPositions:JSON.parse(localStorage.getItem("kingdomManager_poiPositions")||"[]"),partyPosition:JSON.parse(localStorage.getItem("kingdomManager_partyPosition")||'{"x":4200,"y":1300}')},customMaps:u},x=JSON.stringify(j,null,2),P=new Blob([x],{type:"application/json"}),F=URL.createObjectURL(P),V=document.createElement("a");V.href=F,V.download=`${e.kingdom.name.toLowerCase()}-turn-${e.turn.number}.json`,V.click(),B("Full kingdom state exported (includes map data)","success")},ne=j=>{const x=j.target.files[0];if(x){const P=new FileReader;P.onload=F=>{var V,ee;try{const te=JSON.parse(F.target.result);te.version&&te.kingdom?(t(te.kingdom),(V=te.mapData)!=null&&V.poiPositions&&localStorage.setItem("kingdomManager_poiPositions",JSON.stringify(te.mapData.poiPositions)),(ee=te.mapData)!=null&&ee.partyPosition&&localStorage.setItem("kingdomManager_partyPosition",JSON.stringify(te.mapData.partyPosition)),te.customMaps&&f(te.customMaps),B("Full kingdom state imported (includes map data)","success")):(t(te),B("Kingdom state imported (legacy format)","success"))}catch{B("Failed to import state: Invalid JSON","failure")}},P.readAsText(x)}},ie=()=>{var j;return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"royal-header rounded-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center",children:l.jsx(On,{className:"w-8 h-8 text-purple-900"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-yellow-400 font-cinzel",children:e.kingdom.name}),l.jsxs("p",{className:"text-purple-200",children:["Capital: ",e.kingdom.capital,"  ",e.turn.month,", ",e.turn.year]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-yellow-400 text-xl font-bold",children:["Level ",e.kingdom.level]}),l.jsxs("div",{className:"text-purple-200",children:[e.kingdom.xp," / ",El(e.kingdom.level)," XP"]}),l.jsxs("div",{className:"text-sm text-purple-300",children:[z.type,"  ",e.kingdom.hexes," hexes"]}),Eh(e).shouldLevel&&l.jsx("button",{onClick:()=>b(!0),className:"mt-2 px-3 py-1 bg-green-500 hover:bg-green-400 text-black text-sm font-bold rounded animate-pulse",children:" Level Up Available!"})]})]})}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-yellow-400",children:["Turn ",e.turn.number," - ",e.turn.phase.charAt(0).toUpperCase()+e.turn.phase.slice(1)," Phase"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Control DC: ",H]})]}),l.jsx("div",{className:"flex gap-2",children:Vh.map(x=>{const P=x.icon,F=e.turn.phase===x.id,V=e.turn.phaseComplete[x.id];return l.jsxs("div",{className:`flex-1 p-3 rounded-lg flex items-center justify-center gap-2 transition-all ${F?"bg-yellow-500/20 border border-yellow-500":V?"bg-green-500/20 border border-green-500/50":"bg-white/5 border border-white/10"}`,children:[V?l.jsx(vn,{className:"w-4 h-4 text-green-400"}):l.jsx(P,{className:"w-4 h-4"}),l.jsx("span",{className:F?"text-yellow-400":"",children:x.name})]},x.id)})}),l.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[e.turn.phase==="upkeep"&&!e.turn.phaseComplete.upkeep&&l.jsxs("button",{onClick:()=>{const x=lh(e);t(x.state);for(const P of x.logs)for(const F of P.logs)B(`[${P.step}] ${F}`,F.includes("+")&&F.includes("Unrest")?"failure":"info");B("Upkeep Phase complete","success")},className:"btn-royal flex items-center gap-2",children:[l.jsx(Vd,{className:"w-4 h-4"})," Run Full Upkeep"]}),e.turn.phase==="commerce"&&!e.turn.phaseComplete.commerce&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{const x=xh(e);t(x.state);for(const P of x.logs)for(const F of P.logs)B(`[${P.step}] ${F}`,F.includes("Critical Failure")?"failure":"info")},className:"btn-royal flex items-center gap-2",children:[l.jsx(_n,{className:"w-4 h-4"})," Collect Taxes"]}),l.jsxs("button",{onClick:()=>g(!0),className:"btn-secondary flex items-center gap-2",children:[l.jsx(ra,{className:"w-4 h-4"})," Trade Commodities"]})]}),e.turn.phase==="event"&&!e.turn.phaseComplete.event&&l.jsxs("button",{onClick:()=>{const x=Wh(e);t(x.state);const P={criticalSuccess:"Critical Success!",success:"Success",failure:"Failure",criticalFailure:"Critical Failure!"}[x.resolution.degree];B(`EVENT: ${x.event.name}`,"info"),B(`${x.event.description}`,"info"),B(`${x.event.skill} check: ${x.resolution.roll} + ${x.resolution.modifier} = ${x.resolution.total} vs DC ${x.resolution.dc}`,"info"),B(`${P}: ${x.resolution.outcome.message}`,x.resolution.degree.includes("Success")?"success":"failure"),x.effectLog.length>0&&B(`Effects: ${x.effectLog.join(", ")}`,x.effectLog.some(F=>F.includes("+")&&!F.includes("Unrest")&&!F.includes("Infamy"))?"success":"failure")},className:"btn-royal flex items-center gap-2",children:[l.jsx(Es,{className:"w-4 h-4"})," Roll Random Event"]}),l.jsxs("button",{onClick:q,className:"btn-royal flex items-center gap-2",children:[l.jsx(An,{className:"w-4 h-4"})," Advance Phase"]}),e.turn.phase==="event"&&e.turn.phaseComplete.event&&l.jsx("button",{onClick:A,className:"btn-secondary",children:"End Turn"})]}),e.turn.phase==="event"&&e.turn.lastEvent&&l.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Es,{className:"w-5 h-5 text-yellow-400"}),l.jsx("span",{className:"font-semibold text-yellow-400",children:e.turn.lastEvent.name}),l.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e.turn.lastEvent.degree==="criticalSuccess"?"bg-green-500/20 text-green-400":e.turn.lastEvent.degree==="success"?"bg-blue-500/20 text-blue-400":e.turn.lastEvent.degree==="failure"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.turn.lastEvent.degree==="criticalSuccess"?"Crit Success!":e.turn.lastEvent.degree==="success"?"Success":e.turn.lastEvent.degree==="failure"?"Failure":"Crit Failure!"})]}),l.jsx("p",{className:"text-gray-400 text-sm mb-2",children:e.turn.lastEvent.description}),l.jsx("p",{className:"text-gray-300 text-sm",children:e.turn.lastEvent.outcome.message}),l.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[e.turn.lastEvent.skill," check: ",e.turn.lastEvent.roll," + ",e.turn.lastEvent.modifier," = ",e.turn.lastEvent.total," vs DC ",e.turn.lastEvent.dc]})]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Culture","Economy","Loyalty","Stability"].map(x=>l.jsxs("div",{className:"glass-card p-4 text-center",children:[l.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider",children:x}),l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.abilities[x]}),l.jsxs("div",{className:"text-sm text-gray-300",children:[X(x)>=0?"+":"",X(x)]})]},x))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"text-yellow-400 font-semibold flex items-center gap-2",children:[l.jsx(_n,{className:"w-5 h-5"})," Resource Points"]}),l.jsxs("span",{className:"text-2xl font-bold",children:[e.resources.rp," RP"]})]}),e.turn.phase==="upkeep"&&!e.turn.phaseComplete.upkeep&&l.jsxs("button",{onClick:ue,className:"btn-secondary w-full flex items-center justify-center gap-2",children:[l.jsx(qd,{className:"w-4 h-4"})," Roll Resource Dice (",e.kingdom.level+4,"d",z.die,")"]}),(s||e.turn.resourceDiceResult)&&l.jsxs("div",{className:"mt-2 p-2 bg-black/30 rounded text-sm",children:["Last roll: ",e.turn.resourceDiceResult||(s==null?void 0:s.total)," RP"]})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsx("h3",{className:"text-yellow-400 font-semibold mb-3",children:"Commodities"}),l.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[l.jsxs("div",{className:"commodity-card",children:[l.jsx(hr,{className:"w-5 h-5 mx-auto mb-1 text-amber-400"}),l.jsx("div",{className:"text-lg font-bold",children:e.resources.food}),l.jsx("div",{className:"text-xs text-gray-400",children:"Food"})]}),l.jsxs("div",{className:"commodity-card",children:[l.jsx(Gn,{className:"w-5 h-5 mx-auto mb-1 text-green-400"}),l.jsx("div",{className:"text-lg font-bold",children:e.resources.lumber}),l.jsx("div",{className:"text-xs text-gray-400",children:"Lumber"})]}),l.jsxs("div",{className:"commodity-card",children:[l.jsx(Ko,{className:"w-5 h-5 mx-auto mb-1 text-pink-400"}),l.jsx("div",{className:"text-lg font-bold",children:e.resources.luxuries}),l.jsx("div",{className:"text-xs text-gray-400",children:"Luxuries"})]}),l.jsxs("div",{className:"commodity-card",children:[l.jsx(Wr,{className:"w-5 h-5 mx-auto mb-1 text-orange-400"}),l.jsx("div",{className:"text-lg font-bold",children:e.resources.ore}),l.jsx("div",{className:"text-xs text-gray-400",children:"Ore"})]}),l.jsxs("div",{className:"commodity-card",children:[l.jsx("div",{className:"w-5 h-5 mx-auto mb-1 bg-gray-400 rounded"}),l.jsx("div",{className:"text-lg font-bold",children:e.resources.stone}),l.jsx("div",{className:"text-xs text-gray-400",children:"Stone"})]})]}),e.turn.phase==="upkeep"&&!e.turn.phaseComplete.upkeep&&l.jsxs("div",{className:"mt-3 flex gap-2",children:[l.jsx("button",{onClick:de,className:"btn-secondary flex-1",children:"Collect Work Sites"}),l.jsxs("button",{onClick:U,className:"btn-secondary flex-1",children:["Pay Consumption (",I,")"]})]}),e.turn.phaseComplete.upkeep&&l.jsx("div",{className:"mt-3 text-sm text-green-400 text-center",children:" Upkeep complete"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-yellow-400 font-semibold flex items-center gap-2",children:[l.jsx(Es,{className:"w-5 h-5"})," Unrest"]}),l.jsx("span",{className:`text-2xl font-bold ${e.unrest>=5?"text-red-400":"text-green-400"}`,children:e.unrest})]}),G>0&&l.jsxs("div",{className:"text-sm text-red-400 mt-1",children:["-",G," penalty to all checks"]}),l.jsx("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${e.unrest>=10?"bg-red-500":e.unrest>=5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(e.unrest*5,100)}%`}})})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("h3",{className:"text-yellow-400 font-semibold mb-3",children:["Ruin (Total: ",D,")"]}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:["Corruption","Crime","Decay","Strife"].map(x=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs text-gray-400",children:x}),l.jsx("div",{className:"text-lg font-bold",children:e.ruin[x]})]},x))})]})]}),((j=e.kingdomFeats)==null?void 0:j.length)>0&&l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("h3",{className:"text-yellow-400 font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Wd,{className:"w-5 h-5"})," Kingdom Feats"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.kingdomFeats.map(x=>{const P=Hn(x);return P?l.jsxs("div",{className:"p-3 bg-purple-900/20 border border-purple-500/30 rounded",children:[l.jsx("div",{className:"font-medium text-purple-300",children:P.name}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:P.benefit})]},P.id):null})})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsxs("h3",{className:"text-yellow-400 font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Qd,{className:"w-5 h-5"})," Award XP"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[10,20,40,80].map(x=>l.jsxs("button",{onClick:()=>{t(P=>({...P,kingdom:{...P.kingdom,xp:(P.kingdom.xp||0)+x}})),B(`Awarded ${x} XP`,"success")},className:"px-3 py-2 bg-green-600/20 hover:bg-green-600/40 border border-green-500/50 rounded text-green-400 text-sm",children:["+",x," XP"]},x)),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",placeholder:"Custom",className:"w-20 px-2 py-2 bg-black/30 border border-white/20 rounded text-sm",onKeyDown:x=>{if(x.key==="Enter"){const P=parseInt(x.target.value)||0;P>0&&(t(F=>({...F,kingdom:{...F.kingdom,xp:(F.kingdom.xp||0)+P}})),B(`Awarded ${P} XP`,"success"),x.target.value="")}}}),l.jsx("span",{className:"text-xs text-gray-500",children:"Enter"})]})]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Quick: Hex claimed (10), Event resolved (20), Quest complete (40), Milestone (80)"})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsx("h3",{className:"text-yellow-400 font-semibold mb-3",children:"Quick Actions"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>w(!0),className:"btn-royal flex items-center gap-2",children:[l.jsx(On,{className:"w-4 h-4"})," New Kingdom"]}),l.jsxs("button",{onClick:Y,className:"btn-secondary flex items-center gap-2",children:[l.jsx(Qp,{className:"w-4 h-4"})," Export"]}),l.jsxs("label",{className:"btn-secondary flex items-center gap-2 cursor-pointer",children:[l.jsx(w0,{className:"w-4 h-4"})," Import",l.jsx("input",{type:"file",accept:".json",onChange:ne,className:"hidden"})]})]})]})]})},se=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(Ji,{className:"w-6 h-6"})," Leadership Council"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.leadership.map((j,x)=>l.jsxs("div",{className:"glass-card glass-card-hover p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"font-semibold text-yellow-400",children:j.name}),l.jsx("span",{className:"text-xs bg-purple-900/50 px-2 py-1 rounded",children:j.ability})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-3",children:j.description}),l.jsx("input",{type:"text",placeholder:"Holder name...",value:j.holder||"",onChange:P=>{const F=[...e.leadership];F[x]={...j,holder:P.target.value},t(V=>({...V,leadership:F}))},className:"w-full bg-black/30 border border-white/10 rounded px-3 py-2 text-sm mb-2"}),l.jsxs("div",{className:"flex gap-4 text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:j.isPC,onChange:P=>{const F=[...e.leadership];F[x]={...j,isPC:P.target.checked},t(V=>({...V,leadership:F}))},className:"rounded"}),"PC"]}),l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:j.invested,onChange:P=>{const F=[...e.leadership];F[x]={...j,invested:P.target.checked},t(V=>({...V,leadership:F}))},className:"rounded"}),"Invested"]})]})]},j.id))})]}),Se=()=>{const j=({activity:x})=>l.jsxs("button",{onClick:()=>{d(x),a(!0)},className:"text-left p-3 bg-white/5 hover:bg-white/10 rounded border border-white/10 hover:border-yellow-500/50 transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"font-medium",children:x.name}),x.rpCost>0&&l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${e.resources.rp>=x.rpCost?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[x.rpCost," RP"]})]}),l.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[x.skill,"  ",x.desc]})]},x.id);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold text-yellow-400",children:"Activities"}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Leadership Actions: ",e.turn.leadershipActionsUsed,"/",e.turn.leadershipActionsMax,"  RP: ",e.resources.rp]})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsx("h3",{className:"text-yellow-400 font-semibold mb-3",children:"Leadership Activities"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ef.map(x=>l.jsx(j,{activity:x},x.id))})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsx("h3",{className:"text-yellow-400 font-semibold mb-3",children:"Region Activities"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:tf.map(x=>l.jsx(j,{activity:x},x.id))})]}),l.jsxs("div",{className:"glass-card p-4",children:[l.jsx("h3",{className:"text-yellow-400 font-semibold mb-3",children:"Civic Activities"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:rf.map(x=>l.jsx(j,{activity:x},x.id))})]})]})},Ie=()=>{var x,P,F;const j=(V,ee)=>{t(te=>({...te,settlements:te.settlements.map(ye=>ye.id===V.id?V:ye),resources:ee||te.resources}))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(tl,{className:"w-6 h-6"})," Settlements"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[((x=e.settlements)==null?void 0:x.length)||0," settlement",(((P=e.settlements)==null?void 0:P.length)||0)!==1?"s":""]})]}),((F=e.settlements)==null?void 0:F.length)===0?l.jsxs("div",{className:"glass-card p-8 text-center text-gray-400",children:[l.jsx(Xo,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),l.jsx("p",{children:"No settlements yet."}),l.jsx("p",{className:"text-sm mt-2",children:'Use the "Establish Settlement" activity to found one!'})]}):e.settlements.map(V=>l.jsx(Oh,{settlement:V,state:e,onUpdateSettlement:j,onLog:B},V.id))]})},Ze=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(xc,{className:"w-6 h-6"})," Turn Log"]}),l.jsx("div",{className:"glass-card p-4 max-h-96 overflow-y-auto",children:e.log.length===0?l.jsx("p",{className:"text-gray-400",children:"No actions logged this turn."}):e.log.map((j,x)=>l.jsxs("div",{className:`log-entry ${j.type}`,children:[l.jsxs("span",{className:"text-gray-500 text-xs",children:["[",j.timestamp,"]"]})," ",l.jsx("span",{className:"text-gray-300",children:j.message})]},x))})]}),Je=C.useCallback(j=>{t(x=>{var P;return{...x,hexMap:{...x.hexMap,[j.coord]:j},kingdom:j.status==="claimed"&&((P=x.hexMap[j.coord])==null?void 0:P.status)!=="claimed"?{...x.kingdom,hexes:x.kingdom.hexes+1}:x.kingdom}}),B(`Hex ${j.coord.toUpperCase()}: ${j.status}`,"success")},[B]),kt=()=>{if(T==="kingdom")return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[l.jsx(rl,{className:"w-6 h-6"})," Kingdom Map"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[Object.values(e.hexMap).filter(x=>x.status==="claimed").length," hexes claimed"]})]}),l.jsx("div",{className:"h-[700px]",children:l.jsx(H0,{hexes:e.hexMap,factions:e.factions,onHexUpdate:Je,onFactionsUpdate:x=>t(P=>({...P,factions:x})),kingdomName:e.kingdom.name})})]});const j=u.find(x=>x.id===T);return j?l.jsx(Kh,{map:j,onUpdate:x=>{f(P=>P.map(F=>F.id===x.id?x:F))},onDelete:()=>{f(x=>x.filter(P=>P.id!==j.id)),m("kingdom")}}):l.jsx("div",{className:"text-gray-400",children:"Map not found"})},N=[{id:"dashboard",label:"Dashboard",icon:vc},{id:"leadership",label:"Leadership",icon:Ji},{id:"activities",label:"Activities",icon:Gr},{id:"skills",label:"Skills",icon:Js},{id:"settlements",label:"Settlements",icon:tl},{id:"log",label:"Log",icon:xc}];return T==="kingdom"||($=u.find(j=>j.id===T))!=null&&$.name,l.jsxs("div",{className:"min-h-screen",children:[l.jsx("nav",{className:"sticky top-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/10",children:l.jsx("div",{className:"max-w-6xl mx-auto px-4 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>n("dashboard"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${r==="dashboard"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"hover:bg-white/5 text-gray-400"}`,children:[l.jsx(vc,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),l.jsxs("div",{className:"relative",ref:M,children:[l.jsxs("button",{onClick:()=>L(!y),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${r==="map"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"hover:bg-white/5 text-gray-400"}`,children:[l.jsx(rl,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Map"}),l.jsx(Wp,{className:`w-3 h-3 transition-transform ${y?"rotate-180":""}`})]}),y&&l.jsxs("div",{className:"absolute top-full left-0 mt-1 w-56 bg-gray-900 border border-yellow-600/30 rounded-lg shadow-2xl py-1 z-[200]",children:[l.jsxs("button",{onClick:()=>{m("kingdom"),n("map"),L(!1)},className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-yellow-600/20 ${T==="kingdom"?"text-yellow-400":"text-gray-200"}`,children:[l.jsx(el,{className:"w-4 h-4"}),"Kingdom Map",T==="kingdom"&&l.jsx(vn,{className:"w-3 h-3 ml-auto"})]}),u.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-t border-white/10 my-1"}),u.map(j=>l.jsxs("button",{onClick:()=>{m(j.id),n("map"),L(!1)},className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-yellow-600/20 ${T===j.id?"text-yellow-400":"text-gray-200"}`,children:[j.gridType==="hex"?l.jsx(el,{className:"w-4 h-4"}):l.jsx(Zo,{className:"w-4 h-4"}),j.name,T===j.id&&l.jsx(vn,{className:"w-3 h-3 ml-auto"})]},j.id))]}),l.jsx("div",{className:"border-t border-white/10 my-1"}),l.jsxs("button",{onClick:()=>{v(!0),L(!1)},className:"w-full px-4 py-2 text-left text-sm flex items-center gap-2 hover:bg-yellow-600/20 text-green-400",children:[l.jsx(Jo,{className:"w-4 h-4"}),"Add New Map..."]})]})]}),N.filter(j=>j.id!=="dashboard").map(j=>{const x=j.icon;return l.jsxs("button",{onClick:()=>n(j.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${r===j.id?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"hover:bg-white/5 text-gray-400"}`,children:[l.jsx(x,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:j.label})]},j.id)})]})})}),l.jsxs("main",{className:"max-w-6xl mx-auto p-4",children:[r==="dashboard"&&ie(),r==="map"&&kt(),r==="leadership"&&se(),r==="activities"&&Se(),r==="skills"&&l.jsx(Ah,{state:e,onStateChange:t,onLog:B}),r==="settlements"&&Ie(),r==="log"&&Ze()]}),o&&c&&l.jsx(ph,{activity:c,state:e,onClose:()=>{a(!1),d(null)},onExecute:j=>{t(j)},onLog:B}),p&&l.jsx(bh,{state:e,onClose:()=>g(!1),onTrade:j=>t(j),onLog:B}),h&&l.jsx(Sh,{onCancel:()=>w(!1),onComplete:j=>{t(x=>({...x,kingdom:{...x.kingdom,name:j.name,charter:j.charter,heartland:j.heartland,government:j.government,level:1,xp:0,hexes:1},abilities:j.abilities,skillProficiencies:{...Object.keys(x.skillProficiencies||{}).reduce((P,F)=>({...P,[F]:"Untrained"}),{}),...j.trainedSkills.reduce((P,F)=>({...P,[F]:"Trained"}),{})},factions:{1:{id:"1",name:j.name,color:"#6366f1",isPlayer:!0}}})),w(!1),B(`Founded the kingdom of ${j.name}!`,"success")}}),k&&l.jsx(Rh,{state:e,onCancel:()=>b(!1),onComplete:j=>{t(j),b(!1),B(`Kingdom leveled up to Level ${j.kingdom.level}!`,"success");const x=Fh(j);if(x.length>0){const P=Lh(j,x);t(P.state);for(const F of P.log)B(F,"success")}}}),S&&l.jsx(Xh,{onClose:()=>v(!1),onAdd:j=>{f(x=>[...x,j]),m(j.id),n("map"),v(!1)}})]})}function Xh({onClose:e,onAdd:t}){const[r,n]=C.useState(""),[s,i]=C.useState("square"),[o,a]=C.useState(50),[c,d]=C.useState(null),[p,g]=C.useState(null),h=C.useRef(null),w=b=>{const T=b.target.files[0];if(!T)return;const m=new FileReader;m.onload=u=>{d(u.target.result),g(u.target.result)},m.readAsDataURL(T)},k=()=>{if(!r.trim()||!c)return;const b={id:`map-${Date.now()}`,name:r.trim(),gridType:s,gridSize:o,imageData:c,width:0,height:0,pois:[],fog:[],createdAt:new Date().toISOString()};t(b)};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-900/95 border border-yellow-600/30 rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Add New Map"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Map Name"}),l.jsx("input",{type:"text",value:r,onChange:b=>n(b.target.value),placeholder:"e.g., Dungeon Level 1, Battle Map...",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Map Image"}),l.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:w,className:"hidden"}),l.jsxs("button",{onClick:()=>{var b;return(b=h.current)==null?void 0:b.click()},className:"w-full bg-gray-800 border border-gray-700 border-dashed rounded px-3 py-4 text-gray-400 hover:border-yellow-500 hover:text-yellow-400 transition-colors flex items-center justify-center gap-2",children:[l.jsx(n0,{className:"w-5 h-5"}),p?"Change Image...":"Upload Image (JPG, PNG, etc.)"]}),p&&l.jsx("div",{className:"mt-2 rounded overflow-hidden border border-gray-700",children:l.jsx("img",{src:p,alt:"Preview",className:"w-full h-40 object-cover"})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Grid Type"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>i("square"),className:`flex-1 px-3 py-2 rounded flex items-center justify-center gap-2 transition-colors ${s==="square"?"bg-yellow-600/30 border border-yellow-500 text-yellow-400":"bg-gray-800 border border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[l.jsx(Zo,{className:"w-5 h-5"}),"Square"]}),l.jsxs("button",{onClick:()=>i("hex"),className:`flex-1 px-3 py-2 rounded flex items-center justify-center gap-2 transition-colors ${s==="hex"?"bg-yellow-600/30 border border-yellow-500 text-yellow-400":"bg-gray-800 border border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[l.jsx(el,{className:"w-5 h-5"}),"Hex"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Grid Size (pixels per cell)"}),l.jsx("input",{type:"range",min:"20",max:"200",value:o,onChange:b=>a(Number(b.target.value)),className:"w-full"}),l.jsxs("div",{className:"text-center text-sm text-gray-400",children:[o,"px"]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-6",children:[l.jsx("button",{onClick:k,disabled:!r.trim()||!c,className:`flex-1 py-2 px-4 rounded font-medium transition-colors ${r.trim()&&c?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"Create Map"}),l.jsx("button",{onClick:e,className:"bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded",children:"Cancel"})]})]})})}function Kh({map:e,onUpdate:t,onDelete:r}){var q;const[n,s]=C.useState({x:0,y:0,width:800,height:600}),[i,o]=C.useState(!1),[a,c]=C.useState({x:0,y:0}),[d,p]=C.useState(!0),[g,h]=C.useState(!0),[w,k]=C.useState(null),[b,T]=C.useState(!1),[m,u]=C.useState({width:1e3,height:1e3}),f=C.useRef(null),[y,L]=C.useState(e.gridSize||50),[S,v]=C.useState(e.gridOffsetX||0),[M,z]=C.useState(e.gridOffsetY||0),H=()=>{t({...e,gridSize:y,gridOffsetX:S,gridOffsetY:M,fog:[]}),T(!1)};C.useEffect(()=>{const A=new window.Image;A.onload=()=>{u({width:A.width,height:A.height}),s({x:0,y:0,width:Math.min(A.width,1200),height:Math.min(A.height,800)})},A.src=e.imageData},[e.imageData]);const D=C.useMemo(()=>{const A=[],{width:Y,height:ne}=m,ie=S||0,se=M||0;if(e.gridType==="square"){const Se=Math.ceil((Y-ie)/y)+1,Ie=Math.ceil((ne-se)/y)+1;for(let Ze=0;Ze<Ie;Ze++)for(let Je=0;Je<Se;Je++){const kt=ie+Je*y,N=se+Ze*y;kt<Y&&N<ne&&A.push({id:`${Je}-${Ze}`,x:kt,y:N,col:Je,row:Ze})}}return A},[y,S,M,e.gridType,m]),G=A=>{var Y;return((Y=e.fog)==null?void 0:Y.includes(A))??!1},X=A=>{if(!w)return;const Y=G(A);let ne;if(w==="reveal"&&!Y)ne=[...e.fog||[],A];else if(w==="hide"&&Y)ne=(e.fog||[]).filter(ie=>ie!==A);else return;t({...e,fog:ne})},K=A=>{s(Y=>{const ne=A>0?1.25:.8,ie=Math.max(200,Math.min(m.width*2,Y.width*ne)),se=Math.max(150,Math.min(m.height*2,Y.height*ne)),Se=(Y.width-ie)/2,Ie=(Y.height-se)/2;return{x:Y.x+Se,y:Y.y+Ie,width:ie,height:se}})},B=A=>{const Y=A<0?2:-2;L(ne=>Math.max(10,Math.min(200,ne+Y)))},ue=A=>{A.button===0&&!w&&(o(!0),c({x:A.clientX,y:A.clientY}))},de=A=>{if(!i||!f.current)return;const Y=f.current.getBoundingClientRect(),ne=(A.clientX-a.x)*(n.width/Y.width),ie=(A.clientY-a.y)*(n.height/Y.height);b?(v(se=>se+ne),z(se=>se+ie)):s(se=>({...se,x:Math.max(0,Math.min(m.width-se.width,se.x-ne)),y:Math.max(0,Math.min(m.height-se.height,se.y-ie))})),c({x:A.clientX,y:A.clientY})},I=()=>o(!1),U=A=>{A.preventDefault(),b?B(A.deltaY):K(A.deltaY)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"text-xl font-semibold text-yellow-400 flex items-center gap-2",children:[e.gridType==="hex"?l.jsx(el,{className:"w-6 h-6"}):l.jsx(Zo,{className:"w-6 h-6"}),e.name]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>r(),className:"text-red-400 hover:text-red-300 text-sm px-2 py-1",children:"Delete Map"})})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>K(-1),className:"p-2 bg-gray-800 rounded hover:bg-gray-700",children:l.jsx(Jo,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>K(1),className:"p-2 bg-gray-800 rounded hover:bg-gray-700",children:l.jsx("span",{className:"w-4 h-4 block text-center leading-4",children:""})})]}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:d,onChange:A=>p(A.target.checked)}),"Show Grid"]}),l.jsx("button",{onClick:()=>T(!b),className:`px-2 py-1 rounded text-sm ${b?"bg-yellow-600 text-black":"bg-gray-700 text-gray-300"}`,children:" Adjust Grid"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:g,onChange:A=>h(A.target.checked)}),"Fog of War"]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx("span",{className:"text-gray-400 mr-1",children:"Fog:"}),l.jsx("button",{onClick:()=>k(w==="reveal"?null:"reveal"),className:`px-2 py-1 rounded ${w==="reveal"?"bg-green-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Reveal"}),l.jsx("button",{onClick:()=>k(w==="hide"?null:"hide"),className:`px-2 py-1 rounded ${w==="hide"?"bg-red-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Hide"})]})]}),b&&l.jsxs("div",{className:"bg-yellow-900/30 rounded-lg p-4 border border-yellow-500",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"text-sm font-medium text-yellow-400",children:" Grid Alignment Mode"}),l.jsxs("span",{className:"text-xs text-gray-400",children:["Size: ",y,"px"]})]}),l.jsxs("div",{className:"text-sm text-gray-300 mb-3",children:[l.jsxs("p",{children:[" ",l.jsx("strong",{children:"Drag"})," to position the grid"]}),l.jsxs("p",{children:[" ",l.jsx("strong",{children:"Scroll"})," to resize grid cells"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:H,className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded text-sm",children:" Save Grid"}),l.jsx("button",{onClick:()=>{L(e.gridSize||50),v(e.gridOffsetX||0),z(e.gridOffsetY||0),T(!1)},className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Cancel"})]})]}),l.jsx("div",{className:"h-[650px] bg-black rounded-lg overflow-hidden border border-gray-700",children:l.jsxs("svg",{ref:f,viewBox:`${n.x} ${n.y} ${n.width} ${n.height}`,className:"w-full h-full",onMouseDown:ue,onMouseMove:de,onMouseUp:I,onMouseLeave:I,onWheel:U,style:{cursor:w?"crosshair":i?"grabbing":"grab"},children:[l.jsx("image",{href:e.imageData,x:"0",y:"0",width:m.width,height:m.height}),d&&e.gridType==="square"&&D.map(A=>l.jsx("rect",{x:A.x,y:A.y,width:y,height:y,fill:"transparent",stroke:b?"rgba(255,200,0,0.5)":"rgba(255,255,255,0.2)",strokeWidth:1,vectorEffect:"non-scaling-stroke",onClick:()=>X(A.id),style:{cursor:w?"pointer":"inherit"}},A.id)),b&&l.jsxs("g",{children:[l.jsx("circle",{cx:S,cy:M,r:8,fill:"red",stroke:"white",strokeWidth:2,vectorEffect:"non-scaling-stroke"}),l.jsx("line",{x1:S-15,y1:M,x2:S+15,y2:M,stroke:"red",strokeWidth:2,vectorEffect:"non-scaling-stroke"}),l.jsx("line",{x1:S,y1:M-15,x2:S,y2:M+15,stroke:"red",strokeWidth:2,vectorEffect:"non-scaling-stroke"})]}),g&&!b&&D.map(A=>G(A.id)?null:l.jsx("rect",{x:A.x,y:A.y,width:y,height:y,fill:"rgba(0,0,0,0.85)",onClick:()=>X(A.id),style:{cursor:w?"pointer":"inherit"}},`fog-${A.id}`))]})}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Grid: ",e.gridSize,"px ",e.gridType,"  ",D.length," cells  ",((q=e.fog)==null?void 0:q.length)||0," revealed"]})]})}function Zh(){return l.jsx(Qh,{})}li.createRoot(document.getElementById("root")).render(l.jsx(Bc.StrictMode,{children:l.jsx(Zh,{})}));
